var officeOnlineCpuProfiling;!function(){"use strict";var e={928:function(e,r){function t(){return void 0===globalThis.__get_change_gate_dictionary_variable?{}:globalThis.__get_change_gate_dictionary_variable()}Object.defineProperty(r,"__esModule",{value:!0}),r.getChangeGateDictionary=t,r.isChangeGateEnabled=function(e){return t()[e]??!0},r.setChangeGateDictionaryGetter=function(e){const r=globalThis.__get_change_gate_dictionary_variable;return globalThis.__get_change_gate_dictionary_variable=e,r}},679:function(e,r){function t(e){return e.split("")}Object.defineProperty(r,"__esModule",{value:!0}),r.editDistance=function(e,r){const s=t(e),o=t(r);let i=[];for(let e=0;e<=o.length;++e)i[e]=e;for(let e=1;e<=s.length;++e){const r=[e];for(let t=1;t<=o.length;++t)r[t]=s[e-1]===o[t-1]?i[t-1]:1+Math.min(i[t],i[t-1],r[t-1]);i=r}return i[o.length]}},640:function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.disableVerboseMode=function(){globalThis.__office_online_feature_gates_verbose_log_callback=void 0},r.enableVerboseMode=function(e){globalThis.__office_online_feature_gates_verbose_log_callback=e},r.getFeatureGateDictionary=i,r.getStringFeatureGate=n,r.getBooleanFeatureGate=function(e,r){const t=n(e)?.trim().toLowerCase();return"true"===t||"false"!==t&&r},r.getNumberFeatureGate=function(e,r){const t=n(e)?.trim().toLowerCase();if(void 0===t)return r;if("infinity"===t||"+infinity"===t)return 1/0;if("-infinity"===t)return-1/0;const s=parseFloat(t);return isNaN(s)?r:s},r.getIntFeatureGate=function(e,r){const t=n(e)?.trim();if(void 0===t)return r;const s=parseInt(t,10);return isNaN(s)?r:s},r.setFeatureGateDictionaryGetter=function(e){const r=globalThis.__get_feature_gate_dictionary_variable;return globalThis.__get_feature_gate_dictionary_variable=e,r};const s=t(679),o={};function i(){return void 0===globalThis.__get_feature_gate_dictionary_variable?o:globalThis.__get_feature_gate_dictionary_variable()}function n(e,r){if(void 0===globalThis.__office_online_feature_gates_verbose_log_callback)return i()[e]??r;const t=i();if(Object.hasOwn(t,e))return t[e]??r;const o=globalThis.__office_online_feature_gates_verbose_log_callback;o(`Failed lookup for FeatureGate ${e}...`);const n=[],a=e.toLowerCase();for(const e of Object.keys(t))(0,s.editDistance)(e.toLowerCase(),a)<=4&&n.push(e);return n.length>0&&o(`Potential candidates found (edit distance <= 4, case-insensitive): [${n.join(", ")}]`),o(`FeatureGate override not found, returning default: ${r}`),r}},392:function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0});const s=t(533);s.__exportStar(t(640),r),s.__exportStar(t(235),r),s.__exportStar(t(928),r),s.__exportStar(t(4),r),s.__exportStar(t(472),r),s.__exportStar(t(408),r)},235:function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.makeGetTypedFeatureGate=function(e){return function(r){const t=e[r];switch(typeof t){case"boolean":return(0,s.getBooleanFeatureGate)(r,t);case"number":return(0,s.getNumberFeatureGate)(r,t);case"string":return(0,s.getStringFeatureGate)(r,t);default:throw new Error("Wrong defaultValue type")}}};const s=t(640)},4:function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.makeTypedIsChangeGateEnabled=function(e){return e=>(0,s.isChangeGateEnabled)(e)};const s=t(928)},472:function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.overrideChangeGates=o,r.overrideTypedChangeGates=function(e,r){return o(r)};const s=t(928);function o(e){const r=(0,s.setChangeGateDictionaryGetter)(void 0);return(0,s.setChangeGateDictionaryGetter)((()=>({...void 0!==r?r():{},...e}))),r}},408:function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.overrideFeatureGates=o,r.overrideTypedFeatureGates=function(e,r){return o(r)};const s=t(640);function o(e){const r={};for(const t of Object.keys(e))r[t]=e[t]?.toString();const t=(0,s.setFeatureGateDictionaryGetter)(void 0)??(()=>({}));return(0,s.setFeatureGateDictionaryGetter)((()=>({...t(),...r}))),t}},533:function(e,r,t){t.r(r),t.d(r,{__addDisposableResource:function(){return E},__assign:function(){return i},__asyncDelegator:function(){return O},__asyncGenerator:function(){return b},__asyncValues:function(){return y},__await:function(){return k},__awaiter:function(){return p},__classPrivateFieldGet:function(){return N},__classPrivateFieldIn:function(){return F},__classPrivateFieldSet:function(){return x},__createBinding:function(){return T},__decorate:function(){return a},__disposeResources:function(){return U},__esDecorate:function(){return d},__exportStar:function(){return f},__extends:function(){return o},__generator:function(){return h},__importDefault:function(){return _},__importStar:function(){return R},__makeTemplateObject:function(){return W},__metadata:function(){return m},__param:function(){return l},__propKey:function(){return u},__read:function(){return C},__rest:function(){return n},__runInitializers:function(){return c},__setFunctionName:function(){return g},__spread:function(){return S},__spreadArray:function(){return I},__spreadArrays:function(){return v},__values:function(){return P},default:function(){return L}});var s=function(e,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])},s(e,r)};function o(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=e}s(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}var i=function(){return i=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},i.apply(this,arguments)};function n(e,r){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(t[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)r.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(t[s[o]]=e[s[o]])}return t}function a(e,r,t,s){var o,i=arguments.length,n=i<3?r:null===s?s=Object.getOwnPropertyDescriptor(r,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,r,t,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function l(e,r){return function(t,s){r(t,s,e)}}function d(e,r,t,s,o,i){function n(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,l=s.kind,d="getter"===l?"get":"setter"===l?"set":"value",c=!r&&e?s.static?e:e.prototype:null,u=r||(c?Object.getOwnPropertyDescriptor(c,s.name):{}),g=!1,m=t.length-1;m>=0;m--){var p={};for(var h in s)p[h]="access"===h?{}:s[h];for(var h in s.access)p.access[h]=s.access[h];p.addInitializer=function(e){if(g)throw new TypeError("Cannot add initializers after decoration has completed");i.push(n(e||null))};var T=(0,t[m])("accessor"===l?{get:u.get,set:u.set}:u[d],p);if("accessor"===l){if(void 0===T)continue;if(null===T||"object"!=typeof T)throw new TypeError("Object expected");(a=n(T.get))&&(u.get=a),(a=n(T.set))&&(u.set=a),(a=n(T.init))&&o.unshift(a)}else(a=n(T))&&("field"===l?o.unshift(a):u[d]=a)}c&&Object.defineProperty(c,s.name,u),g=!0}function c(e,r,t){for(var s=arguments.length>2,o=0;o<r.length;o++)t=s?r[o].call(e,t):r[o].call(e);return s?t:void 0}function u(e){return"symbol"==typeof e?e:"".concat(e)}function g(e,r,t){return"symbol"==typeof r&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:t?"".concat(t," ",r):r})}function m(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)}function p(e,r,t,s){return new(t||(t=Promise))((function(o,i){function n(e){try{l(s.next(e))}catch(e){i(e)}}function a(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(n,a)}l((s=s.apply(e,r||[])).next())}))}function h(e,r){var t,s,o,i,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(l){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(n=0)),n;)try{if(t=1,s&&(o=2&a[0]?s.return:a[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,a[1])).done)return o;switch(s=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,s=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!((o=(o=n.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=r.call(e,n)}catch(e){a=[6,e],s=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var T=Object.create?function(e,r,t,s){void 0===s&&(s=t);var o=Object.getOwnPropertyDescriptor(r,t);o&&!("get"in o?!r.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,s,o)}:function(e,r,t,s){void 0===s&&(s=t),e[s]=r[t]};function f(e,r){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(r,t)||T(r,e,t)}function P(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],s=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function C(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var s,o,i=t.call(e),n=[];try{for(;(void 0===r||r-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(e){o={error:e}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return n}function S(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(C(arguments[r]));return e}function v(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var s=Array(e),o=0;for(r=0;r<t;r++)for(var i=arguments[r],n=0,a=i.length;n<a;n++,o++)s[o]=i[n];return s}function I(e,r,t){if(t||2===arguments.length)for(var s,o=0,i=r.length;o<i;o++)!s&&o in r||(s||(s=Array.prototype.slice.call(r,0,o)),s[o]=r[o]);return e.concat(s||Array.prototype.slice.call(r))}function k(e){return this instanceof k?(this.v=e,this):new k(e)}function b(e,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,o=t.apply(e,r||[]),i=[];return s={},n("next"),n("throw"),n("return"),s[Symbol.asyncIterator]=function(){return this},s;function n(e){o[e]&&(s[e]=function(r){return new Promise((function(t,s){i.push([e,r,t,s])>1||a(e,r)}))})}function a(e,r){try{(t=o[e](r)).value instanceof k?Promise.resolve(t.value.v).then(l,d):c(i[0][2],t)}catch(e){c(i[0][3],e)}var t}function l(e){a("next",e)}function d(e){a("throw",e)}function c(e,r){e(r),i.shift(),i.length&&a(i[0][0],i[0][1])}}function O(e){var r,t;return r={},s("next"),s("throw",(function(e){throw e})),s("return"),r[Symbol.iterator]=function(){return this},r;function s(s,o){r[s]=e[s]?function(r){return(t=!t)?{value:k(e[s](r)),done:!1}:o?o(r):r}:o}}function y(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,t=e[Symbol.asyncIterator];return t?t.call(e):(e=P(e),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(t){r[t]=e[t]&&function(r){return new Promise((function(s,o){!function(e,r,t,s){Promise.resolve(s).then((function(r){e({value:r,done:t})}),r)}(s,o,(r=e[t](r)).done,r.value)}))}}}function W(e,r){return Object.defineProperty?Object.defineProperty(e,"raw",{value:r}):e.raw=r,e}var M=Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r};function R(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&T(r,e,t);return M(r,e),r}function _(e){return e&&e.__esModule?e:{default:e}}function N(e,r,t,s){if("a"===t&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof r?e!==r||!s:!r.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?s:"a"===t?s.call(e):s?s.value:r.get(e)}function x(e,r,t,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof r?e!==r||!o:!r.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(e,t):o?o.value=t:r.set(e,t),t}function F(e,r){if(null===r||"object"!=typeof r&&"function"!=typeof r)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?r===e:e.has(r)}function E(e,r,t){if(null!=r){if("object"!=typeof r&&"function"!=typeof r)throw new TypeError("Object expected.");var s;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=r[Symbol.asyncDispose]}if(void 0===s){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=r[Symbol.dispose]}if("function"!=typeof s)throw new TypeError("Object not disposable.");e.stack.push({value:r,dispose:s,async:t})}else t&&e.stack.push({async:!0});return r}var w="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var s=new Error(t);return s.name="SuppressedError",s.error=e,s.suppressed=r,s};function U(e){function r(r){e.error=e.hasError?new w(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}return function t(){for(;e.stack.length;){var s=e.stack.pop();try{var o=s.dispose&&s.dispose.call(s.value);if(s.async)return Promise.resolve(o).then(t,(function(e){return r(e),t()}))}catch(e){r(e)}}if(e.hasError)throw e.error}()}const L={__extends:o,__assign:i,__rest:n,__decorate:a,__param:l,__metadata:m,__awaiter:p,__generator:h,__createBinding:T,__exportStar:f,__values:P,__read:C,__spread:S,__spreadArrays:v,__spreadArray:I,__await:k,__asyncGenerator:b,__asyncDelegator:O,__asyncValues:y,__makeTemplateObject:W,__importStar:R,__importDefault:_,__classPrivateFieldGet:N,__classPrivateFieldSet:x,__classPrivateFieldIn:F,__addDisposableResource:E,__disposeResources:U}}},r={};function t(s){var o=r[s];if(void 0!==o)return o.exports;var i=r[s]={exports:{}};return e[s](i,i.exports,t),i.exports}t.d=function(e,r){for(var s in r)t.o(r,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};t.r(s),t.d(s,{getJSCPUProfilingPackageRetriever:function(){return Jt}});class o{start(){this.logger.logNullJSCPUProfilerStartCalled()}stop(){this.logger.logNullJSCPUProfilerStopCalled()}subscribeProfilerObserver(e,r){}unsubscribeProfilerObserver(e,r){}subscribeCallTreeCustomPropertiesRetriever(e){}unsubscribeCallTreeCustomPropertiesRetriever(e){}subscribeCallTreeCustomFilterer(e){}unsubscribeCallTreeCustomFilterer(e){}requestProfilerTraceProcessing(e){}constructor(e){this.logger=e}}class i{getCurrentTimestamp(){return performance.now()}}const n=-1;class a{start(){this.unsupportedEnvironment?this.logger.logStopWatchStartingInUnsupportedEnvironment():this.startTimestamp=this.performanceTimestampRetriever.getCurrentTimestamp()}stop(){this.unsupportedEnvironment?this.logger.logStopWatchStoppingInUnsupportedEnvironment():this.stopTimestamp=this.performanceTimestampRetriever.getCurrentTimestamp()}getElapsedTime(){if(this.startTimestamp===n)return this.logger.logGetElapsedTimeCalledWithoutCallingStart(),n;if(this.stopTimestamp===n)return this.logger.logGetElapsedTimeCalledWithoutCallingStop(),n;const e=this.stopTimestamp-this.startTimestamp;return this.resetTimestamps(),e}resetTimestamps(){this.startTimestamp=n,this.stopTimestamp=n}constructor(e,r,t){return this.performanceAPIChecker=e,this.performanceTimestampRetriever=r,this.logger=t,this.startTimestamp=n,this.stopTimestamp=n,this.performanceAPIChecker.isPerformanceAPIAvailable()?this.performanceAPIChecker.isPerformanceNowDefined()?void(this.unsupportedEnvironment=!1):(this.logger.logPerformanceNowMissingInJSEnvironment(),void(this.unsupportedEnvironment=!0)):(this.logger.logPerformanceMissingInJSEnvironment(),void(this.unsupportedEnvironment=!0))}}class l{sendTraceTag(){}shipAssertTag(){}debugAssertTag(){}setCorrelationId(){}}const d=new class{setCorrelationId(e){this.externalLogger.setCorrelationId(e)}setLogger(e){this.externalLogger=e}sendTraceTag(e,r,t,s){this.externalLogger.sendTraceTag(e,r,t,s)}debugAssertTag(e,r,t,s){this.externalLogger.debugAssertTag(e,r,t,s)}shipAssertTag(e,r,t,s){this.externalLogger.shipAssertTag(e,r,t,s)}constructor(){this.externalLogger=new l}};function c(e){if(!e)throw new Error("The 'logger' argument is missing");d.setLogger(e)}var u,g;!function(e){e[e.msoulscat_ES_EWAJS=0]="msoulscat_ES_EWAJS",e[e.msoulscat_ES_EWAJSGrid=1]="msoulscat_ES_EWAJSGrid",e[e.msoulscat_ES_EWAJSChart=6]="msoulscat_ES_EWAJSChart",e[e.msoulscat_MSOSP_FileMenuCommands=202]="msoulscat_MSOSP_FileMenuCommands",e[e.msoulscat_MSOSP_AddInCommands=220]="msoulscat_MSOSP_AddInCommands",e[e.msoulscat_MSOSP_OTelJS=225]="msoulscat_MSOSP_OTelJS",e[e.msoulscat_MSOSP_OTelJSInWebWoker=227]="msoulscat_MSOSP_OTelJSInWebWoker",e[e.msoulscat_MSOSP_OTelJSWebWorkerPrototype=228]="msoulscat_MSOSP_OTelJSWebWorkerPrototype",e[e.msoulscat_Wac_WordViewer=301]="msoulscat_Wac_WordViewer",e[e.msoulscat_Wac_BrowserGeneral=306]="msoulscat_Wac_BrowserGeneral",e[e.msoulscat_Wac_TaskPane=320]="msoulscat_Wac_TaskPane",e[e.msoulscat_Wac_OneNoteGeneral=339]="msoulscat_Wac_OneNoteGeneral",e[e.msoulscat_Wac_Ribbon=340]="msoulscat_Wac_Ribbon",e[e.msoulscat_Wac_WacFeedback=356]="msoulscat_Wac_WacFeedback",e[e.msoulscat_Wac_WopiPendingApplication=379]="msoulscat_Wac_WopiPendingApplication",e[e.msoulscat_Wac_Telemetry=383]="msoulscat_Wac_Telemetry",e[e.msoulscat_Wac_WacCatchUpActivities=391]="msoulscat_Wac_WacCatchUpActivities",e[e.msoulscat_Wac_Dictation=394]="msoulscat_Wac_Dictation",e[e.msoulscat_Wac_OneNoteSync=395]="msoulscat_Wac_OneNoteSync",e[e.msoulscat_Wac_VisioApp=700]="msoulscat_Wac_VisioApp",e[e.msoulscat_OneNoteOnline_EditableCache=1601]="msoulscat_OneNoteOnline_EditableCache",e[e.msoulscat_Wac_PptAnimation=800]="msoulscat_Wac_PptAnimation",e[e.msoulscat_Wac_PptLive=833]="msoulscat_Wac_PptLive",e[e.msoulscat_Wac_PptMWeb=834]="msoulscat_Wac_PptMWeb",e[e.msoulscat_Wac_PptGc2General=835]="msoulscat_Wac_PptGc2General",e[e.msoulscat_Wac_PptGc2GraphicHost=836]="msoulscat_Wac_PptGc2GraphicHost",e[e.msoulscat_Wac_PptGc2Operation=837]="msoulscat_Wac_PptGc2Operation",e[e.msoulscat_Wac_PptGc2EditCanvas=852]="msoulscat_Wac_PptGc2EditCanvas",e[e.msoulscat_Wac_PptDataSync=844]="msoulscat_Wac_PptDataSync",e[e.msoulscat_Wac_PptFluidRuntime=848]="msoulscat_Wac_PptFluidRuntime",e[e.msoulscat_Wac_PptShape=815]="msoulscat_Wac_PptShape",e[e.msoulscat_Wac_PptSession=817]="msoulscat_Wac_PptSession",e[e.msoulscat_Wac_PptSlideshow=830]="msoulscat_Wac_PptSlideshow",e[e.msoulscat_Wac_PptView=822]="msoulscat_Wac_PptView",e[e.msoulscat_Wac_PptVideos=846]="msoulscat_Wac_PptVideos",e[e.msoulscat_Uci_Insights=1303]="msoulscat_Uci_Insights",e[e.msoulscat_Wac_VersionHistory=2300]="msoulscat_Wac_VersionHistory",e[e.msoulscat_Wac_WordPresence=302]="msoulscat_Wac_WordPresence",e[e.msoulscat_Wac_OAuth=3e3]="msoulscat_Wac_OAuth",e[e.msoulscat_Wac_WordVersionHistory=3005]="msoulscat_Wac_WordVersionHistory",e[e.msoulscat_Wac_LivePersonaCard=3006]="msoulscat_Wac_LivePersonaCard",e[e.msoulscat_Wac_CatchUpFlyout=3012]="msoulscat_Wac_CatchUpFlyout",e[e.msoulscat_Wac_WordDesigner=3016]="msoulscat_Wac_WordDesigner",e[e.msoulscat_Wac_ModernFontPicker=3021]="msoulscat_Wac_ModernFontPicker",e[e.msoulscat_Wac_UnifiedUiHost=3027]="msoulscat_Wac_UnifiedUiHost",e[e.msoulscat_Wac_EquationTools=3033]="msoulscat_Wac_EquationTools",e[e.msoulscat_Osf_Latency=1401]="msoulscat_Osf_Latency",e[e.msoulscat_Osf_Notification=1402]="msoulscat_Osf_Notification",e[e.msoulscat_Osf_Runtime=1403]="msoulscat_Osf_Runtime",e[e.msoulscat_Wac_AiMaker=3041]="msoulscat_Wac_AiMaker",e[e.msoulscat_Wac_AiRewrite=3043]="msoulscat_Wac_AiRewrite",e[e.msoulscat_Wac_AiInsert=3044]="msoulscat_Wac_AiInsert",e[e.msoulscat_Wac_AiSummarize=3047]="msoulscat_Wac_AiSummarize",e[e.msoulscat_Wac_CopilotCompose=3048]="msoulscat_Wac_CopilotCompose",e[e.msoulscat_Wac_Skittles=3049]="msoulscat_Wac_Skittles",e[e.msoulscat_Wac_CopilotChat=3050]="msoulscat_Wac_CopilotChat",e[e.msoulscat_Wac_Syntex=3051]="msoulscat_Wac_Syntex",e[e.msoulscat_Wac_WireGraph=3052]="msoulscat_Wac_WireGraph",e[e.msoulscat_Wac_CshCopilot=3053]="msoulscat_Wac_CshCopilot",e[e.msoulscat_Wac_CopilotProactiveSummary=3055]="msoulscat_Wac_CopilotProactiveSummary",e[e.msoulscat_Wac_CopilotProactiveShared=3056]="msoulscat_Wac_CopilotProactiveShared",e[e.msoulscat_Wac_CopilotCursor=3057]="msoulscat_Wac_CopilotCursor",e[e.msoulscat_Wac_WasmGeneral=3059]="msoulscat_Wac_WasmGeneral",e[e.msoulscat_Wac_WasmTextLayout=3060]="msoulscat_Wac_WasmTextLayout",e[e.msoulscat_Wac_WasmSmartArt=3061]="msoulscat_Wac_WasmSmartArt",e[e.msoulscat_Wac_WasmClient=3062]="msoulscat_Wac_WasmClient",e[e.msoulscat_Wac_WasmNative=3063]="msoulscat_Wac_WasmNative",e[e.msoulscat_Wac_UniversalPrint=3068]="msoulscat_Wac_UniversalPrint",e[e.msoulscat_AIHub_CreateModuleTelemetry=4e3]="msoulscat_AIHub_CreateModuleTelemetry",e[e.msoulscat_AIHub_CreateModuleAugloop=4001]="msoulscat_AIHub_CreateModuleAugloop",e[e.msoulscat_AIHub_CreateModuleDAS=4002]="msoulscat_AIHub_CreateModuleDAS",e[e.msoulscat_AIHub_CreateModuleConfig=4003]="msoulscat_AIHub_CreateModuleConfig",e[e.msoulscat_AIHub_CreateModuleContext=4004]="msoulscat_AIHub_CreateModuleContext",e[e.msoulscat_AIHub_CreateModuleGraph=4005]="msoulscat_AIHub_CreateModuleGraph",e[e.msoulscat_AIHub_CreateModuleExperiences=4006]="msoulscat_AIHub_CreateModuleExperiences",e[e.msoulscat_AIHub_CreateModuleHttp=4007]="msoulscat_AIHub_CreateModuleHttp",e[e.msoulscat_AIHub_CreateModuleRouting=4008]="msoulscat_AIHub_CreateModuleRouting",e[e.msoulscat_AIHub_CreateModuleStorage=4009]="msoulscat_AIHub_CreateModuleStorage",e[e.msoulscat_AIHub_CreateModuleStore=4010]="msoulscat_AIHub_CreateModuleStore",e[e.msoulscat_AIHub_CreateModuleUI=4011]="msoulscat_AIHub_CreateModuleUI",e[e.msoulscat_AIHub_CreateModuleSharePoint=4012]="msoulscat_AIHub_CreateModuleSharePoint",e[e.msoulscat_AIHub_CreateModuleUI_Artifacts=4100]="msoulscat_AIHub_CreateModuleUI_Artifacts",e[e.msoulscat_AIHub_CreateModuleUI_BrandKit=4101]="msoulscat_AIHub_CreateModuleUI_BrandKit",e[e.msoulscat_AIHub_CreateModuleUI_Forms=4102]="msoulscat_AIHub_CreateModuleUI_Forms",e[e.msoulscat_AIHub_CreateModuleUI_Homepage=4103]="msoulscat_AIHub_CreateModuleUI_Homepage",e[e.msoulscat_AIHub_CreateModuleUI_Text=4104]="msoulscat_AIHub_CreateModuleUI_Text",e[e.msoulscat_AIHub_CreateModuleUI_Video=4105]="msoulscat_AIHub_CreateModuleUI_Video"}(u||(u={})),function(e){e[e.Error=10]="Error",e[e.Warning=15]="Warning",e[e.Important=20]="Important",e[e.Info=50]="Info",e[e.Verbose=100]="Verbose",e[e.Spam=200]="Spam"}(g||(g={}));class m{logPerformanceMissingInJSEnvironment(){d.sendTraceTag(579110677,u.msoulscat_Wac_Telemetry,g.Error,"Unable to find performance in the JS environment")}logPerformanceNowMissingInJSEnvironment(){d.sendTraceTag(579110678,u.msoulscat_Wac_Telemetry,g.Error,"Unable to find performance.now in the JS environment")}logStopWatchStartingInUnsupportedEnvironment(){d.sendTraceTag(579110679,u.msoulscat_Wac_Telemetry,g.Error,"Starting the stopwatch in an unsupported environment. Incorrect data will be stored")}logStopWatchStoppingInUnsupportedEnvironment(){d.sendTraceTag(579110680,u.msoulscat_Wac_Telemetry,g.Error,"Stopping the stopwatch in an unsupported environment. Incorrect data will be stored")}logGetElapsedTimeCalledWithoutCallingStart(){d.sendTraceTag(579110683,u.msoulscat_Wac_Telemetry,g.Error,"Stopwatch needs to be started before you can get elapsed time")}logGetElapsedTimeCalledWithoutCallingStop(){d.sendTraceTag(579110684,u.msoulscat_Wac_Telemetry,g.Error,"Stopwatch needs to be stopped before you can get elapsed time")}}class p{isPerformanceAPIAvailable(){return null!=performance}isPerformanceNowDefined(){return"now"in performance}}class h{static createNewStopWatch(){const e=new m,r=new p,t=new i;return new a(r,t,e)}}class T{serializeException(e){this.wasSerializeExceptionCalled=!0,null!=JSON&&"stringify"in JSON?this.serializedException=null!=Object&&"getOwnPropertyNames"in Object?JSON.stringify(e,Object.getOwnPropertyNames(e)):"":this.serializedException=""}retrieveSerializedException(){return this.wasSerializeExceptionCalled?(this.wasSerializeExceptionCalled=!1,this.serializedException):""}constructor(){this.serializedException="",this.wasSerializeExceptionCalled=!1}}class f{logOperation(e,r,t,s,o,i,n,a){}logFallbackResultReturned(){}}const P=new class{push(e){this.elements.unshift(e)}pop(){return this.elements.shift()}peek(){return this.elements.length>0?this.elements[0]:void 0}constructor(){this.elements=[]}};class C{addLog(e){this.logs.push(e)}addProperty(e,r){this.propertyBag.set(e,r)}getResult(){return this.operationResult.result}static startNew(e,r,t,s,o,i){return new C(e,r,t,null!=o&&o,null==i?new T:i,null==s?new f:s)}constructor(e,r,t,s,o,i){const n=P.peek(),a=void 0!==n?n:"";P.push(e),this.logs=[],this.propertyBag=new Map;const l=h.createNewStopWatch();let d;l.start();let c=!1;try{d=r(this),c=d.didOperationFailUnexpectedly}catch(e){o.serializeException(e),this.exception=o.retrieveSerializedException(),c=!0}this.operationResult=void 0!==d?d:t,l.stop(),!c&&s||i.logOperation(e,a,this.operationResult.didOperationSucceed,l.getElapsedTime(),c,this.logs,this.propertyBag,this.exception),P.pop()}}class S{static generateOperationResult(e){return new S(e.didOperationSucceed,null!=e.didOperationFailUnexpectedly&&e.didOperationFailUnexpectedly,e.result)}constructor(e,r,t){this.didOperationSucceed=e,this.didOperationFailUnexpectedly=r,this.result=t}}class v{hasProperty(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew("CheckWindowProperty",(r=>{if(null==window)return this.logger.logWindowMissingInJSEnvironment(),S.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});r.addProperty("PropertyNameChecked",e);const t=e in window;return r.addProperty("DoesPropertyExistOnWindow",t),S.generateOperationResult({didOperationSucceed:!0,result:t})}),r).getResult()}constructor(e){this.logger=e}}class I{logWindowMissingInJSEnvironment(){d.sendTraceTag(578834847,u.msoulscat_Wac_Telemetry,g.Warning,"Unable to find window in the JS environment")}logEmptyUserAgentString(){d.sendTraceTag(578834850,u.msoulscat_Wac_Telemetry,g.Error,"Empty user agent string")}logChromiumOnIOS(){d.sendTraceTag(578834851,u.msoulscat_Wac_Telemetry,g.Info,"iOS version of Chromium based browser detected")}logBrowserUserAgentNotChromiumBased(){d.sendTraceTag(578834880,u.msoulscat_Wac_Telemetry,g.Info,"Browser not chromium based")}logUserAgentSpoofedToBeChromium(){d.sendTraceTag(578834881,u.msoulscat_Wac_Telemetry,g.Info,"Browser user agent spoofed to be chromium based")}logUserAgentToParseChromiumMajorVersionNumber(e){d.sendTraceTag(578834882,u.msoulscat_Wac_Telemetry,g.Info,e)}logChromeNotPresentInUserAgent(){d.sendTraceTag(578834883,u.msoulscat_Wac_Telemetry,g.Error,"Chrome was not found in the user agent")}logUnableToIsolateChromeInformationFromUserAgent(){d.sendTraceTag(578834884,u.msoulscat_Wac_Telemetry,g.Error,"Unable to isolate chrome information from the user agent")}logUnableToExtractChromeVersionInformation(){d.sendTraceTag(578834885,u.msoulscat_Wac_Telemetry,g.Error,"Unable to extract chrome version information from the user agent")}logUnableToParseChromeMajorVersionString(){d.sendTraceTag(578834886,u.msoulscat_Wac_Telemetry,g.Error,"Unable to parse the chromium major version number")}logRequestIdleCallbackMissing(){d.sendTraceTag(576582740,u.msoulscat_Wac_Telemetry,g.Warning,"Unable to find window.requestIdleCallback in the JS environment")}logCallbackBeingInvokedImmediately(){d.sendTraceTag(576582743,u.msoulscat_Wac_Telemetry,g.Error,"Callback is being invoked immediately as there is no platform support for deferring work")}logCancelIdleCallbackMissing(){d.sendTraceTag(576582744,u.msoulscat_Wac_Telemetry,g.Warning,"Unable to find window.cancelIdleCallback in the JS environment")}logUnknownMechanism(){d.sendTraceTag(576582747,u.msoulscat_Wac_Telemetry,g.Error,"Unable to find a way to cancel the idle time job")}logWindowSetTimeOutMissingInJSEnvironment(){d.sendTraceTag(576239755,u.msoulscat_Wac_Telemetry,g.Error,"window.setTimeout is missing in JS environment")}logWindowPerformanceMissingInJSEnvironment(){d.sendTraceTag(576218121,u.msoulscat_Wac_Telemetry,g.Error,"Unable to find window.performance in the JS environment")}logWindowPerformanceNowMissingInJSEnvironment(){d.sendTraceTag(576218122,u.msoulscat_Wac_Telemetry,g.Error,"Unable to find window.performance.now in the JS environment")}logNavigatorMissingInJSEnvironment(){d.sendTraceTag(574657350,u.msoulscat_Wac_Telemetry,g.Error,"Navigator is missing in the JS environment")}logSendBeaconNotSupported(){d.sendTraceTag(573970625,u.msoulscat_Wac_Telemetry,g.Info,"SendBeacon not supported in current environment")}logBeaconURLIsEmpty(){d.sendTraceTag(573919702,u.msoulscat_Wac_Telemetry,g.Error,"We were passed an empty URL for sendBeacon")}logBeaconDataIsEmpty(){d.sendTraceTag(573907718,u.msoulscat_Wac_Telemetry,g.Error,"We were passed an empty data for sendBeacon")}logDocumentMissingInJsEnvironment(){d.sendTraceTag(573572181,u.msoulscat_Wac_Telemetry,g.Error,"Document is not present in JS Environment")}logDocumentVisibilityStateMissingInJsEnvironment(){d.sendTraceTag(573572182,u.msoulscat_Wac_Telemetry,g.Error,"Document VisibilityState is not present in JS Environment")}logDocumentAddEventListenerMissingInJsEnvironment(){d.sendTraceTag(573572183,u.msoulscat_Wac_Telemetry,g.Error,"Document AddEventListener is not present in JS Environment")}logWindowAddEventListenerNotFound(){d.sendTraceTag(538710337,u.msoulscat_Wac_Telemetry,g.Error,"Window AddEventListener is not present in JS Environment")}logPerformanceEventCountsNotSupported(){d.sendTraceTag(537522270,u.msoulscat_Wac_Telemetry,g.Warning,"Performance.EventCounts is not present in JS Environment")}logRemoveQueryParamsNotCalled(){d.sendTraceTag(527439250,u.msoulscat_Wac_Telemetry,g.Error,"Remove query params was not called before retrieve")}logWindowPerformanceEventCountsMissingInJSEnvironment(){d.sendTraceTag(525099864,u.msoulscat_Wac_Telemetry,g.Info,"window.performance.eventcounts was not present in the JS environment")}}class k{removeQueryParams(e){this.wasRemoveQueryParamsCalled=!0,this.queryParamsRemovedURL=e.split("?")[0]}retrieveQueryParamsRemovedURL(){return this.wasRemoveQueryParamsCalled?(this.wasRemoveQueryParamsCalled=!1,this.queryParamsRemovedURL):(this.logger.logRemoveQueryParamsNotCalled(),"")}constructor(e){this.logger=e,this.wasRemoveQueryParamsCalled=!1,this.queryParamsRemovedURL=""}}class b{getURLQueryParamsRemover(){return new k(new I)}}class O{open(e,r,t){this.xmlHTTPRequest.open(e,r,t)}send(e){this.xmlHTTPRequest.send(e)}constructor(){this.xmlHTTPRequest=new XMLHttpRequest}}class y{generateXMLHTTPRequestWrapper(){return new O}}const W="InvalidUnderlyingMechanism",M="requestIdleCallback",R="hidden";class _{isBrowserChromiumBased(e){return function(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew("CheckChromiumBrowser",(t=>{if(t.addProperty("UserAgent",e),0===e.localeCompare(""))return r.logEmptyUserAgentString(),S.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});const s=e.match(/(Chrome\/|CriOS\/)/g);return null!=e.match(/(CriOS\/)/g)&&r.logChromiumOnIOS(),null===s?(r.logBrowserUserAgentNotChromiumBased(),S.generateOperationResult({didOperationSucceed:!0,result:!1})):S.generateOperationResult({didOperationSucceed:!0,result:!0})}),t).getResult()}(e,this.logger)}parseChromeMajorVersionNumber(e){return function(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:-1});return C.startNew("ParseChromiumMajorVersionNumber",(t=>{t.addProperty("UserAgent",e);const s=e.match(/((Chrome\/|CriOS\/)(\d|\.)+)/g);if(null==s)return r.logChromeNotPresentInUserAgent(),S.generateOperationResult({didOperationSucceed:!1,result:-1});const o=s[0].split("/");if(o.length<2)return r.logUnableToIsolateChromeInformationFromUserAgent(),S.generateOperationResult({didOperationSucceed:!1,result:-1});const i=o[1].split(".");if(i.length<4)return r.logUnableToExtractChromeVersionInformation(),S.generateOperationResult({didOperationSucceed:!1,result:-1});const n=i[0],a=parseInt(n,10);return isNaN(a)?(r.logUnableToParseChromeMajorVersionString(),S.generateOperationResult({didOperationSucceed:!1,result:-1})):(t.addProperty("MajorVersionNumber",a),S.generateOperationResult({didOperationSucceed:!0,result:a}))}),t).getResult()}(e,this.logger)}constructor(e){this.logger=e}}class N{static getBrowserUtils(){const e=new I;return new _(e)}}class x{scheduleJobForIdleTime(e){!function(e,r,t,s){const o=S.generateOperationResult({didOperationSucceed:!1,result:{id:-1,underlyingMechanism:W}});C.startNew("RequestIdleCallbackShim",(()=>{if(r.hasProperty(M)){const r=window.requestIdleCallback(e,undefined);return S.generateOperationResult({didOperationSucceed:!0,result:{id:r,underlyingMechanism:M}})}t.logRequestIdleCallbackMissing();Date.now();return t.logCallbackBeingInvokedImmediately(),e(),S.generateOperationResult({didOperationSucceed:!0,result:{id:-1,underlyingMechanism:W}})}),o).getResult()}((()=>{e()}),this.windowPropertyChecker,this.logger)}constructor(e,r){this.windowPropertyChecker=e,this.logger=r}}class F{static getIdleTimeJobScheduler(){const e=new I,r=new v(e);return new x(r,e)}}class E{setTimerJob(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("SetTimerJob",(()=>null==window?(this.logger.logWindowMissingInJSEnvironment(),S.generateOperationResult({didOperationSucceed:!1,result:void 0,didOperationFailUnexpectedly:!0})):null==window.setTimeout?(this.logger.logWindowSetTimeOutMissingInJSEnvironment(),S.generateOperationResult({didOperationSucceed:!1,result:void 0,didOperationFailUnexpectedly:!0})):(window.setTimeout(e,r),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),t)}constructor(e){this.logger=e}}class w{static getTimerJobScheduler(){const e=new I;return new E(e)}}class U{isDocumentVisibleNow(){const e=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew("CheckDocumentVisibility",(()=>{if(!this.isDocumentPresentInJsEnvironment())return this.logger.logDocumentMissingInJsEnvironment(),S.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});if(!this.isDocumentVisibilityStatePresentInJsEnvironment())return this.logger.logDocumentVisibilityStateMissingInJsEnvironment(),S.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});const e=document.visibilityState!==R;return S.generateOperationResult({didOperationSucceed:!0,result:e})}),e).getResult()}wasDocumentHiddenDuringTimeRange(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew("WasDocumentHiddenDuringTimeRange",(()=>{if(this.isDocumentHidden)return S.generateOperationResult({didOperationSucceed:!0,result:!0});if(void 0===this.lastUnHiddenDate)return S.generateOperationResult({didOperationSucceed:!0,result:!1});const r=Date.now()-this.lastUnHiddenDate<e;return S.generateOperationResult({didOperationSucceed:!0,result:r})}),r).getResult()}isDocumentPresentInJsEnvironment(){return null!=document}isDocumentVisibilityStatePresentInJsEnvironment(){return"visibilityState"in document}isDocumentAddEventListenerPresentInJsEnvironment(){return"addEventListener"in document}updateIsHidden(){this.isDocumentHidden=document.visibilityState===R,this.isDocumentHidden||(this.lastUnHiddenDate=Date.now())}constructor(e){this.logger=e,this.onVisibilityChange=()=>{this.updateIsHidden()},this.isDocumentPresentInJsEnvironment()||this.logger.logDocumentMissingInJsEnvironment(),this.isDocumentVisibilityStatePresentInJsEnvironment()||this.logger.logDocumentVisibilityStateMissingInJsEnvironment(),this.isDocumentAddEventListenerPresentInJsEnvironment()||this.logger.logDocumentAddEventListenerMissingInJsEnvironment(),this.lastUnHiddenDate=void 0,this.isDocumentHidden=!1,this.updateIsHidden(),document.addEventListener("visibilitychange",this.onVisibilityChange)}}class L{static getDocumentVisibilityChecker(){const e=new I;return new U(e)}}var B;!function(e){e.SendBeacon="sendBeacon"}(B||(B={}));class A{sendBeacon(e){return function(e,r,t,s,o,i){const n=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew("SendBeaconCall",(n=>{if(0===o.length)return s.logBeaconURLIsEmpty(),S.generateOperationResult({didOperationSucceed:!1,result:!1});if(0===i.length)return s.logBeaconDataIsEmpty(),S.generateOperationResult({didOperationSucceed:!1,result:!1});if(!e.hasProperty(B.SendBeacon)){s.logSendBeaconNotSupported();const e="POST",r=t.generateXMLHTTPRequestWrapper();return r.open(e,o,!0),r.send(i),n.addProperty("POSTRequestSent",!0),S.generateOperationResult({didOperationSucceed:!0,result:!0})}const a=r.sendBeacon(o,i);return n.addProperty("BeaconRequestSuccessfullyQueued",a),S.generateOperationResult({didOperationSucceed:!0,result:a})}),n).getResult()}(this.navigatorPropertyChecker,this.navigatorAPI,this.xmlHTTPRequestWrapperFactory,this.logger,e.url,e.data)}constructor(e,r,t,s){this.navigatorPropertyChecker=e,this.navigatorAPI=r,this.xmlHTTPRequestWrapperFactory=t,this.logger=s}}class z{hasProperty(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew("CheckNavigatorProperty",(r=>{if(null==navigator)return this.logger.logNavigatorMissingInJSEnvironment(),S.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});r.addProperty("NavigatorPropertyChecked",e);const t=e in navigator;return r.addProperty("IsPropertyPresentInNavigatorResult",t),S.generateOperationResult({didOperationSucceed:!0,result:t})}),r).getResult()}constructor(e){this.logger=e}}class ${sendBeacon(e,r){return null==navigator?(this.logger.logNavigatorMissingInJSEnvironment(),!1):navigator.sendBeacon(e,r)}constructor(e){this.logger=e}}class q{static getSendBeaconScheduler(){const e=new I,r=new z(e),t=new $(e),s=new y;return new A(r,t,s,e)}}class D{getCurrentTimestamp(){if(null!=window)if(null!=window.performance){if(null!=window.performance.now)return window.performance.now();this.logger.logWindowPerformanceNowMissingInJSEnvironment()}else this.logger.logWindowPerformanceMissingInJSEnvironment();else this.logger.logWindowMissingInJSEnvironment()}constructor(e){this.logger=e}}class J{static getTimestampRetriever(){const e=new I;return new D(e)}}class V{peek(){return this.elements.size>0?this.elements.get(this.dequeueIndex):void 0}queue(e){this.elements.set(this.queueIndex,e),this.queueIndex+=1}dequeue(){0!==this.elements.size&&(this.elements.delete(this.dequeueIndex),this.dequeueIndex+=1)}length(){return this.elements.size}constructor(){this.elements=new Map,this.queueIndex=0,this.dequeueIndex=0}}class G{static createQueue(){return new V}}class j{retrieveUserAgent(){const e=S.generateOperationResult({didOperationSucceed:!1,result:""});return C.startNew("RetrieveUserAgent",(()=>{const e=this.getUserAgentFromNavigatorAPI();return S.generateOperationResult({didOperationSucceed:!0,result:e})}),e).getResult()}getUserAgentFromNavigatorAPI(){return"undefined"==typeof navigator?(this.logger.logNavigatorMissingInJSEnvironment(),""):navigator.userAgent}constructor(e){this.logger=e,this.logger=e}}class H{static getUserAgentRetriever(){return new j(new I)}}class Q{peek(){const e=this.count();if(0!==e)return this.elements[e-1]}push(e){this.elements.push(e)}pop(){this.elements.pop()}count(){return this.elements.length}constructor(){this.elements=[]}}class K{static createStack(){return new Q}}class Z{static getWindowPropertyChecker(){const e=new I;return new v(e)}}class X{generateGuid(){return""}}class Y{static getGuidGenerator(){return new X}}function ee(){const e=new I;if(!window)return void e.logWindowMissingInJSEnvironment();if(!window.performance)return void e.logWindowPerformanceMissingInJSEnvironment();const r=window.performance.eventCounts;if(!r)return void e.logPerformanceEventCountsNotSupported();let t=0;return r.forEach((e=>t+=e)),t}const re="JSSelfProfilingAPI-Profile",te="StartManualProfiler",se="StopManualProfiler",oe="StartTimedProfiler",ie="StopTimedProfiler",ne="StartManualProfilerInternal",ae="StopManualProfilerInternal",le="StartContinuousProfiler",de="StopContinuousProfiler",ce="TransformProfilerTrace",ue="BuildStack",ge="StartFullSessionProfiler",me="StopFullSessionProfiler",pe="SendCallTrees",he="SerializeCallTreesArray",Te="OnMessageReceivedFromWorker",fe="useWebWorkForProfilerTraceProcessing",Pe=[re,ce,pe,he,Te,fe,"ProfilerWorkerOnMessage",ae,ge,te,oe,le,de,me,se,ie,ne];var Ce,Se,ve;!function(e){e[e.Manual=0]="Manual",e[e.Timed=1]="Timed",e[e.Continuous=2]="Continuous",e[e.FullSession=3]="FullSession"}(Ce||(Ce={})),function(e){e[e.ProfilerStopped=0]="ProfilerStopped",e[e.PreProfilerStart=1]="PreProfilerStart"}(Se||(Se={}));class Ie{getCustomProperties(){return this.customProperties}getResources(){return this.profilerTrace.resources}getFrames(){return this.profilerTrace.frames}getStacks(){return this.profilerTrace.stacks}getSamples(){return this.profilerTrace.samples}getSamplesTrimmed(){return this.getSamples().reduce(((e,r)=>{const t=e.length>0&&void 0!==e[e.length-1].stackId;return(void 0!==r.stackId||t)&&e.push(r),e}),[])}getProfilerTraceStartTimestamp(){return this.profilerTraceStartTimestamp}getProfilerProperties(){return this.profilerProperties}getElapsedProfilingTimeInMs(){return this.elapsedProfilingTime}constructor(e,r,t,s,o){this.customProperties=e,this.profilerTrace=r,this.profilerTraceStartTimestamp=t,this.profilerProperties=s,this.elapsedProfilingTime=o}}!function(e){e.Chrome="chrome"}(ve||(ve={}));const ke={samplingIntervalInMs:-1},be={name:"InvalidFrameName",resourceId:-1,line:-1,column:-1},Oe={name:"EndOfSiblingChainFrame",resourceId:-1,line:-1,column:-1},ye="InvalidResourceName",We=!1,Me=!1,Re=!1,_e={obfuscatedName:"InvalidObfuscatedName",startTimeInMs:-1,frameOnlyRunTimeInMs:-1,subTreeRunTimeInMs:-1,totalExecutionTimeInMs:-1,hasChildrenNodes:!1,resourceInfo:{resourceName:ye,lineNo:-1,columnNo:-1}},Ne=!1,xe=!1,Fe=!1,Ee=!1,we="00000000-0000-0000-0000-000000000000",Ue=!1,Le=!0,Be=!1,Ae=!1,ze=!1,$e=!0,qe=!0,De="INVALID_BLOB_SCRIPT_URL";function Je(e,r,t){const s=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("SendProfilerEventToProfilerObservers",(o=>(o.addProperty("ProfilerEventIdToSendToObservers",r.eventId),e.forEach(((e,o)=>{-1!==e.indexOf(r.eventId)&&C.startNew("InvokeOnProfilerEventOnProfilerObserver",(()=>(o.onProfilerEvent(r),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),s,t)})),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),s,t)}class Ve{constructor(e,r){this.subscriber=e,this.subscriptionList=r,this.subscriberString="callTreeCustomFilterer"}}class Ge{constructor(e,r){this.subscriber=e,this.subscriptionList=r,this.subscriberString="customPropertiesRetriever"}}class je{start(){const e=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew(te,(()=>{const e=this.startProfilerImplementation();return S.generateOperationResult({didOperationSucceed:e,result:void 0})}),e,this.logger)}startProfilerImplementation(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew(ne,(r=>void 0!==this.profiler?(this.logger.logProfilerAlreadyStarted(),S.generateOperationResult({didOperationSucceed:!1,result:!1})):this.preProfilerStartChecker.shouldProfilingStart()?null==this.profilerInitOptions.maximumNumberOfSamplesToTake?(this.logger.logMaxBufferSizeNotFixed(),S.generateOperationResult({didOperationSucceed:!1,result:!1})):(r.addProperty("SamplingInterval",this.profilerInitOptions.samplingIntervalInMs),r.addProperty("MaxBufferSize",this.profilerInitOptions.maximumNumberOfSamplesToTake),Je(this.profilerObserversToProfilerEventIds,{eventId:Se.PreProfilerStart,eventData:void 0},this.logger),this.profiler=this.jsSelfProfilingAPI.createProfiler({sampleInterval:this.profilerInitOptions.samplingIntervalInMs,maxBufferSize:this.profilerInitOptions.maximumNumberOfSamplesToTake}),null==this.profiler?(this.logger.logBailingOutOnNullProfiler(),S.generateOperationResult({didOperationSucceed:!1,result:!1})):(this.preProfilerStartChecker.getShouldProcessProfileCapturedWhileUserIsIdle()||(this.documentEventsCountBeforeProfiling=ee()),this.profilerStartTimestamp=this.timestampRetriever.getCurrentTimestamp(),null!=e&&e(!0),S.generateOperationResult({didOperationSucceed:!0,result:!0}))):(this.logger.logPreProfilerStartCheckFailed(),this.didPreProfilerStartChecksFail=!0,e&&e(!1),S.generateOperationResult({didOperationSucceed:!0,result:!0}))),r,this.logger).getResult()}stop(){const e=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew(se,(()=>{const e=this.stopProfilerImplementation();return S.generateOperationResult({didOperationSucceed:e,result:void 0})}),e,this.logger)}stopProfilerImplementation(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew(ae,(r=>{if(null==this.profiler){const e=!!this.didPreProfilerStartChecksFail;return this.didPreProfilerStartChecksFail=!1,this.logger.logProfilerInstanceIsUndefined(),S.generateOperationResult({didOperationSucceed:e,result:!1})}return this.profiler.stop().then((t=>{this.profilerStopTimestamp=this.timestampRetriever.getCurrentTimestamp(),this.profilerTrace=t;const s=this.customPropertiesExtractor.extractCustomProperties(this.customPropertiesRetriever);let o=-1;void 0!==this.profilerStartTimestamp&&void 0!==this.profilerStopTimestamp&&(o=this.profilerStopTimestamp-this.profilerStartTimestamp),r.addProperty("ElapsedProfilingTime",o);const i={profilerTrace:new Ie(s,this.profilerTrace,void 0!==this.profilerStartTimestamp?this.profilerStartTimestamp:-1,this.profilerInitOptions,o),callTreeCustomPropertiesRetrievers:this.callTreeCustomPropertiesRetrievers,documentEventsCountBeforeProfiling:this.documentEventsCountBeforeProfiling,callTreeCustomFilterers:this.callTreeCustomFilterers,traceRequestingEvents:this.traceRequestingEvents};this.profilerStartTimestamp=void 0,this.profilerStopTimestamp=void 0;const n={eventId:Se.ProfilerStopped,eventData:i};Je(this.profilerObserversToProfilerEventIds,n,this.logger),this.profiler=void 0,this.documentEventsCountBeforeProfiling=void 0,this.traceRequestingEvents=[],null!=e&&e()}),(e=>{this.logger.logProfilerStopPromiseRejected(e),this.profiler=void 0,this.profilerTrace=void 0})),S.generateOperationResult({didOperationSucceed:!0,result:!0})}),r,this.logger).getResult()}requestProfilerTraceProcessing(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("RequestProfilerTraceProcessing",(()=>null==e?r:(this.traceRequestingEvents.push(e),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r,this.logger)}subscribeProfilerObserver(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("SubscribeProfilerObserver",(t=>{if(null==e)return this.logger.logNullOrUndefinedProfilerObserverPassedInForSubscribe(),S.generateOperationResult({didOperationSucceed:!1,result:void 0});if(null==r)return this.logger.logNullOrUndefinedProfilerEventIds(),S.generateOperationResult({didOperationSucceed:!1,result:void 0});if(t.addProperty("ProfilerEventIds",Array.from(r)),this.profilerObserversToProfilerEventIds.has(e)){const t=this.profilerObserversToProfilerEventIds.get(e);null==t?this.logger.logUnexpectedUndefinedProfilerEventIds():(r.forEach((e=>{t.push(e)})),this.profilerObserversToProfilerEventIds.set(e,Array.from(new Set(t))))}else this.profilerObserversToProfilerEventIds.set(e,Array.from(r));return S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),t,this.logger)}unsubscribeProfilerObserver(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("UnsubscribeProfilerObserver",(t=>{if(null==e)return this.logger.logNullOrUndefinedProfilerObserverPassedInForUnsubscribe(),S.generateOperationResult({didOperationSucceed:!1,result:void 0});if(null==r)return this.logger.logNullOrUndefinedProfilerEventToUnsubscribe(),S.generateOperationResult({didOperationSucceed:!1,result:void 0});if(t.addProperty("ProfilerEventToUnsubscribe",r),!this.profilerObserversToProfilerEventIds.has(e))return this.logger.logProfilerObserverWasNeverSubscribed(),S.generateOperationResult({didOperationSucceed:!1,result:void 0});const s=this.profilerObserversToProfilerEventIds.get(e);return null==s?(this.logger.logUnexpectedNullOrUndefinedSubscribedProfilerEventIds(),S.generateOperationResult({didOperationSucceed:!1,result:void 0})):-1===s.indexOf(r)?(this.logger.logProfilerObserverNeverSubscribedForProfilerEventId(r),S.generateOperationResult({didOperationSucceed:!1,result:void 0})):(this.profilerObserversToProfilerEventIds.set(e,s.filter((e=>e!==r))),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))}),t,this.logger)}subscribeCallTreeCustomPropertiesRetriever(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("SubscibeCallTreeCustomPropertiesRetriever",(()=>this.subscribeToProfiler(new Ge(e,this.callTreeCustomPropertiesRetrievers))),r,this.logger)}unsubscribeCallTreeCustomPropertiesRetriever(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("UnsubscribeCallTreeCustomPropertiesRetriever",(()=>this.unsubscribeFromProfiler(new Ge(e,this.callTreeCustomPropertiesRetrievers))),r,this.logger)}subscribeCallTreeCustomFilterer(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("subscribeCallTreeCustomFilterer",(()=>this.subscribeToProfiler(new Ve(e,this.callTreeCustomFilterers))),r,this.logger)}unsubscribeCallTreeCustomFilterer(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("unsubscribeCallTreeCustomFilterer",(()=>this.unsubscribeFromProfiler(new Ve(e,this.callTreeCustomFilterers))),r,this.logger)}subscribeToProfiler(e){return null==e.subscriber?(this.logger.logNullOrUndefinedItemToSubscribe(e.subscriberString),S.generateOperationResult({didOperationSucceed:!1,result:void 0})):(e.subscriptionList.push(e.subscriber),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))}unsubscribeFromProfiler(e){if(null==e.subscriber)return this.logger.logNullOrUndefinedItemForUnsubscribe(e.subscriberString),S.generateOperationResult({didOperationSucceed:!1,result:void 0});const r=e.subscriptionList.indexOf(e.subscriber);return-1===r?(this.logger.logItemWasNeverSubscribed(e.subscriberString),S.generateOperationResult({didOperationSucceed:!1,result:void 0})):(e.subscriptionList.splice(r,1),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))}constructor(e,r,t,s,o,i,n){this.preProfilerStartChecker=e,this.jsSelfProfilingAPI=r,this.profilerInitOptions=t,this.customPropertiesRetriever=s,this.timestampRetriever=o,this.customPropertiesExtractor=i,this.logger=n,this.profiler=void 0,this.profilerTrace=void 0,this.profilerStartTimestamp=void 0,this.profilerStopTimestamp=void 0,this.didPreProfilerStartChecksFail=!1,this.profilerObserversToProfilerEventIds=new Map,this.callTreeCustomPropertiesRetrievers=[],this.documentEventsCountBeforeProfiling=void 0,this.callTreeCustomFilterers=[],this.traceRequestingEvents=[]}}class He extends je{start(){const e=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew(oe,(()=>(super.startProfilerImplementation(this.postProfilerStartCallback),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger)}stop(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew(ie,(()=>(null==e||e||this.logger.logTimedProfilerIsBeingStoppedManually(),super.stopProfilerImplementation(),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r,this.logger)}constructor(e,r,t,s,o,i,n,a){super(e,r,t,o,i,n,a),this.timerJobScheduler=s,this.postProfilerStartCallback=e=>{this.logger.logPostTimedStartProfilerStartCallbackInvoked(),null!=this.profilerInitOptions.profilingIntervalInMs?e&&(this.timerJobScheduler.setTimerJob(this.postTimerStopCallBack,this.profilerInitOptions.profilingIntervalInMs),this.logger.logTimerJobToStopProfilerSet()):this.logger.logProfilingIntervalIsUndefined()},this.postTimerStopCallBack=()=>{this.logger.logTimedProfilerStopCallbackInvoked(),this.stop(!0)}}}class Qe extends He{start(){const e=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew(le,(()=>(super.start(),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger)}stop(){const e=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew(de,(()=>(super.stopProfilerImplementation(this.postProfilerStopCallback),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger)}constructor(){super(...arguments),this.postProfilerStartCallback=e=>{this.logger.logPostTimedStartProfilerStartCallbackInvoked(),this.profilerInitOptions.profilingIntervalInMs?e?(this.timerJobScheduler.setTimerJob(this.postTimerStopCallBack,this.profilerInitOptions.profilingIntervalInMs),this.logger.logTimerJobToStopProfilerSet()):(this.logger.logPostProfilerStopCallbackInvoked(),this.postProfilerStopCallback()):this.logger.logProfilingIntervalIsUndefined()},this.postProfilerStopCallback=()=>{null!=this.profilerInitOptions.idleIntervalInMs?this.timerJobScheduler.setTimerJob(this.profilerStopCallback,this.profilerInitOptions.idleIntervalInMs):this.logger.logNullOrUndefinedIdleInterval()},this.profilerStopCallback=()=>{this.start()}}}class Ke extends je{start(){const e=S.generateOperationResult({didOperationSucceed:!1,result:void 0});return C.startNew(ge,(()=>(this.startProfilerImplementation(this.postProfilerStartCallback),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger).getResult()}stop(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});return C.startNew(me,(()=>{let r;return void 0!==e&&e&&(r=this.postProfilerStopCallback),this.stopProfilerImplementation(r),S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger).getResult()}constructor(e,r,t,s,o,i,n,a){super(e,r,t,o,i,n,a),this.timerJobScheduler=s,this.postProfilerStartCallback=e=>{this.timerJobScheduler.setTimerJob((()=>{e?this.stop(!0):this.start()}),e?1e4:0)},this.postProfilerStopCallback=()=>{this.start()}}}class Ze{createProfiler(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:null});return C.startNew(re,(()=>{const r=new Profiler(e);return S.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger).getResult()}constructor(e){this.logger=e}}class Xe{shouldProfilingStart(){return!!this.isDocumentVisibleNow()||this.shouldProfilerStartInAHiddenDocument}getShouldProcessProfileCapturedWhileUserIsIdle(){return this.shouldProcessProfileCapturedWhileUserIsIdle}isDocumentVisibleNow(){return this.documentVisibilityChecker.isDocumentVisibleNow()}constructor(e,r,t){this.documentVisibilityChecker=e,this.shouldProfilerStartInAHiddenDocument=r,this.shouldProcessProfileCapturedWhileUserIsIdle=t}}class Ye{extractCustomProperties(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:{}});return C.startNew("ExtractCustomProperties",(()=>{const r={};if(null!=e&&"getCustomProperties"in e&&"function"==typeof e.getCustomProperties){const t=e.getCustomProperties(void 0);null!=t?t.forEach(((e,t)=>{null==t?this.logger.logCustomPropertyKeyIsNull():null==e?this.logger.logCustomPropertyValueIsNull():r[t]=e})):this.logger.logNullOrUndefinedCustomProperties()}else this.logger.logNullOrUndefinedCustomPropertiesRetriever();return S.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger).getResult()}extractCustomPropertiesV2(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:{}});return C.startNew("ExtractCustomPropertiesV2",(()=>{const t={};if(null!=e&&"getCustomProperties"in e&&"function"==typeof e.getCustomProperties){const s=e.getCustomProperties(r);null!=s?s.forEach(((e,r)=>{null==r?this.logger.logCustomPropertyKeyIsNull():null==e?this.logger.logCustomPropertyValueIsNull():t[r]=e})):this.logger.logNullOrUndefinedCustomProperties()}else this.logger.logNullOrUndefinedCustomPropertiesRetriever();return S.generateOperationResult({didOperationSucceed:!0,result:t})}),t,this.logger).getResult()}constructor(e){this.logger=e}}class er{static buildProfiler(e,r,t,s,i,n){const a=S.generateOperationResult({didOperationSucceed:!1,result:new o(n)});return C.startNew("BuildProfilerInstance",(a=>{a.addProperty("ProfilerName",function(e,r){let t="";switch(e){case Ce.Manual:t="ManualProfiler";break;case Ce.Timed:t="TimedProfiler";break;case Ce.Continuous:t="ContinuousProfiler";break;case Ce.FullSession:t="FullSessionProfiler";break;default:r.logMissingProfilerNameForProfilerType(e),t="MissingProfilerName"}return t}(e,n)),a.addProperty("ProfilerInitOptions",{samplingIntervalInMs:r.samplingIntervalInMs,maximumNumberOfSamplesToTake:r.maximumNumberOfSamplesToTake,profilingIntervalInMs:r.profilingIntervalInMs,idleIntervalInMs:r.idleIntervalInMs});const l=L.getDocumentVisibilityChecker(),d=new Xe(l,null==i.shouldProfilingStartInAHiddenDocument?We:i.shouldProfilingStartInAHiddenDocument,null==i.shouldProcessProfileCapturedWhileUserIsIdle?Le:i.shouldProcessProfileCapturedWhileUserIsIdle),c=new Ze(n),u=w.getTimerJobScheduler(),g=J.getTimestampRetriever(),m=new Ye(n);let p,h=!1,T=!1,f=!1;const P=new Set;switch(P.add(Se.ProfilerStopped),e){case Ce.Manual:{const e=new je(d,c,r,t,g,m,n);e.subscribeProfilerObserver(s,P),f=!0,p=e,h=!0}break;case Ce.Timed:{const e=new He(d,c,r,u,t,g,m,n);e.subscribeProfilerObserver(s,P),f=!0,p=e,h=!0}break;case Ce.Continuous:{const e=new Qe(d,c,r,u,t,g,m,n);e.subscribeProfilerObserver(s,P),f=!0,p=e,h=!0}break;case Ce.FullSession:{const e=new Ke(d,c,r,u,t,g,m,n);e.subscribeProfilerObserver(s,P),f=!0,p=e,h=!0}break;default:n.logMissingProfilerImplementation(e),p=new o(n),h=!1,T=!0}void 0===p&&n.logNoProfilerInstanceBuilt(),void 0===p||f||n.logCreateProfilerDidNotSubscribeProfilerObserver();const C=void 0===p?new o(n):p;return S.generateOperationResult({didOperationSucceed:h,result:C,didOperationFailUnexpectedly:T})}),a,n).getResult()}}class rr{createProfiler(e,r,t){const s=S.generateOperationResult({didOperationSucceed:!1,result:new o(this.logger)});return C.startNew("CreateProfiler",(()=>{if(!this.validator.areValidationsSuccessful())return this.logger.logFailingValidationsInProfilerFactory(),S.generateOperationResult({didOperationSucceed:!1,result:new o(this.logger)});if(!this.optionsValidatorFactory.retrieveValidator(e).isValid(r))return this.logger.logProfilerInitOptionsValidationFailed(),S.generateOperationResult({didOperationSucceed:!1,result:new o(this.logger)});const s=this.profilerInitOptionsFixerFactory.getFixerForProfilerType(e);s.fixProfilerInitOptions(r);const i=s.retrieveFixedProfilerInitOptions();if(null==i)return this.logger.logUnableToFixUpProfilerInitOptions(),S.generateOperationResult({didOperationSucceed:!1,result:new o(this.logger)});if(this.numberOfProfilersCreated>=100)return this.logger.logMaxNumberOfProfilersAlreadyCreated(),S.generateOperationResult({didOperationSucceed:!1,result:new o(this.logger)});const n=er.buildProfiler(e,i,t,this.profilerObserverFactory.createObserver(),this.packageInitOptions,this.logger);return this.numberOfProfilersCreated=this.numberOfProfilersCreated+1,S.generateOperationResult({didOperationSucceed:!0,result:n})}),s,this.logger).getResult()}createProfilerV2(e,r,t){const s=S.generateOperationResult({didOperationSucceed:!1,result:new o(this.logger)});return C.startNew("CreateProfilerV2",(()=>{if(!this.validator.areValidationsSuccessful())return this.logger.logFailingValidationsInProfilerFactory(),S.generateOperationResult({didOperationSucceed:!1,result:new o(this.logger)});if(!this.optionsValidatorFactory.retrieveValidator(e).isValid(r))return this.logger.logProfilerInitOptionsValidationFailed(),S.generateOperationResult({didOperationSucceed:!1,result:new o(this.logger)});const s=this.profilerInitOptionsFixerFactory.getFixerForProfilerType(e);s.fixProfilerInitOptions(r);const i=s.retrieveFixedProfilerInitOptions();if(null==i)return this.logger.logUnableToFixUpProfilerInitOptions(),S.generateOperationResult({didOperationSucceed:!1,result:new o(this.logger)});if(this.numberOfProfilersCreated>=100)return this.logger.logMaxNumberOfProfilersAlreadyCreated(),S.generateOperationResult({didOperationSucceed:!1,result:new o(this.logger)});const n=er.buildProfiler(e,i,t,this.profilerObserverFactory.createObserver(),this.packageInitOptions,this.logger);return this.numberOfProfilersCreated=this.numberOfProfilersCreated+1,S.generateOperationResult({didOperationSucceed:!0,result:n})}),s,this.logger).getResult()}constructor(e,r,t,s,o,i){this.validator=e,this.optionsValidatorFactory=r,this.profilerInitOptionsFixerFactory=t,this.profilerObserverFactory=s,this.packageInitOptions=o,this.logger=i,this.numberOfProfilersCreated=0}}class tr{areValidationsSuccessful(){const e=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew("CheckProfilerFactoryValidations",(()=>this.isFeatureEnabled()?this.isSupportedEnvironmentForProfiling()?S.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logProfilingIsNotSupportedEnvironment(),S.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logProfilingIsNotEnabled(),S.generateOperationResult({didOperationSucceed:!0,result:!1}))),e,this.logger).getResult()}isFeatureEnabled(){return null==this.featureChecker?(this.logger.logFeatureCheckerIsNullOrUndefined(),!1):"isProfilingEnabled"in this.featureChecker?"function"!=typeof this.featureChecker.isProfilingEnabled?(this.logger.logFeatureCheckerIsProfilingEnabledNotAFunction(),!1):this.featureChecker.isProfilingEnabled():(this.logger.logMissingIsProfilingEnabledOnFeatureChecker(),!1)}isSupportedEnvironmentForProfiling(){return this.supportedEnvironmentChecker.isSupportedEnvironment()}constructor(e,r,t){this.featureChecker=e,this.supportedEnvironmentChecker=r,this.logger=t}}class sr{isProfilingSupportedInJSEnvironment(){const e=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew("CheckSupportedBrowser",(e=>{const r=this.userAgentRetriever.retrieveUserAgent();e.addProperty("UserAgent",r);const t=this.browserUtils.isBrowserChromiumBased(r);if(e.addProperty("isChromiumBasedBrowser",t),!t)return this.logger.logBrowserUserAgentNotChromiumBased(),S.generateOperationResult({didOperationSucceed:!0,result:!1});const s=this.browserUtils.parseChromeMajorVersionNumber(r);e.addProperty("ChromiumMajorVersionNumber",s);const o=s>=94;return e.addProperty("IsSupportedVersionOfChromiumBrowser",o),o?S.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logUnsupportedChromiumMajorVersionNumber(),S.generateOperationResult({didOperationSucceed:!0,result:!1}))}),e,this.logger).getResult()}constructor(e,r,t){this.userAgentRetriever=e,this.browserUtils=r,this.logger=t}}class or{isSupportedEnvironment(){const e=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew("CheckSupportedEnvironment",(()=>this.isSupportedBrowser()?this.shouldSkipSupportedOSCheck||this.isSupportedOperatingSystem()?this.isJSSelfProfilingAPIAvailable()?S.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logJSSelfProfilingAPIUnavailable(),S.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logUnsupportedOperatingSystem(),S.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logUnsupportedBrowser(),S.generateOperationResult({didOperationSucceed:!0,result:!1}))),e,this.logger).getResult()}isSupportedBrowser(){return this.supportedBrowserChecker.isProfilingSupportedInJSEnvironment()}isSupportedOperatingSystem(){return this.supportedOperatingSystemChecker.isSupportedOperatingSystem()}isJSSelfProfilingAPIAvailable(){return this.jsSelfProfilingAPIAvailabilityChecker.isJSSelfProfilingAPIAvailable()}constructor(e,r,t,s,o){this.supportedBrowserChecker=e,this.supportedOperatingSystemChecker=r,this.jsSelfProfilingAPIAvailabilityChecker=t,this.shouldSkipSupportedOSCheck=s,this.logger=o}}class ir{isSupportedOperatingSystem(){const e=S.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:!1});return C.startNew("SupportedOperatingSystemCheck",(()=>{const e=this.isOperatingSystemWindows();return S.generateOperationResult({didOperationSucceed:!0,result:e})}),e,this.logger).getResult()}isOperatingSystemWindows(){return this.userAgentRetriever.retrieveUserAgent().toLowerCase().includes("win")}constructor(e,r){this.userAgentRetriever=e,this.logger=r}}class nr{isJSSelfProfilingAPIAvailable(){const e=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew("CheckForJSSelfProfilingAPI",(()=>null==window?(this.logger.logWindowMissingInJSEnvironment(),S.generateOperationResult({didOperationSucceed:!0,result:!1})):"Profiler"in window?S.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logProfilerNotPresentInJSEnvironment(),S.generateOperationResult({didOperationSucceed:!0,result:!1}))),e,this.logger).getResult()}constructor(e){this.logger=e}}class ar{isSupportedEnvironment(){return this.logger.logNullSupportedEnvironmentCheckerInvoked(),!1}constructor(e){this.logger=e}}class lr{static build(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:new ar(r)});return C.startNew("BuildSupportedEnvironmentChecker",(()=>{const t=H.getUserAgentRetriever(),s=N.getBrowserUtils(),o=new sr(t,s,r),i=new ir(t,r),n=new nr(r);return S.generateOperationResult({didOperationSucceed:!0,result:new or(o,i,n,e,r)})}),t,r).getResult()}}class dr{isValid(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew("CheckSamplingInterval",(r=>null==e?(this.logger.logProfilerInitOptionsNullOrUndefined(),S.generateOperationResult({didOperationSucceed:!0,result:!1})):(r.addProperty("SamplingIntervalToValidate",e.samplingIntervalInMs),e.samplingIntervalInMs<=0?(this.logger.logSamplingIntervalIsLessThanOrEqualToZero(),S.generateOperationResult({didOperationSucceed:!0,result:!1})):this.convertToMicroSeconds(e.samplingIntervalInMs)>2147483647?(this.logger.logSamplingIntervalAboveMaxSamplingInterval(),S.generateOperationResult({didOperationSucceed:!0,result:!1})):(e.samplingIntervalInMs<16&&this.logger.logSamplingIntervalLessThanMinimumSupportedSamplingInterval(e.samplingIntervalInMs,16),S.generateOperationResult({didOperationSucceed:!0,result:!0})))),r,this.logger).getResult()}convertToMicroSeconds(e){return 1e3*e}constructor(e){this.logger=e}}class cr extends dr{isValid(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew("CheckMaxBufferSizeIfSpecified",(()=>null==e?(this.logger.logProfilerInitOptionsNullOrUndefined(),S.generateOperationResult({didOperationSucceed:!0,result:!1})):super.isValid(e)?this.isMaxBufferSizeValidIfSpecified(e)?S.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logMaxBufferValidationFailed(),S.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logSamplingIntervalValidationCheckFailed(),S.generateOperationResult({didOperationSucceed:!0,result:!1}))),r,this.logger).getResult()}isMaxBufferSizeValidIfSpecified(e){return null==e.maximumNumberOfSamplesToTake?(this.logger.logMaxBufferSizeNotSpecified(),!0):!(e.maximumNumberOfSamplesToTake<=0&&(this.logger.logMaxBufferSizeLessThanOrEqualToZero(),1))}}class ur extends cr{isValid(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew("CheckProfilingIntervalIfSpecified",(()=>null==e?(this.logger.logProfilerInitOptionsNullOrUndefined(),S.generateOperationResult({didOperationSucceed:!0,result:!1})):super.isValid(e)?this.isProfilingIntervalValid(e)?this.isProfilingIntervalGreaterThanSamplingInterval(e)?S.generateOperationResult({didOperationSucceed:!0,result:!0}):S.generateOperationResult({didOperationSucceed:!0,result:!1}):(this.logger.logProfilingIntervalValidationFailed(),S.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logManualProfilerValidationFailed(),S.generateOperationResult({didOperationSucceed:!0,result:!1}))),r,this.logger).getResult()}isProfilingIntervalValid(e){return null==e.profilingIntervalInMs?(this.logger.logProfilingIntervalNullOrUndefined(),!1):!(e.profilingIntervalInMs<=0&&(this.logger.logProfilingIntervalLessThanOrEqualToZero(),1))}isProfilingIntervalGreaterThanSamplingInterval(e){return null==e.profilingIntervalInMs?(this.logger.logProfilingIntervalNullOrUndefined(),!1):!(e.profilingIntervalInMs<e.samplingIntervalInMs&&(this.logger.logProfilingIntervalLessThanSamplingInterval(),1))}}class gr extends ur{isValid(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew("CheckIdleIntervalIfSpecified",(()=>null==e?(this.logger.logProfilerInitOptionsNullOrUndefined(),S.generateOperationResult({didOperationSucceed:!0,result:!1})):super.isValid(e)?this.isIdleIntervalInValid(e)?S.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logIdleIntervalValidationFailed(),S.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logTimedProfilerValidationFailed(),S.generateOperationResult({didOperationSucceed:!0,result:!1}))),r,this.logger).getResult()}isIdleIntervalInValid(e){return null==e.idleIntervalInMs?(this.logger.logIdleIntervalIsNullOrUndefined(),!1):!(e.idleIntervalInMs<=0&&(this.logger.logIdleIntervalIsLessThanOrEqualToZero(),1))}}class mr{isValid(e){return this.logger.logNullJSCPUProfilerInitOptionsValidatorInvoked(),!1}constructor(e){this.logger=e}}class pr{retrieveValidator(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:new mr(this.logger)});return C.startNew("RetrieveValidator",(r=>{switch(r.addProperty("ProfilerType",e),e){case Ce.Manual:return S.generateOperationResult({didOperationSucceed:!0,result:new cr(this.logger)});case Ce.Timed:return S.generateOperationResult({didOperationSucceed:!0,result:new ur(this.logger)});case Ce.Continuous:return S.generateOperationResult({didOperationSucceed:!0,result:new gr(this.logger)});case Ce.FullSession:return S.generateOperationResult({didOperationSucceed:!0,result:new dr(this.logger)});default:return r.addLog("Missing validator implementation for profiler type"),S.generateOperationResult({didOperationSucceed:!1,result:new dr(this.logger),didOperationFailUnexpectedly:!0})}}),r,this.logger).getResult()}constructor(e){this.logger=e}}class hr{fixProfilerInitOptions(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("FixMaxBufferSize",(()=>null==e?(this.logger.logNullOrUndefinedProfilerInitOptions(),S.generateOperationResult({didOperationSucceed:!1,result:void 0,didOperationFailUnexpectedly:!0})):(this.fixedProfilerInitOptions=e,null==this.fixedProfilerInitOptions.maximumNumberOfSamplesToTake&&(this.logger.logMaxBufferSizeFixedToDefaultSize(),this.fixedProfilerInitOptions.maximumNumberOfSamplesToTake=2e5),this.didProfilerInitOptionsGetFixed=!0,S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r,this.logger)}retrieveFixedProfilerInitOptions(){return this.didProfilerInitOptionsGetFixed?this.didProfilerInitOptionsGetFixed=!1:this.logger.logMaxBufferSizeWasNotFixedBeforeRetrieval(),this.fixedProfilerInitOptions}constructor(e){this.logger=e,this.didProfilerInitOptionsGetFixed=!1,this.fixedProfilerInitOptions=void 0}}class Tr{fixProfilerInitOptions(e){this.logger.logLoopBackFixerFixProfilerInitOptionsInvoked(),null!=e&&(this.profilerInitOptionsToLoopBack=e)}retrieveFixedProfilerInitOptions(){return this.logger.logLoopBackFixerRetrieveFixedProfilerInitOptionsInvoked(),this.profilerInitOptionsToLoopBack}constructor(e){this.logger=e,this.profilerInitOptionsToLoopBack=void 0}}class fr{getFixerForProfilerType(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:new Tr(this.logger)});return C.startNew("GetFixerForProfileType",(()=>{this.logger.logFixerForProfilerType(e);let r=new Tr(this.logger),t=!1;switch(e){case Ce.Manual:case Ce.Timed:case Ce.Continuous:case Ce.FullSession:t=!0,r=new hr(this.logger);break;default:this.logger.logMissingProfilerInitOptionsFixerImplementation()}return S.generateOperationResult({didOperationSucceed:t,result:r})}),r,this.logger).getResult()}constructor(e){this.logger=e}}class Pr{createProfiler(e,r,t){return this.logger.logNullJSCPUProfilerFactoryInvoked(),new o(this.logger)}createProfilerV2(e,r,t){return this.logger.logNullJSCPUProfilerFactoryInvoked(),new o(this.logger)}constructor(e){this.logger=e}}class Cr{filterFrames(){}retrieveFrameFilteredCallTree(){return new vr}}class Sr{getNext(){}hasMore(){return!1}}class vr{getReconstructibleTreeIterator(){return new Sr}getDepthFirstIterator(){return new Sr}getNodesToMergeIterator(){return new Sr}getRightMostNodesIterator(){return new Sr}getStartTimeInMs(){return-1}getTotalExecutionTimeInMs(){return-1}getCustomProperties(){return{}}getTreeId(){return we}getFramesFilterer(e){return new Cr}}class Ir{transform(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew(ce,(r=>{this.profilerTrace=e,this.traceToCallTreesConverter.buildCallTrees(this.profilerTrace);const t=this.traceToCallTreesConverter.retrieveBuiltCallTrees();r.addProperty("BuiltCallTreesCount",t.length);const s=t.filter((e=>!(e instanceof vr))).length;r.addProperty("NonEmptyCallTreesCount",s),this.callTreesMerger.mergeCallTrees(t);const o=this.callTreesMerger.retrieveMergedCallTrees();r.addProperty("MergedCallTreesCount",o.length),this.callTreesFilterer.filterCallTrees(o,this.callTreeFilteringThresholdInMs);const i=this.callTreesFilterer.retrieveFilteredCallTrees();return r.addProperty("FilteredCallTreesCount",i.length),this.callTreesToReturn=i,this.callTreesFramesFilterer.filterCallTrees(i,this.frameTotalExecutionTimeFilteringThresholdInMs),r.addProperty("FrameFilteredCallTreesCount",this.callTreesToReturn.length),this.transformCalledBeforeRetrieveCallTrees=!0,S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveCallTrees(){const e=S.generateOperationResult({didOperationSucceed:!1,result:[]});return C.startNew("RetrieveCallTrees",(()=>this.transformCalledBeforeRetrieveCallTrees?(this.transformCalledBeforeRetrieveCallTrees=!1,S.generateOperationResult({didOperationSucceed:!0,result:this.callTreesToReturn})):(this.logger.logRetrieveCallTreesCalledBeforeTransform(),S.generateOperationResult({didOperationSucceed:!1,result:[]}))),e,this.logger).getResult()}constructor(e,r,t,s,o,i,n){this.traceToCallTreesConverter=e,this.callTreesMerger=r,this.callTreesFilterer=t,this.callTreeFilteringThresholdInMs=s,this.callTreesFramesFilterer=o,this.frameTotalExecutionTimeFilteringThresholdInMs=i,this.logger=n,this.transformCalledBeforeRetrieveCallTrees=!1,this.profilerTrace=void 0,this.callTreesToReturn=[]}}class kr{buildCallTrees(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("BuildCallTrees",(()=>{this.didBuildCallTreesGetCalledBeforeRetrieve=!0,this.stacksBuilder.buildStacks(e);const r=this.stacksBuilder.retrieveStacks(),t=e.getCustomProperties();return this.stacksToCallTreesConverter.convertStacksToCallTrees(t,r),this.callTrees=this.stacksToCallTreesConverter.retrieveConvertedCallTrees(),S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveBuiltCallTrees(){const e=S.generateOperationResult({didOperationSucceed:!1,result:[]});return C.startNew("RetrieveBuiltCallTrees",(()=>this.didBuildCallTreesGetCalledBeforeRetrieve?(this.didBuildCallTreesGetCalledBeforeRetrieve=!1,S.generateOperationResult({didOperationSucceed:!0,result:this.callTrees})):(this.logger.logRetrieveBuiltCallTreesBeforeBuildCallTrees(),S.generateOperationResult({didOperationSucceed:!1,result:[]}))),e,this.logger).getResult()}constructor(e,r,t){this.stacksBuilder=e,this.stacksToCallTreesConverter=r,this.logger=t,this.didBuildCallTreesGetCalledBeforeRetrieve=!1,this.callTrees=[]}}class br{peek(){}pop(){}}class Or{peek(){const e=this.profilerFrames.length;if(0!==e)return this.profilerFrames[e-1]}pop(){this.profilerFrames.pop()}push(e){this.profilerFrames.push(e)}constructor(){this.profilerFrames=[]}}class yr{addChildNode(e){this.childrenNodes.push(e),e.setParentNode(this)}getFrameOnlyExecutionTimeInMs(){const e=this.getSubTreeExecutionTimeInMs();return this.shouldRecordExpandedTimeStamps?this.totalExecutionTime-e:this.trimTimeStamp(this.totalExecutionTime-e)}getSubTreeExecutionTimeInMs(){let e=0;return this.childrenNodes.forEach((r=>{e+=r.getTotalExecutionTimeInMs()})),e<0&&this.logger.logNegativeSubTreeExecutionTime(),e}getTotalExecutionTimeInMs(){return this.shouldRecordExpandedTimeStamps?this.totalExecutionTime:this.trimTimeStamp(this.totalExecutionTime)}getFrame(){return this.profilerFrame}getChildrenNodes(){return this.childrenNodes}removeChildNode(e){e.setParentNode(void 0),this.childrenNodes=this.childrenNodes.filter((r=>r!==e))}getStartTimeInMs(){return this.shouldRecordExpandedTimeStamps?this.startTime:this.trimTimeStamp(this.startTime)}getLastObservedTimestamp(){return this.shouldRecordExpandedTimeStamps?this.lastObservedTimestamp:this.trimTimeStamp(this.lastObservedTimestamp)}getResourceName(){return this.resourceName}getParentNode(){return this.parentNode}setParentNode(e){this.parentNode=e}setTotalExecutionTime(e){e<0&&this.logger.logInvalidNewFrameNodeExecutionTime(),this.totalExecutionTime=e}setLastObservedTimestamp(e){this.lastObservedTimestamp=e}trimTimeStamp(e){return Number.parseFloat(e.toFixed(2))}getCount(){return this.count}getFrameOnlyCount(){if(void 0===this.count)return;const e=this.childrenNodes.reduce(((e,r)=>e+r.getCount()),0);return this.count-e}addCount(e){this.recordFrameCount&&void 0!==e&&(this.count+=e)}constructor(e,r,t,s,o,i,n,a,l){this.profilerFrame=e,this.startTime=r,this.totalExecutionTime=t,this.lastObservedTimestamp=s,this.resourceName=o,this.shouldRecordExpandedTimeStamps=i,this.parentNode=n,this.recordFrameCount=a,this.logger=l,this.childrenNodes=[],r<0&&this.logger.logInvalidFrameNodeStartTime(),t<0&&this.logger.logInvalidFrameNodeExecutionTime(),this.recordFrameCount&&(this.count=1)}}class Wr{peek(){this.logger.logPeekOnNullExecutionStackInvoked()}pop(){this.logger.logPopOnNullExecutionStackInvoked()}constructor(e){this.logger=e}}var Mr,Rr,_r,Nr,xr,Fr=t(392);class Er{buildStack(e){if((0,Fr.isChangeGateEnabled)("OfficeVSO:9667365_RefactirSampleToStackConvertor"))return this.buildStackNewImplementation(e);const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew(ue,(r=>{if(this.buildStackCalled=!0,null==e.stackId)return this.handleEmptyStack(e,r);const t=this.profilerTrace.getStacks();if(0===t.length)return this.logger.logEmptyStacks(),S.generateOperationResult({didOperationSucceed:!1,result:void 0});const s=this.profilerTrace.getFrames();if(0===s.length)return this.logger.logEmptyFrames(),S.generateOperationResult({didOperationSucceed:!1,result:void 0});const o=new Or;let i=e.stackId,n=0,a=!1;const l=this.initializeStack(e,t,s);for(;;){if(n>t.length){this.logger.logForciblyExitingLoopWhileBuildingStack(),a=!0;break}n+=1;const e=t[i],r=s[e.frameId];if(l.unshift(r),null==e.parentId)break;i=e.parentId}const d=e.timestamp,c=d,u=this.profilerTrace.getResources();return l.forEach((e=>{const r=new yr(e,d,0,c,u[e.resourceId],this.shouldRecordExpandedTimeStamps,void 0,this.shouldRecordFrameCounts,this.logger);o.push(r)})),a?S.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:void 0}):(this.builtStack=o,S.generateOperationResult({didOperationSucceed:!0,result:void 0}))}),r,this.logger,!0)}retrieveStack(){const e=S.generateOperationResult({didOperationSucceed:!1,result:new Wr(this.logger)});return C.startNew("RetrieveStack",(()=>this.buildStackCalled?void 0===this.builtStack?(this.logger.logExecutionStackNeverBuilt(),S.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:new Wr(this.logger)})):(this.buildStackCalled=!1,S.generateOperationResult({didOperationSucceed:!0,result:this.builtStack})):(this.logger.logRetrieveStackCalledBeforeBuildStack(),S.generateOperationResult({didOperationSucceed:!1,result:new Wr(this.logger)}))),e,this.logger,!0).getResult()}constructExecutionStackFrames(e,r,t){let s=e.stackId,o=0;const i=this.initializeStack(e,r,t);for(;o<=r.length;){const e=r[s],n=t[e.frameId];if(i.unshift(n),null==e.parentId)return i;o+=1,s=e.parentId}this.logger.logForciblyExitingLoopWhileBuildingStack()}constructExecutionStack(e,r,t){const s=this.constructExecutionStackFrames(e,r,t);if(void 0===s)return;const o=new Or,i=e.timestamp,n=i,a=this.profilerTrace.getResources();return s.forEach((e=>{const r=new yr(e,i,0,n,a[e.resourceId],this.shouldRecordExpandedTimeStamps,void 0,this.shouldRecordFrameCounts,this.logger);o.push(r)})),o}initializeStack(e,r,t){if(!this.shouldExpandMarkers||!Boolean(e.marker))return[];const s=t[r[e.stackId].frameId];return[{name:s.name,resourceId:s.resourceId,line:s.line,column:s.column,marker:e.marker}]}handleEmptyStack(e,r){if(!this.shouldExpandMarkers||!Boolean(e.marker)){this.builtStack=new br;const e="EmptyStackBuilt";return r.addProperty(e,!0),S.generateOperationResult({didOperationSucceed:!0,result:void 0})}const t=new Or,s={name:"",resourceId:-1,line:-1,column:-1,marker:e.marker},o=new yr(s,e.timestamp,0,e.timestamp,"",this.shouldRecordExpandedTimeStamps,void 0,this.shouldRecordFrameCounts,this.logger);return t.push(o),this.builtStack=t,S.generateOperationResult({didOperationSucceed:!0,result:void 0})}buildStackNewImplementation(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew(ue,(r=>{if(this.buildStackCalled=!0,null==e.stackId)return this.handleEmptyStack(e,r);const t=this.profilerTrace.getStacks();if(0===t.length)return this.logger.logEmptyStacks(),S.generateOperationResult({didOperationSucceed:!1,result:void 0});const s=this.profilerTrace.getFrames();if(0===s.length)return this.logger.logEmptyFrames(),S.generateOperationResult({didOperationSucceed:!1,result:void 0});const o=this.constructExecutionStack(e,t,s);return void 0===o?S.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:void 0}):(this.builtStack=o,S.generateOperationResult({didOperationSucceed:!0,result:void 0}))}),r,this.logger,!0)}constructor(e,r,t,s,o){this.profilerTrace=e,this.logger=r,this.shouldRecordExpandedTimeStamps=t,this.shouldRecordFrameCounts=s,this.shouldExpandMarkers=o,this.buildStackCalled=!1,this.builtStack=void 0}}class wr{buildStacks(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("BuildStacks",(()=>{this.buildStacksCalled=!0;const r=e.getSamples();let t=this.sampleSorter.sortSamples(r);const s=e.getProfilerProperties().profilingIntervalInMs;return null==s||this.shouldKeepSamplesOutsideOfProfilingInterval||(this.sampleFilterer.filterSamples(t,s),t=this.sampleFilterer.retrieveFilteredSamples()),this.builtExecutionStacks=this.samplesToStacks(t,e),S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveStacks(){const e=S.generateOperationResult({didOperationSucceed:!1,result:[]});return C.startNew("RetrieveStacks",(()=>this.buildStacksCalled?void 0===this.builtExecutionStacks?S.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:[]}):(this.buildStacksCalled=!1,S.generateOperationResult({didOperationSucceed:!0,result:this.builtExecutionStacks})):(this.logger.logRetrieveStacksCalledBeforeBuildStacks(),S.generateOperationResult({didOperationSucceed:!1,result:[]}))),e,this.logger).getResult()}samplesToStacks(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:[]});return C.startNew("ConvertSamplesToStacks",(()=>{const t=[],s=new Er(r,this.logger,this.shouldRecordExpandedTimeStamps,this.shouldRecordFrameCounts,this.shouldExpandMarkers);return e.forEach((e=>{s.buildStack(e),t.push(s.retrieveStack())})),S.generateOperationResult({didOperationSucceed:!0,result:t})}),t,this.logger).getResult()}constructor(e,r,t,s,o,i,n){this.sampleSorter=e,this.sampleFilterer=r,this.shouldKeepSamplesOutsideOfProfilingInterval=t,this.shouldRecordExpandedTimeStamps=s,this.logger=o,this.shouldRecordFrameCounts=i,this.shouldExpandMarkers=n,this.buildStacksCalled=!1,this.builtExecutionStacks=void 0}}class Ur{sortSamples(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:[]});return C.startNew("SortSamples",(()=>{const r=e.sort(this.sortSampleByTimestamp);return S.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger).getResult()}constructor(e){this.logger=e,this.sortSampleByTimestamp=(e,r)=>{const t=S.generateOperationResult({didOperationSucceed:!1,result:0});return C.startNew("CustomSampleSort",(()=>e.timestamp>r.timestamp?S.generateOperationResult({didOperationSucceed:!0,result:1}):r.timestamp>e.timestamp?S.generateOperationResult({didOperationSucceed:!0,result:-1}):S.generateOperationResult({didOperationSucceed:!0,result:0})),t,this.logger,!0).getResult()}}}class Lr{removeChildNode(e){}addChildNode(e){}getFrameOnlyExecutionTimeInMs(){return-1}getSubTreeExecutionTimeInMs(){return-1}getTotalExecutionTimeInMs(){return-1}getFrame(){return be}getChildrenNodes(){return[]}getStartTimeInMs(){return-1}getLastObservedTimestamp(){return-1}getResourceName(){return ye}getParentNode(){}setParentNode(e){}setTotalExecutionTime(e){}setLastObservedTimestamp(e){}getCount(){return 0}getFrameOnlyCount(){return 0}addCount(e){}constructor(e){this.logger=e,this.logger.logNullFrameNodeCreated()}}class Br{getNext(){return this.logger.logNullCallTreeIteratorImplGetNextInvoked(),new Lr(this.logger)}hasMore(){return this.logger.logNullCallTreeIteratorImplHasMoreInvoked(),!1}constructor(e){this.logger=e}}class Ar{filterFrames(){this.logger.logNullCallTreeFramesFiltererFilterFramesInvoked()}retrieveFrameFilteredCallTree(){return this.logger.logNullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked(),new zr(this.logger)}constructor(e){this.logger=e}}class zr{getReconstructibleTreeIterator(){return this.logger.logNullCallTreeGetReconstructableTreeIteratorInvoked(),new Br(this.logger)}getDepthFirstIterator(){return this.logger.logNullCallTreeDepthFirstIteratorInvoked(),new Br(this.logger)}getNodesToMergeIterator(){return this.logger.logNullCallTreeLeftMostNodesIteratorInvoked(),new Br(this.logger)}getRightMostNodesIterator(){return this.logger.logNullCallTreeRightMostNodesIteratorInvoked(),new Br(this.logger)}getStartTimeInMs(){return-1}getTotalExecutionTimeInMs(){return this.logger.logNullCallTreeGetTotalExecutionTimeInvoked(),-1}getCustomProperties(){return this.logger.logNullCallTreeGetCustomPropertiesInvoked(),{}}getTreeId(){return we}getFramesFilterer(){return this.logger.logNullCallTreeGetFramesFiltererInvoked(),new Ar(this.logger)}constructor(e){this.logger=e}}function $r(e,r){return e.name===r.name&&e.resourceId===r.resourceId&&e.line===r.line&&e.column===r.column&&e.marker===r.marker}class qr{removeChildNode(e){}addChildNode(e){}getFrameOnlyExecutionTimeInMs(){return-1}getSubTreeExecutionTimeInMs(){return-1}getTotalExecutionTimeInMs(){return 0}getFrame(){return be}getChildrenNodes(){return[]}getStartTimeInMs(){return-1}getLastObservedTimestamp(){return-1}getResourceName(){return ye}getParentNode(){return this.parentNode}setParentNode(e){this.parentNode=e}setTotalExecutionTime(e){}setLastObservedTimestamp(e){}getCount(){return 0}getFrameOnlyCount(){return 0}addCount(e){}constructor(){}}class Dr{getNext(){const e=this.nodesToIterate.peek();if(void 0===e)return;this.nodesToIterate.pop();const r=e.getChildrenNodes();for(let e=r.length-1;e>=0;e-=1)$r(r[e].getFrame(),be)||this.nodesToIterate.push(r[e]);return e}hasMore(){return 0!==this.nodesToIterate.count()}constructor(e){this.nodesToIterate=K.createStack(),e instanceof qr||this.nodesToIterate.push(e)}}class Jr{getNext(){const e=this.nodesToIterate.peek();if(void 0===e)return;const r=e.getChildrenNodes();return r.length>1&&this.logger.logExpectedOnlyOneNodePerLevelInCallTree(),this.nodesToIterate.queue(r[0]),this.nodesToIterate.dequeue(),e}hasMore(){return void 0!==this.nodesToIterate.peek()}constructor(e,r){this.logger=r,this.nodesToIterate=G.createQueue(),this.nodesToIterate.queue(e)}}class Vr{getNext(){const e=this.nodesToIterate.peek();if(void 0===e)return;const r=e.getChildrenNodes();return r.length>0&&this.nodesToIterate.queue(r[r.length-1]),this.nodesToIterate.dequeue(),e}hasMore(){return void 0!==this.nodesToIterate.peek()}constructor(e){this.nodesToIterate=G.createQueue(),this.nodesToIterate.queue(e)}}class Gr{filterFrames(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});return C.startNew("FilterCallTreeFrames",(()=>{const r=this.callTree.getDepthFirstIterator();let t;for(;r.hasMore();)t=r.getNext(),void 0!==t&&this.filterFrame(t,e);return S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger).getResult()}filterFrame(e,r){if(e.getTotalExecutionTimeInMs()<=r){const r=e.getParentNode();if(!r)return void this.logger.logFilterFrameWithNoParent();r.removeChildNode(e)}}constructor(e,r){this.callTree=e,this.logger=r}}class jr{addChildNode(e){}getFrame(){return Oe}getChildrenNodes(){return[]}removeChildNode(e){}getResourceName(){return ye}getParentNode(){}setParentNode(e){}setTotalExecutionTime(e){}setLastObservedTimestamp(e){}getFrameOnlyExecutionTimeInMs(){return-1}getSubTreeExecutionTimeInMs(){return-1}getTotalExecutionTimeInMs(){return-1}getStartTimeInMs(){return-1}getLastObservedTimestamp(){return-1}getCount(){return 0}getFrameOnlyCount(){return 0}addCount(e){}}class Hr{getNext(){const e=this.nodesToIterate.peek();if(void 0===e)return;this.nodesToIterate.pop();const r=e.getChildrenNodes();r.length>0&&this.nodesToIterate.push(new jr);for(let e=r.length-1;e>=0;e-=1)$r(r[e].getFrame(),be)||this.nodesToIterate.push(r[e]);return e}hasMore(){return 0!==this.nodesToIterate.count()}constructor(e){this.nodesToIterate=K.createStack(),e instanceof qr||this.nodesToIterate.push(e)}}class Qr{getReconstructibleTreeIterator(){return C.startNew("GetReconstructibleTreeIterator",(()=>S.generateOperationResult({didOperationSucceed:!0,result:new Hr(this.rootNode)})),this.fallbackResult,this.logger).getResult()}getDepthFirstIterator(){return C.startNew("GetDepthFirstIterator",(()=>S.generateOperationResult({didOperationSucceed:!0,result:new Dr(this.rootNode)})),this.fallbackResult,this.logger).getResult()}getNodesToMergeIterator(){return C.startNew("GetCallTreeLeftMostNodesIterator",(()=>S.generateOperationResult({didOperationSucceed:!0,result:new Jr(this.rootNode,this.logger)})),this.fallbackResult,this.logger,!0).getResult()}getRightMostNodesIterator(){return C.startNew("GetCallTreeRightMostNodesIterator",(()=>S.generateOperationResult({didOperationSucceed:!0,result:new Vr(this.rootNode)})),this.fallbackResult,this.logger,!0).getResult()}getStartTimeInMs(){return this.rootNode.getStartTimeInMs()}getTotalExecutionTimeInMs(){return this.rootNode.getTotalExecutionTimeInMs()}getCustomProperties(){return this.customProperties}getTreeId(){return this.callTreeId}getFramesFilterer(){return new Gr(this,this.logger)}constructor(e,r,t,s){this.rootNode=e,this.customProperties=r,this.callTreeId=t,this.logger=s,this.fallbackResult=S.generateOperationResult({didOperationSucceed:!1,result:new Br(this.logger)})}}class Kr{convertStackToCallTree(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("ConvertStackToCallTree",(()=>(this.convertedCallTree=this.buildCallTree(e,r),this.isConvertCalled=!0,S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),t,this.logger,!0)}retrieveCallTree(){const e=S.generateOperationResult({didOperationSucceed:!1,result:new zr(this.logger)});return C.startNew("RetrieveCallTree",(()=>this.isConvertCalled?(this.isConvertCalled=!1,S.generateOperationResult({didOperationSucceed:!0,result:this.convertedCallTree})):(this.logger.logConvertStackToCallTreeNeverCalled(),S.generateOperationResult({didOperationSucceed:!1,result:new zr(this.logger)}))),e,this.logger,!0).getResult()}buildCallTree(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:new zr(this.logger)});return C.startNew("BuildCallTree",(t=>{const s=[];for(;;){const r=e.peek();if(void 0===r)break;s.unshift(r),e.pop()}if(0===s.length)return t.addLog("No profiler frames were extracted. Returning null call tree"),S.generateOperationResult({didOperationSucceed:!0,result:new vr});let o=0;s.forEach(((e,r)=>{if(o=r+1,o===s.length)return;const t=s[o];e.addChildNode(t)}));const i=s[0],n=Y.getGuidGenerator().generateGuid();return S.generateOperationResult({didOperationSucceed:!0,result:new Qr(i,r,n,this.logger)})}),t,this.logger,!0).getResult()}constructor(e){this.logger=e,this.isConvertCalled=!1,this.convertedCallTree=new zr(this.logger)}}class Zr{convertStacksToCallTrees(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("ConvertStacksToCallTrees",(()=>(this.convertStacksCalled=!0,this.customProperties=e,this.callTrees=this.convertToCallTrees(r),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),t,this.logger)}retrieveConvertedCallTrees(){const e=S.generateOperationResult({didOperationSucceed:!1,result:[]});return C.startNew("RetrieveConvertedCallTrees",(()=>this.convertStacksCalled?(this.convertStacksCalled=!1,S.generateOperationResult({didOperationSucceed:!0,result:this.callTrees})):(this.logger.logConvertStacksToCallTreesNeverCalled(),S.generateOperationResult({didOperationSucceed:!1,result:[]}))),e,this.logger).getResult()}convertToCallTrees(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:[]});return C.startNew("ConvertToCallTrees",(()=>{const r=[],t=new Kr(this.logger);return e.forEach((e=>{t.convertStackToCallTree(e,this.isEventBasedPropertyBagMergingEnabled?{...this.customProperties}:this.customProperties),r.push(t.retrieveCallTree())})),S.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger).getResult()}constructor(e,r){this.logger=e,this.isEventBasedPropertyBagMergingEnabled=r,this.convertStacksCalled=!1,this.callTrees=[],this.customProperties={}}}function Xr(e,r,t){const s=S.generateOperationResult({didOperationSucceed:!1,result:{wasMergeSuccessful:!1,mergedCallTree:e}});return C.startNew("MergeTwoTrees",(t=>{const s=e.getRightMostNodesIterator(),o=r.getNodesToMergeIterator();if(!s.hasMore()||!o.hasMore()){const r="CurrentCallTreeIteratorEmptyProperty";t.addProperty(r,!s.hasMore());const i="CallTreeToMergeIteratorEmptyProperty";return t.addProperty(i,!o.hasMore()),S.generateOperationResult({didOperationSucceed:!0,result:{mergedCallTree:e,wasMergeSuccessful:!1}})}let i,n,a,l=0,d=!0;for(;s.hasMore()&&o.hasMore();){if(i=s.getNext(),n=o.getNext(),void 0===i||void 0===n||!$r(i.getFrame(),n.getFrame())){d=!1;break}{const e=i.getTotalExecutionTimeInMs()+(n.getLastObservedTimestamp()-i.getLastObservedTimestamp());i.setTotalExecutionTime(e),i.setLastObservedTimestamp(n.getLastObservedTimestamp()),i.addCount(n.getCount()),a=i,l+=1}}if(t.addProperty("MergeLength",l),0===l){const r="UnableToMerge";return t.addProperty(r,!0),S.generateOperationResult({didOperationSucceed:!0,result:{wasMergeSuccessful:!1,mergedCallTree:e}})}if(void 0===i&&void 0===n){const r="FullMerge";return t.addProperty(r,!0),S.generateOperationResult({didOperationSucceed:!0,result:{wasMergeSuccessful:!0,mergedCallTree:e}})}if(s.hasMore()&&!o.hasMore()&&void 0!==a){const r="TallerLeftCallTree";return t.addProperty(r,!0),a.addChildNode(new qr),S.generateOperationResult({didOperationSucceed:!0,result:{wasMergeSuccessful:!0,mergedCallTree:e}})}const c=void 0!==i&&void 0!==n&&!$r(i.getFrame(),n.getFrame())&&void 0!==a,u=!s.hasMore()&&o.hasMore()&&void 0!==a;if(c||u){if(c){const e="PartialMergeOfHeightBalancedCallTrees";t.addProperty(e,!0)}if(u){const e="TallerRightCallTreeMerge";t.addProperty(e,!0),d&&(n=o.getNext())}void 0!==a&&void 0!==n&&a.addChildNode(n)}return S.generateOperationResult({didOperationSucceed:!0,result:{wasMergeSuccessful:l>0,mergedCallTree:e}})}),s,t,!0).getResult()}class Yr{mergeCallTrees(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("MergeCallTrees",(()=>{if(e.length<2)return this.mergedCallTrees=e,S.generateOperationResult({didOperationSucceed:!0,result:void 0});this.didMergeCallTreesGetCalled=!0,this.mergedCallTrees=[];let r=0,t=1,s=!1;for(;t<e.length;){const o=e[r];s=Xr(o,e[t],this.logger).wasMergeSuccessful,s||(this.mergedCallTrees.push(o),r=t),t+=1}return s?this.mergedCallTrees.push(e[r]):this.mergedCallTrees.push(e[t-1]),S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveMergedCallTrees(){return this.didMergeCallTreesGetCalled?(this.didMergeCallTreesGetCalled=!1,this.mergedCallTrees):[]}constructor(e){this.logger=e,this.mergedCallTrees=[],this.didMergeCallTreesGetCalled=!1}}class et{filterCallTrees(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:void 0});return C.startNew("FilterCallTrees",(t=>(this.filterCallTreesCalled=!0,this.filteredCallTreesToReturn=[],t.addProperty("FilteringThresholdInMs",r),t.addProperty("NumberOfCallTreesPresent",e.length),e.forEach((e=>{e.getTotalExecutionTimeInMs()>r&&this.filteredCallTreesToReturn.push(e)})),t.addProperty("NumberOfCallTreesFiltered",this.filteredCallTreesToReturn.length),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),t,this.logger).getResult()}retrieveFilteredCallTrees(){const e=S.generateOperationResult({didOperationSucceed:!1,result:[]});return C.startNew("RetrieveFilteredCallTrees",(()=>this.filterCallTreesCalled?(this.filterCallTreesCalled=!1,S.generateOperationResult({didOperationSucceed:!0,result:this.filteredCallTreesToReturn})):S.generateOperationResult({didOperationSucceed:!1,result:[]})),e,this.logger).getResult()}constructor(e){this.logger=e,this.filteredCallTreesToReturn=[],this.filterCallTreesCalled=!1}}class rt{filterSamples(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("FilterSamples",(()=>{if(this.didFilterSamplesGetCalled=!0,this.filteredSamples=[],0===e.length)return this.logger.logEmptySamplesArrayPassedToFilter(),S.generateOperationResult({didOperationSucceed:!1,result:void 0});const t=e[0];for(const s of e){if(s.timestamp-t.timestamp>r)break;this.filteredSamples.push(s)}return S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),t,this.logger)}retrieveFilteredSamples(){return this.didFilterSamplesGetCalled?(this.didFilterSamplesGetCalled=!1,this.filteredSamples):[]}constructor(e){this.logger=e,this.didFilterSamplesGetCalled=!1,this.filteredSamples=[]}}class tt{serializeCallTree(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("SeriallizeCallTree",(()=>{this.serializeCallTreeWithPropertyBagAsPriority?this.serializedCallTree={totalExecutionTimeForTreeInMs:0,propertyBag:{},serializedFrames:[]}:this.serializedCallTree={serializedFrames:[],totalExecutionTimeForTreeInMs:0,propertyBag:{}};const r=this.shouldMakeSerializedCallTreesFullyReconstructible?e.getReconstructibleTreeIterator():e.getDepthFirstIterator();let t;for(;r.hasMore();)t=r.getNext(),void 0!==t&&this.serializedCallTree.serializedFrames.push(this.onVisit(t));return this.serializedCallTree.totalExecutionTimeForTreeInMs=e.getTotalExecutionTimeInMs(),this.serializedCallTree.propertyBag=e.getCustomProperties(),S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}onVisit(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:_e});return C.startNew("VisitNodeInCallTree",(()=>{const r={obfuscatedName:e.getFrame().name??"",startTimeInMs:e.getStartTimeInMs(),frameOnlyRunTimeInMs:e.getFrameOnlyExecutionTimeInMs(),subTreeRunTimeInMs:e.getSubTreeExecutionTimeInMs(),totalExecutionTimeInMs:e.getTotalExecutionTimeInMs(),hasChildrenNodes:e.getChildrenNodes().length>0,resourceInfo:{resourceName:this.shouldCompressSerializedCallTrees?this.resourceUrlKeyRetriever(e.getResourceName()):e.getResourceName(),lineNo:e.getFrame().line,columnNo:e.getFrame().column},frameOnlyCount:e.getFrameOnlyCount(),totalCount:e.getCount(),marker:e.getFrame().marker};return S.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger,!1).getResult()}retrieveSerializedTree(){return this.serializedCallTree}constructor(e,r,t,s,o){this.shouldMakeSerializedCallTreesFullyReconstructible=e,this.shouldCompressSerializedCallTrees=r,this.resourceUrlKeyRetriever=t,this.logger=s,this.serializeCallTreeWithPropertyBagAsPriority=o,this.serializedCallTree=void 0}}class st{serializeCallTrees(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew(he,(()=>{const r=new tt(this.shouldMakeSerializedCallTreesFullyReconstructible,this.shouldCompressSerializedCallTrees,this.resourceUrlKeyRetriever.bind(this),this.logger,this.serializeCallTreeWithPropertyBagAsPriority),t=e.map((e=>(r.serializeCallTree(e),r.retrieveSerializedTree())));return this.serializationResult={serializedCallTrees:t,resourceUrlsCompressionDictionary:Array.from(this.resourceUrlsCompressionDictionary,(([e,r])=>({url:e,index:r})))},S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveSerializedTrees(){return this.serializationResult}resourceUrlKeyRetriever(e){if(this.resourceUrlsCompressionDictionary.has(e))return this.resourceUrlsCompressionDictionary.get(e);const r=this.resourceUrlKeyIndex.toString();return this.resourceUrlsCompressionDictionary.set(e,r),this.resourceUrlKeyIndex++,r}constructor(e,r,t,s){this.shouldMakeSerializedCallTreesFullyReconstructible=e,this.shouldCompressSerializedCallTrees=r,this.logger=t,this.serializeCallTreeWithPropertyBagAsPriority=s,this.resourceUrlKeyIndex=0,this.resourceUrlsCompressionDictionary=new Map,this.serializationResult={serializedCallTrees:[],resourceUrlsCompressionDictionary:[]}}}class ot{processTrace(e){this.profilerTraceTransformer.transform(e);let r=this.profilerTraceTransformer.retrieveCallTrees();this.traceRequestingEventDrivenCallTreeHandler&&(this.traceRequestingEventDrivenCallTreeHandler.filterCallTreesByTraceRequestingEvents(r),this.traceRequestingEventDrivenCallTreeHandler.mergePropertyBagToEventBasedFilteredCallTrees(),r=this.traceRequestingEventDrivenCallTreeHandler.retrieveFilteredCallTrees()),this.serializer.serializeCallTrees(r),this.serializedCallTrees=this.serializer.retrieveSerializedTrees()}retrieveSerializedCallTrees(){return this.serializedCallTrees}constructor(e,r,t){this.profilerTraceTransformer=e,this.serializer=r,this.traceRequestingEventDrivenCallTreeHandler=t,this.serializedCallTrees={resourceUrlsCompressionDictionary:[],serializedCallTrees:[]}}}class it{isWebWorkerAPIAvailable(){return!!this.windowPropertyChecker.hasProperty("Worker")}constructor(e){this.windowPropertyChecker=e}}class nt{filterCallTrees(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:void 0});return C.startNew("FilterCallTreesFrames",(()=>(e.forEach((e=>{e.getFramesFilterer(r).filterFrames(r)})),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),t,this.logger).getResult()}constructor(e){this.logger=e}}class at{getCustomProperties(){return this.logger.logGetCustomPropertiesCalledOnNullJSCPUProfilerTrace(),{}}getResources(){return this.logger.logGetResourcesCalledOnNullJSCPUProfilerTrace(),[]}getFrames(){return this.logger.logGetFramesCalledOnNullJSCPUProfilerTrace(),[]}getStacks(){return this.logger.logGetStacksCalledOnNullJSCPUProfilerTrace(),[]}getSamples(){return this.logger.logGetSamplesCalledOnNullJSCPUProfilerTrace(),[]}getSamplesTrimmed(){return[]}getProfilerTraceStartTimestamp(){return this.logger.logGetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace(),-1}getProfilerProperties(){return this.logger.logGetProfilerPropertiesCalledOnNullJSCPUProfilerTrace(),ke}getElapsedProfilingTimeInMs(){return this.logger.logElapsedProfilingTimeMissingInTrace(),-1}constructor(e){this.logger=e}}class lt{removeQueryParamsFromResourceURLs(e){this.wasRemoveQueryParamsFromResourceURLsCalled=!0;const r=e.getResources(),t=[];r.forEach((e=>{this.urlQueryParamsRemover.removeQueryParams(e),t.push(this.urlQueryParamsRemover.retrieveQueryParamsRemovedURL())})),this.outputProfilerTrace=new Ie(e.getCustomProperties(),{samples:e.getSamples(),frames:e.getFrames(),resources:t,stacks:e.getStacks()},e.getProfilerTraceStartTimestamp(),e.getProfilerProperties(),e.getElapsedProfilingTimeInMs())}retrieveQueryParamsRemovedProfile(){return this.wasRemoveQueryParamsFromResourceURLsCalled?(this.wasRemoveQueryParamsFromResourceURLsCalled=!1,this.outputProfilerTrace):(this.logger.logRemoveQueryParamsFromResourceURLsNeverCalled(),new at(this.logger))}constructor(e,r){this.urlQueryParamsRemover=e,this.logger=r,this.wasRemoveQueryParamsFromResourceURLsCalled=!1,this.outputProfilerTrace=new at(r)}}class dt{mergeCustomProperties(e){const r={};return e.forEach((e=>{for(const[t,s]of Object.entries(e))r[t]=s})),r}}!function(e){e[e.ProcessTrace=0]="ProcessTrace",e[e.CompressSerializedCallTree=1]="CompressSerializedCallTree"}(Mr||(Mr={}));class ct{onProfilerEvent(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("OnProfilerEvent",(r=>null==e?(this.params.logger.logNullOrUndefinedProfilerEvent(),S.generateOperationResult({didOperationSucceed:!1,result:void 0})):(r.addProperty("ProfilerEventId",e.eventId),e.eventId===Se.ProfilerStopped?null==e.eventData?this.params.logger.logNullOrUndefinedProfilerTrace():this.onProfilerStopped(e.eventData):this.params.logger.logUnknownProfilerEventId(e.eventId),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r,this.params.logger)}onProfilerStopped(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("OnProfilerStopped",(()=>{const r=e.profilerTrace.getProfilerProperties().profilingIntervalInMs;if(null!=r&&this.params.documentVisibilityChecker.wasDocumentHiddenDuringTimeRange(r)&&!this.params.shouldProcessProfileCapturedInAHiddenDocument)return this.params.logger.logNotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling(),S.generateOperationResult({didOperationSucceed:!0,result:void 0});if(!this.params.shouldProcessProfileCapturedWhileUserIsIdle&&e.documentEventsCountBeforeProfiling&&ee()===e.documentEventsCountBeforeProfiling)return this.params.logger.logNotProcessingCapturedTraceDueToUserBeingIdle(),S.generateOperationResult({didOperationSucceed:!0,result:void 0});this.params.shouldKeepQueryParamsInResourceURLs||(this.params.profileResourceURLsQueryParamsRemover.removeQueryParamsFromResourceURLs(e.profilerTrace),e.profilerTrace=this.params.profileResourceURLsQueryParamsRemover.retrieveQueryParamsRemovedProfile()),this.params.shouldLogRawProfilerTrace&&this.params.logger.logProfilerTrace(e.profilerTrace,this.params.profilerTraceLoggingChunkSize);const t=this.params.customPropertiesExtractor.extractCustomProperties(this.params.deObfuscationRequestBodyPropertiesRetriever),s=this.params.customPropertiesExtractor.extractCustomProperties(this.params.deObfuscationRequestQueryParamsRetriever);return this.params.shouldAllowForConditionalProfileProcessingAndSending?(e.traceRequestingEvents&&e.traceRequestingEvents.length>0&&this.traceRequestingEvents.push(...e.traceRequestingEvents),this.storedProfiles.push({onProfilerStoppedEventData:e,deObfuscationRequestBodyProperties:t,deObfuscationRequestQueryParams:s}),this.traceRequestingEvents.length>0&&this.processStoredProfilerTraces(),this.removeExpiredProfiles(),S.generateOperationResult({didOperationSucceed:!0,result:void 0})):(this.processProfilerTraces(e,t,s),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))}),r,this.params.logger)}processProfilerTraces(e,r,t){this.params.shouldProcessProfileInMainEventLoop?this.useMainEventLoopForProfilerTraceProcessing(e,r,t):this.useWebWorkForProfilerTraceProcessing(e,r,t)}processStoredProfilerTraces(){const e=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("ProcessStoredProfilerTraces",(()=>(this.storedProfiles.forEach((e=>{if(!e)return;const r=e.onProfilerStoppedEventData.profilerTrace,t=r.getProfilerTraceStartTimestamp(),s=t+r.getElapsedProfilingTimeInMs();this.isAnyTraceRequestingEventInTraceRange(t,s)&&this.processProfilerTraces(e.onProfilerStoppedEventData,e.deObfuscationRequestBodyProperties,e.deObfuscationRequestQueryParams)})),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.params.logger)}isAnyTraceRequestingEventInTraceRange(e,r){return this.traceRequestingEvents.some((t=>t.eventStartTime>=e&&t.eventStartTime<=r||t.eventEndTime>=e&&t.eventEndTime<=r))}removeExpiredProfiles(){const e=performance.now();for(;this.storedProfiles.length>0&&this.isProfileExpired(this.storedProfiles[0],e);)this.storedProfiles.shift()}isProfileExpired(e,r){return r-e.onProfilerStoppedEventData.profilerTrace.getProfilerTraceStartTimestamp()>this.params.storedProfilesRetentionPeriodInMs}useMainEventLoopForProfilerTraceProcessing(e,r,t){this.params.shouldSendProfilesForDeobfuscationImmediately?this.processAndSendTrace(e,r,t):this.params.idleTimeJobScheduler.scheduleJobForIdleTime((()=>{this.processAndSendTrace(e,r,t)}))}extractAndMergeCallTreeCustomProperties(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:[]});return C.startNew("ExtractAndMergeCallTreeCustomProperties",(()=>{const t=new Ye(this.params.logger),s=new dt;return e.forEach((e=>{const o=[];r.forEach((r=>{o.push(t.extractCustomPropertiesV2(r,e.serializedFrames[0]))})),o.push(e.propertyBag);const i=s.mergeCustomProperties(o);e.propertyBag=i})),S.generateOperationResult({didOperationSucceed:!0,result:e})}),t,this.params.logger).getResult()}applyCallTreeCustomFiltering(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:[]});return C.startNew("ApplyCallTreeCustomFilterers",(()=>{let t=e;r.forEach((e=>{t=t.filter((r=>e.filter(r)))}));const s=e.length-t.length;return this.params.logger.logNumberOfCallTreesFiltererByCustomFilterers(s,e.length),S.generateOperationResult({didOperationSucceed:!0,result:t})}),t,this.params.logger).getResult()}useWebWorkForProfilerTraceProcessing(e,r,t){const s=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew(fe,(()=>{if(!this.params.webWorkerAPIAvailabilityChecker.isWebWorkerAPIAvailable())return this.params.logger.logWebWorkerAPINotAvailable(),this.useMainEventLoopForProfilerTraceProcessing(e,r,t),S.generateOperationResult({didOperationSucceed:!1,result:void 0});if(this.profilerTraceProcessingWorker||(this.profilerTraceProcessingWorker=this.params.profilerTraceProcessingWorkerFactory.getProfilerTraceProcessingWorker()),!this.profilerTraceProcessingWorker.startWorker())return this.useMainEventLoopForProfilerTraceProcessing(e,r,t),S.generateOperationResult({didOperationSucceed:!1,result:void 0});const s={traceProcessingInfo:{trace:e.profilerTrace,shouldKeepSamplesOutsideOfProfilingInterval:this.params.shouldKeepSamplesOutsideOfProfilingInterval,shouldRecordExpandedTimeStamps:this.params.shouldRecordExpandedTimeStamps,callTreeFilteringThresholdInMs:this.params.callTreeFilteringThresholdInMs,frameTotalExecutionTimeFilteringThresholdInMs:this.params.frameTotalExecutionTimeFilteringThresholdInMs,operationLogMessageFilteringCriteria:this.params.operationLogMessageFilteringCriteria,traceId:this.profilerTraceIdNumber,shouldMakeSerializedCallTreesFullyReconstructible:this.params.shouldMakeSerializedCallTreesFullyReconstructible,serializeCallTreeWithPropertyBagAsPriority:this.params.serializeCallTreeWithPropertyBagAsPriority,shouldRecordFrameCounts:this.params.shouldRecordFrameCounts,shouldCompressSerializedCallTrees:this.params.shouldCompressSerializedCallTrees,shouldAllowForConditionalProfileProcessingAndSending:this.params.shouldAllowForConditionalProfileProcessingAndSending,isEventBasedPropertyBagAdditionEnabled:this.params.isEventBasedPropertyBagAdditionEnabled,shouldExpandMarkers:this.params.shouldExpandMarkers,traceRequestingEvents:this.traceRequestingEvents},traceProcessingCompletionCallback:this.webWorkerOnCompleteCallback,traceProcessingErrorCallback:this.webWorkerOnErrorCallback,callTreeCustomPropertiesRetrievers:e.callTreeCustomPropertiesRetrievers,callTreeCustomFilterers:e.callTreeCustomFilterers};this.profilerTraceIdNumber+=1;const o={id:Mr.ProcessTrace,requestParams:s};return this.profilerTraceProcessingWorker.processRequest(o)||(this.params.logger.logProcessRequestForProcessTraceFailed(),this.useMainEventLoopForProfilerTraceProcessing(e,r,t)),S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),s,this.params.logger)}filterOutProcessedEvents(e){if(e){const r=e.getProfilerTraceStartTimestamp()+e.getElapsedProfilingTimeInMs();this.traceRequestingEvents=this.traceRequestingEvents.filter((e=>e.eventEndTime>=r))}}constructor(e){this.params=e,this.processAndSendTrace=(e,r,t)=>{this.params.shouldAllowForConditionalProfileProcessingAndSending&&(this.params.traceProcessor.traceRequestingEventDrivenCallTreeHandler?this.params.traceProcessor.traceRequestingEventDrivenCallTreeHandler.setFilteringEvents(this.traceRequestingEvents):this.params.logger.logTraceRequestingEventDrivenCallTreeFiltererNotSet());const s=e.profilerTrace;this.params.traceProcessor.processTrace(s),this.params.shouldAllowForConditionalProfileProcessingAndSending&&s&&this.traceRequestingEvents.length>0&&this.filterOutProcessedEvents(s);const o=this.params.traceProcessor.retrieveSerializedCallTrees();let i=o.serializedCallTrees;i=this.extractAndMergeCallTreeCustomProperties(i,e.callTreeCustomPropertiesRetrievers),e.callTreeCustomFilterers.length>0&&(i=this.applyCallTreeCustomFiltering(i,e.callTreeCustomFilterers)),this.params.serializedCallTreesToJSONStringsConverter.convertToJSONStrings(i);const n=this.params.serializedCallTreesToJSONStringsConverter.retrieveConvertedJSONStrings();this.logSerializedCallTrees(n,r,o.resourceUrlsCompressionDictionary),this.sendCallTrees(n,r,t,o.resourceUrlsCompressionDictionary)},this.webWorkerOnCompleteCallback=(e,r,t,s,o,i,n)=>{let a=this.extractAndMergeCallTreeCustomProperties(e,s);o.length>0&&(a=this.applyCallTreeCustomFiltering(a,o)),this.params.serializedCallTreesToJSONStringsConverter.convertToJSONStrings(a);const l=this.params.serializedCallTreesToJSONStringsConverter.retrieveConvertedJSONStrings();this.params.shouldAllowForConditionalProfileProcessingAndSending&&n&&this.traceRequestingEvents.length>0&&this.filterOutProcessedEvents(n),this.logSerializedCallTrees(l,r,i),this.sendCallTrees(l,r,t,i)},this.webWorkerOnErrorCallback=(e,r,t,s,o)=>{this.useMainEventLoopForProfilerTraceProcessing({profilerTrace:e.trace,callTreeCustomPropertiesRetrievers:s,callTreeCustomFilterers:o},r,t)},this.logSerializedCallTrees=(e,r,t)=>{this.params.shouldLogSerializedCallTrees?0!==e.length?e.forEach((e=>{let s="";if(this.params.shouldCompressSerializedCallTrees){const o={resourceUrlsCompressionDictionary:t,serializedCallTree:e,propertyBag:r};s=JSON.stringify(o),this.params.stringCompressorFactory.generateStringCompressor().compress(s,(e=>{const r={compressionFormatVersion:1,compressedData:e},t=JSON.stringify(r);this.params.logger.logSerializedCallTrees(t)}),(()=>{const t={serializedCallTree:e,propertyBag:r};s=JSON.stringify(t),this.params.logger.logSerializedCallTrees(s)}))}else{const t={serializedCallTree:e,propertyBag:r};s=JSON.stringify(t),this.params.logger.logSerializedCallTrees(s)}})):this.params.logger.logNoSerializedCallTreesToLog():this.params.logger.logSkippingLoggingSerializedCallTrees()},this.sendCallTrees=(e,r,t,s)=>{this.params.shouldSendSerializedCallTreesToServer&&(0!==e.length?this.params.callTreesSender.sendCallTreesToService(e,this.params.deObfuscationInfo.deObfuscationEndpoint,t,r,s):this.params.logger.logNoCallTreesToSend())},this.profilerTraceIdNumber=1,this.storedProfiles=[],this.traceRequestingEvents=[]}}class ut{createObserver(){return new ct(this.observerInitParams)}constructor(e){this.observerInitParams=e}}class gt{convertToJSONString(e){this.convertedJSONString=JSON.stringify(this.shouldCompressSerializedCallTrees?this.convertSerializedCallTreeToCompressedCallTree(e):e)}retrieveConvertedJSONString(){if(null==this.convertedJSONString)return this.logger.logConvertToJSONStringWasNeverCalled(),"BadSerializedCallTreeJSONString";const e=this.convertedJSONString;return this.convertedJSONString=void 0,e}convertSerializedCallTreeToCompressedCallTree(e){return{0:e.serializedFrames.map((e=>({0:e.startTimeInMs,1:e.frameOnlyRunTimeInMs,2:e.subTreeRunTimeInMs,3:e.totalExecutionTimeInMs,4:e.obfuscatedName,5:e.hasChildrenNodes,6:{0:e.resourceInfo.resourceName,1:e.resourceInfo.lineNo,2:e.resourceInfo.columnNo},7:e.frameOnlyCount,8:e.totalCount}))),1:e.totalExecutionTimeForTreeInMs,2:e.propertyBag}}constructor(e,r){this.shouldCompressSerializedCallTrees=e,this.logger=r,this.convertedJSONString=void 0}}class mt{convertToJSONStrings(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("ConvertSerializedCallTreesToJSONStrings",(()=>(this.convertedJSONStrings=e.map((e=>{const r=new gt(this.shouldCompressSerializedCallTrees,this.logger);return r.convertToJSONString(e),r.retrieveConvertedJSONString()})),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r)}retrieveConvertedJSONStrings(){return null==this.convertedJSONStrings?[]:this.convertedJSONStrings}constructor(e,r){this.shouldCompressSerializedCallTrees=e,this.logger=r,this.convertedJSONStrings=[]}}class pt{start(e){this.initParams.logger.logWebWorkerSource(e);const r=new Blob([e],{type:"application/javascript"});return this.worker=new Worker(this.initParams.urlWrapper.createObjectURL(r)),null!=this.worker?(this.initParams.logger.logWebWorkerCreationSucceeded(),!0):(this.initParams.logger.logWebWorkerCreationFailed(),!1)}postMessage(e){null!=this.worker?this.worker.postMessage(e):this.initParams.logger.logWorkerNotRunning()}addEventListener(e,r){null!=this.worker?this.worker.addEventListener(e,r):this.initParams.logger.logWorkerNotRunning()}onError(e){null!=this.worker?this.worker.onerror=e:this.initParams.logger.logWorkerNotRunning()}terminate(){null!=this.worker?this.worker.terminate():this.initParams.logger.logWorkerNotRunning()}constructor(e){this.initParams=e,this.worker=void 0}}class ht{createWebWorkerWrapper(){return new pt(this.initParams)}constructor(e){this.initParams=e}}!function(e){e[e.ProcessTrace=0]="ProcessTrace",e[e.TraceProcessingComplete=1]="TraceProcessingComplete",e[e.ErrorEncounteredInWorker=2]="ErrorEncounteredInWorker",e[e.CompressSerializedProfile=3]="CompressSerializedProfile",e[e.SerializedProfileCompressionComplete=4]="SerializedProfileCompressionComplete",e[e.SerializedProfileCompressionFailed=5]="SerializedProfileCompressionFailed"}(Rr||(Rr={})),function(e){e[e.UnableToInitializeProfilerTraceProcessingWorker=0]="UnableToInitializeProfilerTraceProcessingWorker",e[e.ExceptionEncounteredInWorker=1]="ExceptionEncounteredInWorker",e[e.InvalidMessageReceivedByWorker=2]="InvalidMessageReceivedByWorker",e[e.InvalidProcessTraceMessageReceivedByWorker=3]="InvalidProcessTraceMessageReceivedByWorker",e[e.InvalidTraceReceivedByWorker=4]="InvalidTraceReceivedByWorker",e[e.UnknownMessageIdReceivedByWorker=5]="UnknownMessageIdReceivedByWorker",e[e.InvalidCompressSerializedProfileMessageReceivedByWorker=6]="InvalidCompressSerializedProfileMessageReceivedByWorker"}(_r||(_r={}));class Tt{getWorkerId(){return this.workerLifeCycle?this.workerLifeCycle.workerId:0}startWorker(){if(this.workerStarted)return this.workerInitParams.logger.logWebWorkerAlreadyStarted(),!0;this.worker=this.workerInitParams.webWorkerWrapperFactory.createWebWorkerWrapper();const e=`try{\n      importScripts('${this.workerInitParams.uriEncoderFactory.encodeURI(this.workerInitParams.workerSourceURL)}');\n    } catch(exception) {\n     setTimeout(() => {\n      self.postMessage({\n          id: ${Rr.ErrorEncounteredInWorker},\n          data: {\n            errorId: ${_r.UnableToInitializeProfilerTraceProcessingWorker},\n            errorLogs: {\n              logs: []\n            },\n            additionalErrorData: JSON.stringify(\n              exception,\n              Object.getOwnPropertyNames(exception)\n            ),\n          }\n        });\n      }, 1000 /* 1 second delay in sending a message because the connection might not have been established */ );\n    }`;return this.worker.start(e)?(this.workerStarted=!0,this.worker.addEventListener("message",this.onMessageReceived.bind(this)),this.worker.onError(this.errorHandler.bind(this)),!0):(this.workerInitParams.logger.logUnableToBootWebWorker(),!1)}processRequest(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:!1});return C.startNew("ProfilerTraceProcessingWorkerProcessRequest",(r=>{if(null==this.worker||!this.workerStarted)return this.logger.logWorkerInstanceNotFound(),S.generateOperationResult({didOperationSucceed:!0,result:!1});if(this.workerCurrentlyProcessingRequest)return this.pendingRequestsToProcess.queue(e),S.generateOperationResult({didOperationSucceed:!0,result:!0});switch(this.currentRequestBeingProcessed=e,r.addProperty("WebWorkerRequestID",e.id),e.id){case Mr.ProcessTrace:{const r=e.requestParams;void 0===this.isFixForWorkerQueuesApplied&&(this.isFixForWorkerQueuesApplied=r.traceProcessingInfo.shouldAllowForConditionalProfileProcessingAndSending),this.processTrace(r)}break;case Mr.CompressSerializedCallTree:{const r=e.requestParams;this.compressSerializedCallTree(r)}break;default:return this.logger.logUnknownWebWorkerRequestId(e.id),S.generateOperationResult({didOperationSucceed:!0,result:!1})}return S.generateOperationResult({didOperationSucceed:!0,result:!0})}),r,this.logger).getResult()}isValidMessageFromWorker(e){return null==e?(this.logger.logMessageFromWorkerIsNullorUndefined(),!1):"object"!=typeof e?(this.logger.logMessageFromWorkerNotObject(),!1):"id"in e?"data"in e||(this.logger.logDataNotFoundInMessageFromWorker(),!1):(this.logger.logIdNotFoundInMessageFromWorker(),!1)}processTrace(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("ProfilerTraceProcessingWorkerImplProcessTrace",(()=>{if(null==this.worker||!this.workerStarted)return this.workerInitParams.logger.logWorkerInstanceNotFound(),S.generateOperationResult({didOperationSucceed:!1,result:void 0});this.workerCurrentlyProcessingRequest=!0,this.workerLifeCycle?.onWorkerBusy(this.workerLifeCycle.workerId);const r={id:Rr.ProcessTrace,data:e.traceProcessingInfo};return this.worker.postMessage(r),S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.workerInitParams.logger)}compressSerializedCallTree(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("ProfilerTraceProcessingWorkerImplCompressSerializedCallTree",(()=>{if(null==this.worker||!this.workerStarted)return this.logger.logWorkerInstanceNotFound(),S.generateOperationResult({didOperationSucceed:!1,result:void 0});this.workerCurrentlyProcessingRequest=!0,this.workerLifeCycle?.onWorkerBusy(this.workerLifeCycle.workerId),this.currentRequestBeingProcessed={id:Mr.CompressSerializedCallTree,requestParams:e};const r={id:Rr.CompressSerializedProfile,data:e.compressionInfo};return this.worker.postMessage(r),S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}traceProcessingSuccessHandler(e){const r=e.data;"serializedCallTrees"in r||this.logger.logSerializedCallTreesMissingInProcessorResult(),"logs"in r||this.logger.logLogsMissingInProcessorResult();const t=r,s=this.currentRequestBeingProcessed?.requestParams;void 0===s.traceProcessingCompletionCallback&&this.logger.logUndefinedWebWorkerCompletionCallback(),t.logs.forEach((e=>{this.handleLogMessageFromWorker(e)}));const[o,i]=this.getDeObfuscationRequestPropertiesAndQueryParams();s.traceProcessingCompletionCallback(t.serializedCallTrees,o,i,s.callTreeCustomPropertiesRetrievers,s.callTreeCustomFilterers,t.resourceUrlsCompressionDictionary,s.traceProcessingInfo.shouldAllowForConditionalProfileProcessingAndSending?s.traceProcessingInfo.trace:void 0)}traceProcessingErrorHandler(){const e=this.currentRequestBeingProcessed?.requestParams;if(void 0===e.traceProcessingErrorCallback)return void this.logger.logUndefinedErrorCallback();if(void 0===e.traceProcessingInfo)return void this.logger.logUndefinedTraceProcessingInfoToReturnBack();const[r,t]=this.getDeObfuscationRequestPropertiesAndQueryParams();e.traceProcessingErrorCallback(e.traceProcessingInfo,r,t,e.callTreeCustomPropertiesRetrievers,e.callTreeCustomFilterers)}compressSerializedCallTreeSuccessHandler(e){const r=e.data;if(!("outputString"in r))return void this.logger.logOutputStringMissingInMessageFromWorker();if(!("logs"in r))return void this.logger.logLogsMissingInMessageFromWorker();if(null==this.currentRequestBeingProcessed)return void this.logger.logCurrentTraceBeingProcessedNullOrUndefined();const t=r;t.logs.forEach((e=>{this.handleLogMessageFromWorker(e)})),this.currentRequestBeingProcessed.requestParams.compressionCompletionCallback(t.outputString)}compressSerializedCallTreeErrorHandler(){const e=this.currentRequestBeingProcessed?.requestParams;void 0!==e.compressionErrorCallback?void 0!==e.compressionInfo?e.compressionErrorCallback(e.compressionInfo.serializedProfile):this.logger.logUndefinedCompressionInfoToReturnBack():this.logger.logUndefinedErrorCallback()}handleKnownWebWorkerError(e){if(null==e)return void this.logger.logMessageFromWorkerIsNullorUndefined();const r=e.data;switch(this.logErrorLogsFromWorker(r),r.errorId){case _r.UnableToInitializeProfilerTraceProcessingWorker:this.handleWebWorkerInitializationError(e);break;case _r.ExceptionEncounteredInWorker:this.logger.logExceptionEncounteredInWorker(r.additionalErrorData);break;case _r.InvalidMessageReceivedByWorker:this.logger.logInvalidMessageReceivedByWorker();break;case _r.InvalidProcessTraceMessageReceivedByWorker:this.logger.logInvalidProcessTraceMessageReceivedByWorker();break;case _r.InvalidTraceReceivedByWorker:this.logger.logInvalidTraceReceivedByWorker();break;case _r.UnknownMessageIdReceivedByWorker:this.logger.logUnknownMessageIdReceivedByWorker();break;case _r.InvalidCompressSerializedProfileMessageReceivedByWorker:this.logger.logInvalidCompressSerializedProfileMessageReceivedByWorker();break;default:this.logger.logUnknownWebWorkerErrorId(r.errorId)}if(null!=this.currentRequestBeingProcessed)switch(this.currentRequestBeingProcessed.id){case Mr.ProcessTrace:this.traceProcessingErrorHandler();break;case Mr.CompressSerializedCallTree:this.compressSerializedCallTreeErrorHandler();break;default:this.logger.logUnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError(this.currentRequestBeingProcessed.id)}else this.logger.logCurrentTraceBeingProcessedNullOrUndefined()}logErrorLogsFromWorker(e){const r=e.errorLogs;"logs"in r&&r.logs.forEach((e=>{this.handleLogMessageFromWorker(e)}))}handleWebWorkerInitializationError(e){this.logger.logWebWorkerInitializationError(e.data.additionalErrorData),this.terminateWorker()}terminateWorker(){this.worker?(this.worker.terminate(),this.workerLifeCycle?.onWorkerTerminated(this.workerLifeCycle.workerId),this.worker=void 0,this.workerStarted=!1,this.currentRequestBeingProcessed=void 0,this.workerCurrentlyProcessingRequest=!1,this.logger.logWebWorkerTerminated()):this.logger.logWorkerInstanceNotFound()}handleLogMessageFromWorker(e){this.workerInitParams.logMessageProcessor.processLogMessage(e)}getDeObfuscationRequestPropertiesAndQueryParams(){const e=new Ye(this.workerInitParams.logger);return[e.extractCustomProperties(this.workerInitParams.deObfuscationRequestBodyPropertiesRetriever),e.extractCustomProperties(this.workerInitParams.deObfuscationRequestQueryParamsRetriever)]}processNextStoredWebWorkerRequestIfAny(){if(this.pendingRequestsToProcess.length()>0){const e=this.pendingRequestsToProcess.peek();if(this.isFixForWorkerQueuesApplied&&(this.currentRequestBeingProcessed=e),null==e)return;e.id===Mr.ProcessTrace?this.processTrace(e.requestParams):this.logger.logUnknownStoredWebWorkerRequestId(e.id),this.pendingRequestsToProcess.dequeue()}}constructor(e,r){this.workerInitParams=e,this.workerLifeCycle=r,this.onMessageReceived=e=>{const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew(Te,(r=>{const t=e.data;if(!this.isValidMessageFromWorker(t))return S.generateOperationResult({didOperationSucceed:!1,result:void 0});if(r.addProperty("MessageReceived",t.id),t.id===Rr.ErrorEncounteredInWorker)return this.handleKnownWebWorkerError(t),this.workerLifeCycle?.onWorkerIdle(this.workerLifeCycle.workerId),this.workerCurrentlyProcessingRequest=!1,this.currentRequestBeingProcessed=void 0,this.processNextStoredWebWorkerRequestIfAny(),S.generateOperationResult({didOperationSucceed:!0,result:void 0});if(null==this.currentRequestBeingProcessed)return this.workerInitParams.logger.logCurrentTraceBeingProcessedNullOrUndefined(),S.generateOperationResult({didOperationSucceed:!1,result:void 0});switch(t.id){case Rr.TraceProcessingComplete:this.traceProcessingSuccessHandler(t);break;case Rr.SerializedProfileCompressionComplete:this.compressSerializedCallTreeSuccessHandler(t);break;case Rr.SerializedProfileCompressionFailed:this.compressSerializedCallTreeErrorHandler();break;default:this.workerInitParams.logger.logUnknownMessageFromWorker(t.id)}return this.workerLifeCycle?.onWorkerIdle(this.workerLifeCycle.workerId),this.workerCurrentlyProcessingRequest=!1,this.currentRequestBeingProcessed=void 0,this.processNextStoredWebWorkerRequestIfAny(),S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.workerInitParams.logger)},this.errorHandler=e=>{const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("ProfilerTraceProcessingWorkerImplErrorHandler",(r=>{if(this.logger.logWebWorkerError(JSON.stringify(e,Object.getOwnPropertyNames(e))),null==this.currentRequestBeingProcessed)return this.logger.logCurrentTraceBeingProcessedNullOrUndefined(),S.generateOperationResult({didOperationSucceed:!1,result:void 0});const t=this.currentRequestBeingProcessed;switch(r.addProperty("WebWorkerRequestIDWhichEncounteredUnknownError",t.id),t.id){case Mr.ProcessTrace:this.traceProcessingErrorHandler();break;case Mr.CompressSerializedCallTree:this.compressSerializedCallTreeErrorHandler();break;default:this.logger.logUnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError(t.id)}return this.terminateWorker(),S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.workerInitParams.logger)},this.worker=void 0,this.workerStarted=!1,this.pendingRequestsToProcess=G.createQueue(),this.workerCurrentlyProcessingRequest=!1,this.currentRequestBeingProcessed=void 0,this.logger=e.logger,this.isFixForWorkerQueuesApplied=void 0}}class ft{getProfilerTraceProcessingWorker(){if(void 0===this.singletonWebWorkerInstance){const e=new Tt(this.workerInitParams,{workerId:0,onWorkerTerminated:this.onWorkerTerminated.bind(this),onWorkerIdle:()=>{},onWorkerBusy:()=>{}});return this.singletonWebWorkerInstance=e,e}return this.singletonWebWorkerInstance}onWorkerTerminated(){this.singletonWebWorkerInstance=void 0}constructor(e){this.workerInitParams=e,this.singletonWebWorkerInstance=void 0}}class Pt{startWorker(){return!0}processRequest(e){return this.storedRequest=e,!0}getWorkerId(){return 0}getStoredRequest(){return this.storedRequest}constructor(){this.storedRequest=void 0}}class Ct{getProfilerTraceProcessingWorker(){if(this.idleWorkers.size>0)for(const[e,r]of this.idleWorkers)return this.idleWorkers.delete(e),this.busyWorkers.set(e,r),r;if(this.workerId<this.params.maxNumberOfWorkersAllowed){const e=new Tt(this.params,{workerId:this.workerId,onWorkerIdle:this.markBusyWorkerAsIdle.bind(this),onWorkerBusy:this.markIdleWorkerAsBusy.bind(this),onWorkerTerminated:this.markWorkerAsTerminated.bind(this)});return this.busyWorkers.set(this.workerId,e),this.workerId++,e}const e=new Pt;return this.futureWorkers.queue(e),e}markIdleWorkerAsBusy(e){const r=this.idleWorkers.get(e);r?(this.idleWorkers.delete(e),this.busyWorkers.set(e,r)):this.params.logger.logWorkerIDBeingSetToBusyNotPresentInIdleWorkers(e)}markBusyWorkerAsIdle(e){const r=this.busyWorkers.get(e);if(r)if(this.busyWorkers.delete(e),this.futureWorkers.length()>0){let e=this.futureWorkers.peek();for(;null!=e;){const t=e.getStoredRequest();if(null!=t){r.processRequest(t),this.futureWorkers.dequeue();break}this.futureWorkers.dequeue(),e=this.futureWorkers.peek()}}else this.idleWorkers.set(e,r);else this.params.logger.logWorkerIDBeingSetToIdleNotPresentInBusyWorkers(e)}markWorkerAsTerminated(e){this.idleWorkers.has(e)&&this.busyWorkers.has(e)||this.params.logger.logUnknownWorkerIDBeingTerminated(e),this.idleWorkers.has(e)&&this.idleWorkers.delete(e),this.busyWorkers.has(e)&&this.busyWorkers.delete(e)}constructor(e){this.params=e,this.workerId=0,this.idleWorkers=new Map,this.busyWorkers=new Map,this.futureWorkers=G.createQueue()}}class St{sendCallTreeToService(e,r,t,s){const o=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("SendIndividualCallTree",(o=>{o.addProperty("compressedCallTree",this.shouldCompressSerializedCallTrees);let i="";if(this.shouldCompressSerializedCallTrees){const o={resourceUrlsCompressionDictionary:s,serializedCallTree:e,propertyBag:t};i=JSON.stringify(o),this.stringCompressor.compress(i,(e=>{const t={compressionFormatVersion:1,compressedData:e};this.sendRequest(r,JSON.stringify(t))}),(s=>{this.logger.logFailedToCompressIndividualCallTreeDeobfuscationRequest();const o={serializedCallTree:e,propertyBag:t};i=JSON.stringify(o),this.sendRequest(r,i)}))}else{const s={serializedCallTree:e,propertyBag:t};i=JSON.stringify(s),this.sendRequest(r,i)}return S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),o,this.logger)}sendRequest(e,r){if(this.shouldUseSendBeaconForSendingCallTrees)this.sendBeaconScheduler.sendBeacon({url:e,data:r});else{const t=this.xmlHTTPRequestWrapperFactory.generateXMLHTTPRequestWrapper();t.open("POST",e,!0),t.send(r)}}constructor(e,r,t,s,o,i){this.sendBeaconScheduler=e,this.xmlHTTPRequestWrapperFactory=r,this.shouldUseSendBeaconForSendingCallTrees=t,this.shouldCompressSerializedCallTrees=s,this.stringCompressor=o,this.logger=i}}class vt{sendCallTrees(e,r,t,s){const o=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("SendMultipleCallTrees",(o=>{o.addProperty("compressedCallTrees",this.shouldCompressSerializedCallTrees);let i="";if(this.shouldCompressSerializedCallTrees){const o={resourceUrlsCompressionDictionary:s,serializedCallTrees:e,propertyBag:t};i=JSON.stringify(o),this.stringCompressor.compress(i,(e=>{const t={compressionFormatVersion:1,compressedData:e};this.sendRequest(r,JSON.stringify(t))}),(s=>{this.logger.logFailedToCompressMultipleCallTreesDeobfuscationRequest();const o={serializedCallTrees:e,propertyBag:t};i=JSON.stringify(o),this.sendRequest(r,i)}))}else{const s={serializedCallTrees:e,propertyBag:t};i=JSON.stringify(s),this.sendRequest(r,i)}return S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),o,this.logger)}sendRequest(e,r){if(this.shouldUseSendBeaconForSendingCallTrees)this.sendBeaconScheduler.sendBeacon({url:e,data:r});else{const t=this.xmlHTTPRequestWrapperFactory.generateXMLHTTPRequestWrapper();t.open("POST",e,!0),t.send(r)}}constructor(e,r,t,s,o,i){this.sendBeaconScheduler=e,this.xmlHTTPRequestWrapperFactory=r,this.shouldUseSendBeaconForSendingCallTrees=t,this.shouldCompressSerializedCallTrees=s,this.stringCompressor=o,this.logger=i}}class It{sendCallTreesToService(e,r,t,s,o){const i=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew(pe,(i=>{i.addProperty("NumberOfCallTreesToSend",e.length);const n=function(e,r){let t=e;return Object.entries(r).forEach(((e,r)=>{0===r?t.includes("?")?t+="&":t+="?":t+="&";const[s,o]=e;t+=`${s}=${o}`})),t}(r,t);return this.shouldSendAllCallTreesFromProfileInASingleRequest?this.sendAllCallTreesInASingleRequest(e,n,s,o):this.sendCallTreesIndividually(e,n,s,o),S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),i,this.logger)}sendCallTreesIndividually(e,r,t,s){const o=new St(this.sendBeaconScheduler,this.xmlHTTPRequestWrapperFactory,this.shouldUseSendBeaconForSendingCallTrees,this.shouldCompressSerializedCallTrees,this.stringCompressor,this.logger);e.forEach((e=>{o.sendCallTreeToService(e,r,t,s)}))}sendAllCallTreesInASingleRequest(e,r,t,s){new vt(this.sendBeaconScheduler,this.xmlHTTPRequestWrapperFactory,this.shouldUseSendBeaconForSendingCallTrees,this.shouldCompressSerializedCallTrees,this.stringCompressor,this.logger).sendCallTrees(e,r,t,s)}constructor(e,r,t,s,o,i,n){this.sendBeaconScheduler=e,this.shouldSendAllCallTreesFromProfileInASingleRequest=r,this.xmlHTTPRequestWrapperFactory=t,this.shouldUseSendBeaconForSendingCallTrees=s,this.shouldCompressSerializedCallTrees=o,this.stringCompressor=i,this.logger=n}}class kt{compress(e,r,t){this.logger.logNullStringCompressorInvoked()}constructor(e){this.logger=e}}class bt{isCompressionStreamAPIAvailable(){return null!=typeof CompressionStream}}class Ot{compress(e,r,t){const s=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("CompressStringWithGZIPCompressor",(()=>{let s=!0;if(!this.compressionStreamsAPIAvailabilityChecker.isCompressionStreamAPIAvailable())return this.logger.logCompressionStreamAPIIsNotAvailable(),s=!1,t(e),S.generateOperationResult({didOperationSucceed:s,result:void 0});const o=new Blob([e],{type:"application/json"}).stream().pipeThrough(new CompressionStream("gzip"));return new Response(o).blob().then((o=>{o.arrayBuffer().then((e=>{const t=btoa(Array.from(new Uint8Array(e),(e=>String.fromCharCode(e))).join(""));r(t)})).catch((r=>{this.logger.logUnableToRetrieveArrayBufferFromCompressedBlob(r),s=!1,t(e)}))})).catch((r=>{this.logger.logUnableToRetrieveCompressedBlob(r),s=!1,t(e)})),S.generateOperationResult({didOperationSucceed:s,result:void 0})}),s)}constructor(e,r){this.compressionStreamsAPIAvailabilityChecker=e,this.logger=r}}class yt{compress(e,r,t){const s={compressionInfo:{serializedProfile:e},compressionCompletionCallback:r,compressionErrorCallback:t},o={id:Mr.CompressSerializedCallTree,requestParams:s};this.traceProcessingWorker.processRequest(o)||(this.logger.logProcessRequestForCompressSerializedProfileFailed(),t(e))}constructor(e,r){this.traceProcessingWorker=e,this.logger=r}}class Wt{generateStringCompressor(){const e=new bt;return this.useWebWorkerForCompression?new yt(this.workerFactory.getProfilerTraceProcessingWorker(),this.logger):new Ot(e,this.logger)}constructor(e,r,t){this.useWebWorkerForCompression=e,this.workerFactory=r,this.logger=t}}class Mt{filterCallTreesByTraceRequestingEvents(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("FilterCallTreesByTraceRequestingEvents",(()=>(this.filteredCallTrees=[],this.hasValidTraceRequestingEvents()?(this.filteredCallTrees=this.filterCallTrees(e),S.generateOperationResult({didOperationSucceed:!0,result:void 0})):(this.logger.logFilterCallTreeByTraceRequestingEventsCalledWithoutValidEvents(),r))),r,this.logger)}mergePropertyBagToEventBasedFilteredCallTrees(){if(!this.isEventBasedPropertyBagMergingEnabled)return;const e=S.generateOperationResult({didOperationSucceed:!1,result:void 0});C.startNew("MergePropertyBagToEventBasedFilteredCallTrees",(()=>(this.filteredCallTrees.forEach((e=>{const r=e.getStartTimeInMs(),t=r+e.getTotalExecutionTimeInMs(),s=e.getCustomProperties(),o=this.traceRequestingEvents?.filter((e=>this.isTimeOverlapping(r,t,e))),i=o?.map((e=>({EventName:e.eventName,EventStartTime:e.eventStartTime,EventEndTime:e.eventEndTime})));s.eventBased=JSON.stringify(i)})),S.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger)}hasValidTraceRequestingEvents(){return Array.isArray(this.traceRequestingEvents)&&this.traceRequestingEvents.length>0}filterCallTrees(e){return e.filter((e=>{const r=e.getStartTimeInMs(),t=r+e.getTotalExecutionTimeInMs();return this.traceRequestingEvents?.some((e=>this.isTimeOverlapping(r,t,e)))}))}isTimeOverlapping(e,r,t){return e>=t.eventStartTime&&e<=t.eventEndTime||r>=t.eventStartTime&&r<=t.eventEndTime}retrieveFilteredCallTrees(){const e=S.generateOperationResult({didOperationSucceed:!1,result:[]});return C.startNew("RetrieveCallTreesFilteredByTraceRequestingEvents",(()=>S.generateOperationResult({didOperationSucceed:!0,result:this.filteredCallTrees})),e,this.logger).getResult()}setFilteringEvents(e){this.traceRequestingEvents=e}constructor(e,r,t){this.logger=e,this.traceRequestingEvents=r,this.isEventBasedPropertyBagMergingEnabled=t,this.filteredCallTrees=[]}}class Rt{encodeURI(e){return this.trustedTypesAPIChecker.isTrustedTypesAPIAvailable()&&this.isTrustedTypesEnabled&&this.trustedTypesURLEncoder.encodeURI(e),this.encodeURIWrapper.encodeURI(e)}constructor(e,r,t,s){this.trustedTypesAPIChecker=e,this.trustedTypesURLEncoder=r,this.encodeURIWrapper=t,this.isTrustedTypesEnabled=s,this.trustedTypesAPIChecker=e,this.trustedTypesURLEncoder=r,this.isTrustedTypesEnabled=s}}class _t{isTrustedTypesAPIAvailable(){return"undefined"!==window.trustedTypes||"undefined"!==self.trustedTypes}}class Nt{encodeURI(e){const r=this.trustedTypesPolicyFactory.createScriptURL(e);return null==r?(this.logger.logTrustedTypesPolicyFactoryCreateScriptURLReturnedNull(),De):r}constructor(e,r){this.trustedTypesPolicyFactory=e,this.logger=r}}class xt{encodeURI(e){return encodeURI(e)}}class Ft{createObjectURL(e){if(this.isTrustedTypesEnforcementEnabled){const r=this.trustedTypesPolicyFactory.createScriptURL(e);return null==r?(this.logger.logTrustedTypesPolicyFactoryCreateScriptURLReturnedNull(),De):r}return URL.createObjectURL(e)}constructor(e,r,t){this.trustedTypesPolicyFactory=e,this.isTrustedTypesEnforcementEnabled=r,this.logger=t}}class Et{createScriptURL(e){return this.logger.logNullTrustedTypesPolicyFactoryCreateScriptURLInvoked(),null}constructor(e){this.logger=e}}class wt{retrieveProfilerFactory(){const e=S.generateOperationResult({didOperationSucceed:!0,result:new Pr(this.logger)});return C.startNew("RetrieveProfilerFactory",(()=>{const e=this.jsCPUProfilingPackageInitOptions.shouldSkipSupportedOSCheck??!1,r=this.jsCPUProfilingPackageInitOptions.shouldAllowForConditionalProfileProcessingAndSending??!1,t=this.jsCPUProfilingPackageInitOptions.storedProfilesRetentionPeriodInMs??3e4,s=this.getSupportedEnvironmentChecker(e),o=new tr(this.featureChecker,s,this.logger),i=new pr(this.logger),n=new fr(this.logger),a={deObfuscationEndpoint:this.jsCPUProfilingPackageInitOptions.deObfuscationEndpoint??""},l=new Ur(this.logger),d=new rt(this.logger),c=this.jsCPUProfilingPackageInitOptions.shouldKeepSamplesOutsideOfProfilingInterval??Re,u=this.jsCPUProfilingPackageInitOptions.shouldRecordExpandedTimeStamps??Ne,g=this.jsCPUProfilingPackageInitOptions.shouldRecordFrameCounts??!1,m=this.jsCPUProfilingPackageInitOptions.shouldLogRawProfilerTrace??!1,p=this.jsCPUProfilingPackageInitOptions.profilerTraceLoggingChunkSize||30,h=this.jsCPUProfilingPackageInitOptions.shouldExpandMarkers??!1,T=new wr(l,d,c,u,this.logger,g,h),f=this.jsCPUProfilingPackageInitOptions.isEventBasedPropertyBagAdditionEnabled??!1,P=new Zr(this.logger,f),C=new kr(T,P,this.logger),v=new Yr(this.logger),I=new et(this.logger),k=this.jsCPUProfilingPackageInitOptions.callTreeFilteringThresholdInMs??50,O=this.jsCPUProfilingPackageInitOptions.frameTotalExecutionTimeFilteringThresholdInMs??0,W=this.jsCPUProfilingPackageInitOptions.shouldMakeSerializedCallTreesFullyReconstructible??Ae,M=this.jsCPUProfilingPackageInitOptions.serializeCallTreeWithPropertyBagAsPriority??ze,R=new nt(this.logger),_=new Ir(C,v,I,k,R,O,this.logger),N=this.jsCPUProfilingPackageInitOptions.shouldCompressSerializedCallTrees??!1,x=new st(W,N,this.logger,M),E=F.getIdleTimeJobScheduler(),w=L.getDocumentVisibilityChecker(),U=this.jsCPUProfilingPackageInitOptions.shouldProcessProfileCapturedInAHiddenDocument??Me,B=this.jsCPUProfilingPackageInitOptions.shouldSendProfilesForDeobfuscationImmediately??Ue;let A=new ot(_,x);if(r){const e=new Mt(this.logger,[],f);A=new ot(_,x,e)}const z=this.jsCPUProfilingPackageInitOptions.useMainEventLoopForProfilerTraceProcessing??xe,$=Z.getWindowPropertyChecker(),D=new it($),J=q.getSendBeaconScheduler(),V=this.jsCPUProfilingPackageInitOptions.shouldSendAllCallTreesFromProfileInASingleRequest??Fe,G=this.jsCPUProfilingPackageInitOptions.shouldUseSendBeaconForSendingCallTrees??!0,j=new y,H=this.jsCPUProfilingPackageInitOptions.profilerTraceProcessingWebWorkerSourceURL??"",Q=this.jsCPUProfilingPackageInitOptions.deObfuscationRequestBodyPropertiesRetriever,K=this.jsCPUProfilingPackageInitOptions.deObfuscationRequestQueryParamsRetriever,X=new Ye(this.logger),Y=this.jsCPUProfilingPackageInitOptions.shouldCheckAndMarkWebWorkerURLAsTrusted??!1,ee=this.jsCPUProfilingPackageInitOptions.trustedTypesPolicyFactory??new Et(this.logger),re={urlWrapper:new Ft(ee,Y,this.logger),logger:this.logger},te=new ht(re),se=this.jsCPUProfilingPackageInitOptions.canUseMultipleWebWorkers??!1,oe=new _t,ie=new Nt(ee,this.logger),ne=new xt,ae=new Rt(oe,ie,ne,Y),le={workerSourceURL:H,deObfuscationRequestBodyPropertiesRetriever:Q,deObfuscationRequestQueryParamsRetriever:K,logMessageProcessor:this.logMessageProcessor,webWorkerWrapperFactory:te,uriEncoderFactory:ae,logger:this.logger},de={...le,maxNumberOfWorkersAllowed:null!=this.jsCPUProfilingPackageInitOptions.maxNumberOfWebWorkersToUse?this.jsCPUProfilingPackageInitOptions.maxNumberOfWebWorkersToUse:4},ce=se?new Ct(de):new ft(le),ue=new Wt(!this.jsCPUProfilingPackageInitOptions.useMainEventLoopForProfilerTraceProcessing,ce,this.logger),ge=this.jsCPUProfilingPackageInitOptions.shouldCompressSerializedCallTrees?ue.generateStringCompressor():new kt(this.logger),me=new It(J,V,j,G,N,ge,this.logger),pe={shouldAlwaysLogOperationsData:this.jsCPUProfilingPackageInitOptions.shouldAlwaysLogOperationsData??Ee,durationThresholdInMsToLogOperationData:this.jsCPUProfilingPackageInitOptions.durationThresholdInMsToLogOperationData??50,listOfOperationNamesToAlwaysLog:Pe},he=this.jsCPUProfilingPackageInitOptions.shouldProcessProfileCapturedWhileUserIsIdle??Le,Te=this.jsCPUProfilingPackageInitOptions.shouldKeepQueryParamsInResourceURLs??Be,fe=this.jsCPUProfilingPackageInitOptions.shouldLogSerializedCallTrees??$e,Ce=this.jsCPUProfilingPackageInitOptions.shouldSendSerializedCallTreesToServer??qe,Se=(new b).getURLQueryParamsRemover(),ve=new lt(Se,this.logger),Ie=new mt(N,this.logger),ke=new ut({idleTimeJobScheduler:E,documentVisibilityChecker:w,shouldProcessProfileCapturedInAHiddenDocument:U,traceProcessor:A,shouldProcessProfileInMainEventLoop:z,webWorkerAPIAvailabilityChecker:D,deObfuscationInfo:a,callTreesSender:me,webWorkerSourceURL:H,profilerTraceProcessingWorkerFactory:ce,shouldKeepSamplesOutsideOfProfilingInterval:c,shouldRecordExpandedTimeStamps:u,callTreeFilteringThresholdInMs:k,frameTotalExecutionTimeFilteringThresholdInMs:O,deObfuscationRequestBodyPropertiesRetriever:Q,deObfuscationRequestQueryParamsRetriever:K,customPropertiesExtractor:X,operationLogMessageFilteringCriteria:pe,shouldSendProfilesForDeobfuscationImmediately:B,shouldProcessProfileCapturedWhileUserIsIdle:he,shouldKeepQueryParamsInResourceURLs:Te,profileResourceURLsQueryParamsRemover:ve,shouldMakeSerializedCallTreesFullyReconstructible:W,serializeCallTreeWithPropertyBagAsPriority:M,shouldRecordFrameCounts:g,shouldLogRawProfilerTrace:m,profilerTraceLoggingChunkSize:p,shouldLogSerializedCallTrees:fe,shouldSendSerializedCallTreesToServer:Ce,shouldCompressSerializedCallTrees:N,serializedCallTreesToJSONStringsConverter:Ie,shouldAllowForConditionalProfileProcessingAndSending:r,isEventBasedPropertyBagAdditionEnabled:f,storedProfilesRetentionPeriodInMs:t,stringCompressorFactory:ue,logger:this.logger,shouldExpandMarkers:h}),be=new rr(o,i,n,ke,this.jsCPUProfilingPackageInitOptions,this.logger);return S.generateOperationResult({didOperationSucceed:!0,result:be})}),e,this.logger).getResult()}getSupportedEnvironmentChecker(e){return lr.build(e,this.logger)}constructor(e,r,t,s){this.featureChecker=e,this.jsCPUProfilingPackageInitOptions=r,this.logMessageProcessor=t,this.logger=s}}class Ut{retrieveProfilerFactory(){return this.logger.logNullJSCPUProfilerFactoryInvoked(),new Pr(this.logger)}constructor(e){this.logger=e}}!function(e){e[e.IdMissing=0]="IdMissing",e[e.DataMissing=1]="DataMissing",e[e.MissingProfilerImplementation=2]="MissingProfilerImplementation",e[e.FailingValidationsInProfilerFactory=3]="FailingValidationsInProfilerFactory",e[e.WindowMissingInJSEnvironment=4]="WindowMissingInJSEnvironment",e[e.WindowPropertyNameChecked=5]="WindowPropertyNameChecked",e[e.UserAgentToParseChromiumMajorVersionNumber=6]="UserAgentToParseChromiumMajorVersionNumber",e[e.ChromeNotPresentInUserAgent=7]="ChromeNotPresentInUserAgent",e[e.UnableToIsolateChromeInformationFromUserAgent=8]="UnableToIsolateChromeInformationFromUserAgent",e[e.UnableToExtractChromeVersionInformation=9]="UnableToExtractChromeVersionInformation",e[e.UnableToParseChromeMajorVersionString=10]="UnableToParseChromeMajorVersionString",e[e.ParsedChromiumMajorVersionNumber=11]="ParsedChromiumMajorVersionNumber",e[e.UserAgentToCheckForChromiumBrowser=12]="UserAgentToCheckForChromiumBrowser",e[e.EmptyUserAgentString=13]="EmptyUserAgentString",e[e.BrowserUserAgentNotChromiumBased=14]="BrowserUserAgentNotChromiumBased",e[e.UserAgentSpoofedToBeChromium=15]="UserAgentSpoofedToBeChromium",e[e.BrowserNotChromiumBasedBrowser=16]="BrowserNotChromiumBasedBrowser",e[e.UnsupportedChromiumMajorVersionNumber=17]="UnsupportedChromiumMajorVersionNumber",e[e.ProfilerInitOptionsNullOrUndefined=18]="ProfilerInitOptionsNullOrUndefined",e[e.SamplingIntervalIsLessThanOrEqualToZero=19]="SamplingIntervalIsLessThanOrEqualToZero",e[e.SamplingIntervalLessThanMinimumSupportedSamplingInterval=20]="SamplingIntervalLessThanMinimumSupportedSamplingInterval",e[e.UnsupportedBrowser=21]="UnsupportedBrowser",e[e.UnsupportedOperatingSystem=22]="UnsupportedOperatingSystem",e[e.JSSelfProfilingAPIUnavailable=23]="JSSelfProfilingAPIUnavailable",e[e.RetrievedUserAgent=24]="RetrievedUserAgent",e[e.NullJSCPUProfilerStartCalled=25]="NullJSCPUProfilerStartCalled",e[e.NullJSCPUProfilerStopCalled=26]="NullJSCPUProfilerStopCalled",e[e.NullOrUndefinedProfilerInitOptions=27]="NullOrUndefinedProfilerInitOptions",e[e.MaxBufferSizeFixedToDefaultSize=28]="MaxBufferSizeFixedToDefaultSize",e[e.MaxBufferSizeWasNotFixedBeforeRetrieval=29]="MaxBufferSizeWasNotFixedBeforeRetrieval",e[e.ProfilerNotPresentInJSEnvironment=30]="ProfilerNotPresentInJSEnvironment",e[e.SamplingIntervalValidationCheckFailed=31]="SamplingIntervalValidationCheckFailed",e[e.MaxBufferValidationFailed=32]="MaxBufferValidationFailed",e[e.MaxBufferSizeNotSpecified=33]="MaxBufferSizeNotSpecified",e[e.MaxBufferSizeLessThanOrEqualToZero=34]="MaxBufferSizeLessThanOrEqualToZero",e[e.ManualProfilerValidationFailed=35]="ManualProfilerValidationFailed",e[e.ProfilingIntervalValidationFailed=36]="ProfilingIntervalValidationFailed",e[e.ProfilingIntervalNullOrUndefined=37]="ProfilingIntervalNullOrUndefined",e[e.ProfilingIntervalLessThanOrEqualToZero=38]="ProfilingIntervalLessThanOrEqualToZero",e[e.ProfilingIntervalLessThanSamplingInterval=39]="ProfilingIntervalLessThanSamplingInterval",e[e.TimedProfilerValidationFailed=40]="TimedProfilerValidationFailed",e[e.IdleIntervalValidationFailed=41]="IdleIntervalValidationFailed",e[e.IdleIntervalIsNullOrUndefined=42]="IdleIntervalIsNullOrUndefined",e[e.IdleIntervalIsLessThanOrEqualToZero=43]="IdleIntervalIsLessThanOrEqualToZero",e[e.PostProfilerStartCallbackSpecified=44]="PostProfilerStartCallbackSpecified",e[e.PreProfilerStartCheckFailed=45]="PreProfilerStartCheckFailed",e[e.MaxBufferSizeNotFixed=46]="MaxBufferSizeNotFixed",e[e.ProfilerAlreadyStarted=47]="ProfilerAlreadyStarted",e[e.ProfilerStartSucceeded=48]="ProfilerStartSucceeded",e[e.InvokingPostProfilerStartCallback=49]="InvokingPostProfilerStartCallback",e[e.PostProfilerStopCallbackSpecified=50]="PostProfilerStopCallbackSpecified",e[e.ProfilerInstanceIsUndefined=51]="ProfilerInstanceIsUndefined",e[e.ProfilerStopPromiseResolved=52]="ProfilerStopPromiseResolved",e[e.ProfilerStopPromiseRejected=53]="ProfilerStopPromiseRejected",e[e.PostProfilerStopCallbackInvoked=54]="PostProfilerStopCallbackInvoked",e[e.PostTimedStartProfilerStartCallbackInvoked=55]="PostTimedStartProfilerStartCallbackInvoked",e[e.ProfilingIntervalIsUndefined=56]="ProfilingIntervalIsUndefined",e[e.TimerJobToStopProfilerSet=57]="TimerJobToStopProfilerSet",e[e.TimedProfilerStopCallbackInvoked=58]="TimedProfilerStopCallbackInvoked",e[e.TimedProfilerIsBeingStoppedManually=59]="TimedProfilerIsBeingStoppedManually",e[e.ProfilerStartPromiseCreated=60]="ProfilerStartPromiseCreated",e[e.ProfilerStopGoingToBeInvoked=61]="ProfilerStopGoingToBeInvoked",e[e.SamplingIntervalUsedForStartingProfiler=62]="SamplingIntervalUsedForStartingProfiler",e[e.MaxBufferSize=63]="MaxBufferSize",e[e.NoProfilerInstanceBuilt=64]="NoProfilerInstanceBuilt",e[e.ProfilerInitOptionsValidationFailed=65]="ProfilerInitOptionsValidationFailed",e[e.UnableToFixUpProfilerInitOptions=66]="UnableToFixUpProfilerInitOptions",e[e.ProfilingIsNotEnabled=67]="ProfilingIsNotEnabled",e[e.ProfilingIsNotSupportedEnvironment=68]="ProfilingIsNotSupportedEnvironment",e[e.FeatureCheckerIsNullOrUndefined=69]="FeatureCheckerIsNullOrUndefined",e[e.NullSupportedEnvironmentCheckerInvoked=70]="NullSupportedEnvironmentCheckerInvoked",e[e.NullJSCPUProfilerInitOptionsValidatorInvoked=71]="NullJSCPUProfilerInitOptionsValidatorInvoked",e[e.NullJSCPUProfilerFactoryInvoked=72]="NullJSCPUProfilerFactoryInvoked",e[e.NullOrUndefinedIdleInterval=73]="NullOrUndefinedIdleInterval",e[e.CreateProfilerDidNotSubscribeProfilerObserver=74]="CreateProfilerDidNotSubscribeProfilerObserver",e[e.NullOrUndefinedCustomPropertiesRetriever=75]="NullOrUndefinedCustomPropertiesRetriever",e[e.NullOrUndefinedCustomProperties=76]="NullOrUndefinedCustomProperties",e[e.CustomPropertyKeyIsNull=77]="CustomPropertyKeyIsNull",e[e.CustomPropertyValueIsNull=78]="CustomPropertyValueIsNull",e[e.RetrieveCallTreesCalledBeforeTransform=79]="RetrieveCallTreesCalledBeforeTransform",e[e.RetrieveBuiltCallTreesBeforeBuildCallTrees=80]="RetrieveBuiltCallTreesBeforeBuildCallTrees",e[e.RetrieveStacksCalledBeforeBuildStacks=81]="RetrieveStacksCalledBeforeBuildStacks",e[e.ExecutionStacksNeverBuilt=82]="ExecutionStacksNeverBuilt",e[e.PeekOnNullExecutionStackInvoked=83]="PeekOnNullExecutionStackInvoked",e[e.PopOnNullExecutionStackInvoked=84]="PopOnNullExecutionStackInvoked",e[e.EmptyStacks=85]="EmptyStacks",e[e.EmptyFrames=86]="EmptyFrames",e[e.ForciblyExitingLoopWhileBuildingStack=87]="ForciblyExitingLoopWhileBuildingStack",e[e.RetrieveStackCalledBeforeBuildStack=88]="RetrieveStackCalledBeforeBuildStack",e[e.ExecutionStackNeverBuilt=89]="ExecutionStackNeverBuilt",e[e.ConvertStacksToCallTreesNeverCalled=90]="ConvertStacksToCallTreesNeverCalled",e[e.ConvertStackToCallTreeNeverCalled=91]="ConvertStackToCallTreeNeverCalled",e[e.NullFrameNodeCreated=92]="NullFrameNodeCreated",e[e.InvalidSampleIndex=93]="InvalidSampleIndex",e[e.InvalidFrameNodeStartTime=94]="InvalidFrameNodeStartTime",e[e.InvalidFrameNodeExecutionTime=95]="InvalidFrameNodeExecutionTime",e[e.InvalidNewFrameNodeExecutionTime=96]="InvalidNewFrameNodeExecutionTime",e[e.NegativeSubTreeExecutionTime=97]="NegativeSubTreeExecutionTime",e[e.FixerForProfilerType=98]="FixerForProfilerType",e[e.MissingProfilerInitOptionsFixerImplementation=99]="MissingProfilerInitOptionsFixerImplementation",e[e.LoopBackFixerFixProfilerInitOptionsInvoked=100]="LoopBackFixerFixProfilerInitOptionsInvoked",e[e.LoopBackFixerRetrieveFixedProfilerInitOptionsInvoked=101]="LoopBackFixerRetrieveFixedProfilerInitOptionsInvoked",e[e.MissingDeObfuscationEndpoint=102]="MissingDeObfuscationEndpoint",e[e.NotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling=103]="NotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling",e[e.NullCallTreeDepthFirstIteratorInvoked=104]="NullCallTreeDepthFirstIteratorInvoked",e[e.EmptySamplesArrayPassedToFilter=105]="EmptySamplesArrayPassedToFilter",e[e.NullCallTreeLeftMostNodesIteratorInvoked=106]="NullCallTreeLeftMostNodesIteratorInvoked",e[e.NullCallTreeRightMostNodesIteratorInvoked=107]="NullCallTreeRightMostNodesIteratorInvoked",e[e.MissingIsProfilingEnabledOnFeatureChecker=108]="MissingIsProfilingEnabledOnFeatureChecker",e[e.FeatureCheckerIsProfilingEnabledNotAFunction=109]="FeatureCheckerIsProfilingEnabledNotAFunction",e[e.NullCallTreeGetTotalExecutionTimeInvoked=110]="NullCallTreeGetTotalExecutionTimeInvoked",e[e.NullCallTreeGetCustomPropertiesInvoked=111]="NullCallTreeGetCustomPropertiesInvoked",e[e.SerializedCallTrees=112]="SerializedCallTrees",e[e.NullCallTreeIteratorImplGetNextInvoked=113]="NullCallTreeIteratorImplGetNextInvoked",e[e.NullCallTreeIteratorImplHasMoreInvoked=114]="NullCallTreeIteratorImplHasMoreInvoked",e[e.MissingProfilerNameForProfilerType=115]="MissingProfilerNameForProfilerType",e[e.ExpectedOnlyOneNodePerLevelInCallTree=116]="ExpectedOnlyOneNodePerLevelInCallTree",e[e.MissingWebWorkerSourceURL=117]="MissingWebWorkerSourceURL",e[e.MaxNumberOfProfilersAlreadyCreated=118]="MaxNumberOfProfilersAlreadyCreated",e[e.WebWorkerAPINotAvailable=119]="WebWorkerAPINotAvailable",e[e.SamplingIntervalAboveMaxSamplingInterval=120]="SamplingIntervalAboveMaxSamplingInterval",e[e.UnableToBootWebWorker=121]="UnableToBootWebWorker",e[e.WorkerInstanceNotFound=122]="WorkerInstanceNotFound",e[e.IdNotFoundInMessageToWorker=123]="IdNotFoundInMessageToWorker",e[e.DataNotFoundInMessageToWorker=124]="DataNotFoundInMessageToWorker",e[e.IdNotFoundInMessageFromWorker=125]="IdNotFoundInMessageFromWorker",e[e.DataNotFoundInMessageFromWorker=126]="DataNotFoundInMessageFromWorker",e[e.IdNotFoundInWorkerLogMessage=127]="IdNotFoundInWorkerLogMessage",e[e.MessageNotFoundInWorkerLogMessage=128]="MessageNotFoundInWorkerLogMessage",e[e.UnknownMessageFromWorker=129]="UnknownMessageFromWorker",e[e.UnknownLogMessageFromWorker=130]="UnknownLogMessageFromWorker",e[e.Operation=131]="Operation",e[e.FallbackResultReturned=132]="FallbackResultReturned",e[e.UnknownMessageToWorker=133]="UnknownMessageToWorker",e[e.ExceptionEncounteredInWorker=134]="ExceptionEncounteredInWorker",e[e.MissingDeObfuscationInfoInTraceProcessingInfo=135]="MissingDeObfuscationInfoInTraceProcessingInfo",e[e.MissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo=136]="MissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo",e[e.MissingShouldRecordExpandedTimeStampsInTraceProcessingInfo=137]="MissingShouldRecordExpandedTimeStampsInTraceProcessingInfo",e[e.MissingCallTreeFilteringThresholdInMs=138]="MissingCallTreeFilteringThresholdInMs",e[e.InvalidMessageReceivedByWorker=139]="InvalidMessageReceivedByWorker",e[e.InvalidProcessTraceMessageReceivedByWorker=140]="InvalidProcessTraceMessageReceivedByWorker",e[e.MissingTraceInTraceProcessingInfo=141]="MissingTraceInTraceProcessingInfo",e[e.SerializedCallTreesMissingInProcessorResult=142]="SerializedCallTreesMissingInProcessorResult",e[e.LogsMissingInProcessorResult=143]="LogsMissingInProcessorResult",e[e.UndefinedWebWorkerCompletionCallback=144]="UndefinedWebWorkerCompletionCallback",e[e.LogsMissingInErrorsFromWebWorker=145]="LogsMissingInErrorsFromWebWorker",e[e.UndefinedErrorCallback=146]="UndefinedErrorCallback",e[e.UndefinedTraceProcessingInfoToReturnBack=147]="UndefinedTraceProcessingInfoToReturnBack",e[e.WebWorkerAlreadyStarted=148]="WebWorkerAlreadyStarted",e[e.WebWorkerErrorFallingBackToMainEventLoop=149]="WebWorkerErrorFallingBackToMainEventLoop",e[e.CustomPropertiesMissingInTrace=150]="CustomPropertiesMissingInTrace",e[e.ProfilerTraceMissingInTrace=151]="ProfilerTraceMissingInTrace",e[e.ProfilerTraceStartTimestampMissingInTrace=152]="ProfilerTraceStartTimestampMissingInTrace",e[e.ProfilerPropertiesMissingInTrace=153]="ProfilerPropertiesMissingInTrace",e[e.ElapsedProfilingTimeMissingInTrace=154]="ElapsedProfilingTimeMissingInTrace",e[e.InvalidProfilerTraceToProcess=155]="InvalidProfilerTraceToProcess",e[e.WebWorkerError=156]="WebWorkerError",e[e.WebWorkerTraceProcessingInfoMissingToReturnOnError=157]="WebWorkerTraceProcessingInfoMissingToReturnOnError",e[e.WebWorkerErrorCallbackNotRegistered=158]="WebWorkerErrorCallbackNotRegistered",e[e.ProfilerTrace=159]="ProfilerTrace",e[e.MissingCallToFilterCallTrees=160]="MissingCallToFilterCallTrees",e[e.MissingCallToFilterFrames=161]="MissingCallToFilterFrames",e[e.NullCallTreeFramesFiltererFilterFramesInvoked=162]="NullCallTreeFramesFiltererFilterFramesInvoked",e[e.NullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked=163]="NullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked",e[e.NullCallTreeGetFramesFiltererInvoked=164]="NullCallTreeGetFramesFiltererInvoked",e[e.FilterFrameWithNoParent=165]="FilterFrameWithNoParent",e[e.MissingCallTreeFilteringThresholdInMsInTraceProcessingInfo=166]="MissingCallTreeFilteringThresholdInMsInTraceProcessingInfo",e[e.NoCallTreesToSend=167]="NoCallTreesToSend",e[e.OperationLogMessageFiltererInitOptions=168]="OperationLogMessageFiltererInitOptions",e[e.ErrorFromWorker=169]="ErrorFromWorker",e[e.WebWorkerTerminated=170]="WebWorkerTerminated",e[e.NullOrUndefinedProfilerEvent=171]="NullOrUndefinedProfilerEvent",e[e.UnknownProfilerEventId=172]="UnknownProfilerEventId",e[e.NullOrUndefinedProfilerTrace=173]="NullOrUndefinedProfilerTrace",e[e.OperationLogMessageFilteringCriteriaMissingInTrace=174]="OperationLogMessageFilteringCriteriaMissingInTrace",e[e.NullOrUndefinedProfilerObserverPassedInForSubscribe=175]="NullOrUndefinedProfilerObserverPassedInForSubscribe",e[e.NullOrUndefinedProfilerEventIds=176]="NullOrUndefinedProfilerEventIds",e[e.UnexpectedUndefinedProfilerEventIds=177]="UnexpectedUndefinedProfilerEventIds",e[e.NullOrUndefinedProfilerObserverPassedInForUnsubscribe=178]="NullOrUndefinedProfilerObserverPassedInForUnsubscribe",e[e.NullOrUndefinedProfilerEventToUnsubscribe=179]="NullOrUndefinedProfilerEventToUnsubscribe",e[e.ProfilerObserverWasNeverSubscribed=180]="ProfilerObserverWasNeverSubscribed",e[e.UnexpectedNullOrUndefinedSubscribedProfilerEventIds=181]="UnexpectedNullOrUndefinedSubscribedProfilerEventIds",e[e.ProfilerObserverNeverSubscribedForProfilerEventId=182]="ProfilerObserverNeverSubscribedForProfilerEventId",e[e.CallTreeCustomPropertiesRetrieversMissingInTrace=183]="CallTreeCustomPropertiesRetrieversMissingInTrace",e[e.NullOrUndefinedItemToSubscribe=184]="NullOrUndefinedItemToSubscribe",e[e.NullOrUndefinedItemForUnsubscribe=185]="NullOrUndefinedItemForUnsubscribe",e[e.ItemWasNeverSubscribed=186]="ItemWasNeverSubscribed",e[e.NumberOfCallTreesFiltererByCustomFilterers=187]="NumberOfCallTreesFiltererByCustomFilterers",e[e.ProcessTraceParamsIsNullOrUndefined=188]="ProcessTraceParamsIsNullOrUndefined",e[e.CurrentTraceBeingProcessedNullOrUndefined=189]="CurrentTraceBeingProcessedNullOrUndefined",e[e.TraceIdMissingInTrace=190]="TraceIdMissingInTrace",e[e.UndefinedStoredProfilerTraceProcessingWorker=191]="UndefinedStoredProfilerTraceProcessingWorker",e[e.BailingOutOnNullProfiler=192]="BailingOutOnNullProfiler",e[e.NotProcessingCapturedTraceDueToUserBeingIdle=193]="NotProcessingCapturedTraceDueToUserBeingIdle",e[e.NullCallTreeGetReconstructableTreeIteratorInvoked=194]="NullCallTreeGetReconstructableTreeIteratorInvoked",e[e.GetCustomPropertiesCalledOnNullJSCPUProfilerTrace=195]="GetCustomPropertiesCalledOnNullJSCPUProfilerTrace",e[e.GetResourcesCalledOnNullJSCPUProfilerTrace=196]="GetResourcesCalledOnNullJSCPUProfilerTrace",e[e.GetFramesCalledOnNullJSCPUProfilerTrace=197]="GetFramesCalledOnNullJSCPUProfilerTrace",e[e.GetStacksCalledOnNullJSCPUProfilerTrace=198]="GetStacksCalledOnNullJSCPUProfilerTrace",e[e.GetSamplesCalledOnNullJSCPUProfilerTrace=199]="GetSamplesCalledOnNullJSCPUProfilerTrace",e[e.GetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace=200]="GetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace",e[e.GetProfilerPropertiesCalledOnNullJSCPUProfilerTrace=201]="GetProfilerPropertiesCalledOnNullJSCPUProfilerTrace",e[e.GetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace=202]="GetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace",e[e.RemoveQueryParamsFromResourceURLsNeverCalled=203]="RemoveQueryParamsFromResourceURLsNeverCalled",e[e.SerializeCallTreeNeverCalled=204]="SerializeCallTreeNeverCalled",e[e.ConvertToJSONStringWasNeverCalled=205]="ConvertToJSONStringWasNeverCalled",e[e.NullJSCPUProfilerSubscribeProfilerObserverCalled=206]="NullJSCPUProfilerSubscribeProfilerObserverCalled",e[e.NullJSCPUProfilerUnsubscribeProfilerObserverCalled=207]="NullJSCPUProfilerUnsubscribeProfilerObserverCalled",e[e.NullJSCPUProfilerSubscribeCallTreeCustomPropertiesRetrieverCalled=208]="NullJSCPUProfilerSubscribeCallTreeCustomPropertiesRetrieverCalled",e[e.NullJSCPUProfilerUnsubscribeCallTreeCustomPropertiesRetrieverCalled=209]="NullJSCPUProfilerUnsubscribeCallTreeCustomPropertiesRetrieverCalled",e[e.NullJSCPUProfilerSubscribeCallTreeCustomFiltererCalled=210]="NullJSCPUProfilerSubscribeCallTreeCustomFiltererCalled",e[e.NullJSCPUProfilerUnsubscribeCallTreeCustomFiltererCalled=211]="NullJSCPUProfilerUnsubscribeCallTreeCustomFiltererCalled",e[e.NullJSCPUProfilerRequestProfilerTraceProcessingCalled=212]="NullJSCPUProfilerRequestProfilerTraceProcessingCalled",e[e.UnableToRetrieveCompressedBlob=213]="UnableToRetrieveCompressedBlob",e[e.UnableToRetrieveArrayBufferFromCompressedBlob=214]="UnableToRetrieveArrayBufferFromCompressedBlob",e[e.CompressionStreamAPIIsNotAvailable=215]="CompressionStreamAPIIsNotAvailable",e[e.WebWorkerSource=216]="WebWorkerSource",e[e.WebWorkerCreationSucceeded=217]="WebWorkerCreationSucceeded",e[e.WebWorkerCreationFailed=218]="WebWorkerCreationFailed",e[e.WorkerNotRunning=219]="WorkerNotRunning",e[e.FailedToCompressMultipleCallTreesDeobfuscationRequest=220]="FailedToCompressMultipleCallTreesDeobfuscationRequest",e[e.FailedToCompressIndividualCallTreeDeobfuscationRequest=221]="FailedToCompressIndividualCallTreeDeobfuscationRequest",e[e.NullStringCompressorInvoked=222]="NullStringCompressorInvoked",e[e.UnknownStoredWebWorkerRequestId=223]="UnknownStoredWebWorkerRequestId",e[e.UnknownWebWorkerRequestId=224]="UnknownWebWorkerRequestId",e[e.MessageFromWorkerIsNullorUndefined=225]="MessageFromWorkerIsNullorUndefined",e[e.MessageFromWorkerNotObject=226]="MessageFromWorkerNotObject",e[e.UnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError=227]="UnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError",e[e.WebWorkerInitializationError=228]="WebWorkerInitializationError",e[e.UnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError=229]="UnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError",e[e.StartWorkerInvokedOnNullWorker=230]="StartWorkerInvokedOnNullWorker",e[e.ProcessRequestInvokedOnNullWorker=231]="ProcessRequestInvokedOnNullWorker",e[e.ProcessRequestForProcessTraceFailed=232]="ProcessRequestForProcessTraceFailed",e[e.GetWorkerIdInvokedOnNullWorker=233]="GetWorkerIdInvokedOnNullWorker",e[e.UnknownWebWorkerErrorId=234]="UnknownWebWorkerErrorId",e[e.InvalidTraceReceivedByWorker=235]="InvalidTraceReceivedByWorker",e[e.UnknownMessageIdReceivedByWorker=236]="UnknownMessageIdReceivedByWorker",e[e.WorkerIDBeingSetToBusyNotPresentInIdleWorkers=237]="WorkerIDBeingSetToBusyNotPresentInIdleWorkers",e[e.WorkerIDBeingSetToIdleNotPresentInBusyWorkers=238]="WorkerIDBeingSetToIdleNotPresentInBusyWorkers",e[e.UnknownWorkerIDBeingTerminated=239]="UnknownWorkerIDBeingTerminated",e[e.ProcessRequestForCompressSerializedProfileFailed=240]="ProcessRequestForCompressSerializedProfileFailed",e[e.UndefinedCompressionInfoToReturnBack=241]="UndefinedCompressionInfoToReturnBack",e[e.OutputStringMissingInMessageFromWorker=242]="OutputStringMissingInMessageFromWorker",e[e.LogsMissingInMessageFromWorker=243]="LogsMissingInMessageFromWorker",e[e.MessageToWorkerIsNullorUndefined=244]="MessageToWorkerIsNullorUndefined",e[e.MessageToWorkerNotObject=245]="MessageToWorkerNotObject",e[e.SerializedProfileMissingInCompressSerializedProfileMessage=246]="SerializedProfileMissingInCompressSerializedProfileMessage",e[e.MissingShouldRecordFrameCountsInTraceProcessingInfo=247]="MissingShouldRecordFrameCountsInTraceProcessingInfo",e[e.MissingFrameTotalExecutionTimeFilteringThresholdInMsInTraceProcessingInfo=248]="MissingFrameTotalExecutionTimeFilteringThresholdInMsInTraceProcessingInfo",e[e.ShouldMakeSerializedCallTreesFullyReconstructibleMissingInTrace=249]="ShouldMakeSerializedCallTreesFullyReconstructibleMissingInTrace",e[e.ShouldCompressSerializedCallTreesMissingInTrace=250]="ShouldCompressSerializedCallTreesMissingInTrace",e[e.WorkerReceivedMessageIsNullOrUndefined=251]="WorkerReceivedMessageIsNullOrUndefined",e[e.WorkerReceivedMessageIsNotAnObject=252]="WorkerReceivedMessageIsNotAnObject",e[e.TraceIsNull=253]="TraceIsNull",e[e.TraceIsNotObject=254]="TraceIsNotObject",e[e.InvalidCompressSerializedProfileMessageReceivedByWorker=255]="InvalidCompressSerializedProfileMessageReceivedByWorker",e[e.SkippingLoggingSerializedCallTrees=256]="SkippingLoggingSerializedCallTrees",e[e.NoSerializedCallTreesToLog=257]="NoSerializedCallTreesToLog",e[e.InvalidConditionalProfileProcessingRequest=258]="InvalidConditionalProfileProcessingRequest",e[e.TraceRequestingEventDrivenCallTreeFiltererNotSet=259]="TraceRequestingEventDrivenCallTreeFiltererNotSet",e[e.FilterCallTreeByTraceRequestingEventsCalledWithoutValidEvents=260]="FilterCallTreeByTraceRequestingEventsCalledWithoutValidEvents",e[e.NullTrustedTypesPolicyFactoryCreateScriptURLInvoked=261]="NullTrustedTypesPolicyFactoryCreateScriptURLInvoked",e[e.TrustedTypesPolicyFactoryCreateScriptURLReturnedNull=262]="TrustedTypesPolicyFactoryCreateScriptURLReturnedNull"}(Nr||(Nr={}));class Lt{logMissingProfilerImplementation(){this.sendLogMessageToProcessors({id:Nr.MissingProfilerImplementation,message:void 0,context:this.logContext})}logFailingValidationsInProfilerFactory(){this.sendLogMessageToProcessors({id:Nr.FailingValidationsInProfilerFactory,message:void 0,context:this.logContext})}logWindowMissingInJSEnvironment(){this.sendLogMessageToProcessors({id:Nr.WindowMissingInJSEnvironment,message:void 0,context:this.logContext})}logWindowPropertyNameChecked(e){this.sendLogMessageToProcessors({id:Nr.WindowPropertyNameChecked,message:e,context:this.logContext})}logUserAgentToParseChromiumMajorVersionNumber(){this.sendLogMessageToProcessors({id:Nr.UserAgentToParseChromiumMajorVersionNumber,message:void 0,context:this.logContext})}logChromeNotPresentInUserAgent(){this.sendLogMessageToProcessors({id:Nr.ChromeNotPresentInUserAgent,message:void 0,context:this.logContext})}logUnableToIsolateChromeInformationFromUserAgent(){this.sendLogMessageToProcessors({id:Nr.UnableToIsolateChromeInformationFromUserAgent,message:void 0,context:this.logContext})}logUnableToExtractChromeVersionInformation(){this.sendLogMessageToProcessors({id:Nr.UnableToExtractChromeVersionInformation,message:void 0,context:this.logContext})}logUnableToParseChromeMajorVersionString(){this.sendLogMessageToProcessors({id:Nr.UnableToParseChromeMajorVersionString,message:void 0,context:this.logContext})}logParsedChromiumMajorVersionNumber(e){this.sendLogMessageToProcessors({id:Nr.ParsedChromiumMajorVersionNumber,message:e,context:this.logContext})}logUserAgentToCheckForChromiumBrowser(e){this.sendLogMessageToProcessors({id:Nr.UserAgentToCheckForChromiumBrowser,message:e,context:this.logContext})}logEmptyUserAgentString(){this.sendLogMessageToProcessors({id:Nr.EmptyUserAgentString,message:void 0,context:this.logContext})}logBrowserUserAgentNotChromiumBased(){this.sendLogMessageToProcessors({id:Nr.BrowserUserAgentNotChromiumBased,message:void 0,context:this.logContext})}logUserAgentSpoofedToBeChromium(){this.sendLogMessageToProcessors({id:Nr.UserAgentSpoofedToBeChromium,message:void 0,context:this.logContext})}logBrowserNotChromiumBasedBrowser(){this.sendLogMessageToProcessors({id:Nr.BrowserNotChromiumBasedBrowser,message:void 0,context:this.logContext})}logUnsupportedChromiumMajorVersionNumber(){this.sendLogMessageToProcessors({id:Nr.UnsupportedChromiumMajorVersionNumber,message:void 0,context:this.logContext})}logProfilerInitOptionsNullOrUndefined(){this.sendLogMessageToProcessors({id:Nr.ProfilerInitOptionsNullOrUndefined,message:void 0,context:this.logContext})}logSamplingIntervalIsLessThanOrEqualToZero(){this.sendLogMessageToProcessors({id:Nr.SamplingIntervalIsLessThanOrEqualToZero,message:void 0,context:this.logContext})}logSamplingIntervalLessThanMinimumSupportedSamplingInterval(e,r){this.sendLogMessageToProcessors({id:Nr.SamplingIntervalLessThanMinimumSupportedSamplingInterval,message:{samplingInterval:e,minimumSupportedSamplingInterval:r},context:this.logContext})}logUnsupportedBrowser(){this.sendLogMessageToProcessors({id:Nr.UnsupportedBrowser,message:void 0,context:this.logContext})}logUnsupportedOperatingSystem(){this.sendLogMessageToProcessors({id:Nr.UnsupportedOperatingSystem,message:void 0,context:this.logContext})}logJSSelfProfilingAPIUnavailable(){this.sendLogMessageToProcessors({id:Nr.JSSelfProfilingAPIUnavailable,message:void 0,context:this.logContext})}logRetrievedUserAgent(e){this.sendLogMessageToProcessors({id:Nr.RetrievedUserAgent,message:e,context:this.logContext})}logNullJSCPUProfilerStartCalled(){this.sendLogMessageToProcessors({id:Nr.NullJSCPUProfilerStartCalled,message:void 0,context:this.logContext})}logNullJSCPUProfilerStopCalled(){this.sendLogMessageToProcessors({id:Nr.NullJSCPUProfilerStopCalled,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerInitOptions(){this.sendLogMessageToProcessors({id:Nr.NullOrUndefinedProfilerInitOptions,message:void 0,context:this.logContext})}logMaxBufferSizeFixedToDefaultSize(){this.sendLogMessageToProcessors({id:Nr.MaxBufferSizeFixedToDefaultSize,message:void 0,context:this.logContext})}logMaxBufferSizeWasNotFixedBeforeRetrieval(){this.sendLogMessageToProcessors({id:Nr.MaxBufferSizeWasNotFixedBeforeRetrieval,message:void 0,context:this.logContext})}logProfilerNotPresentInJSEnvironment(){this.sendLogMessageToProcessors({id:Nr.ProfilerNotPresentInJSEnvironment,message:void 0,context:this.logContext})}logSamplingIntervalValidationCheckFailed(){this.sendLogMessageToProcessors({id:Nr.SamplingIntervalValidationCheckFailed,message:void 0,context:this.logContext})}logMaxBufferValidationFailed(){this.sendLogMessageToProcessors({id:Nr.MaxBufferValidationFailed,message:void 0,context:this.logContext})}logMaxBufferSizeNotSpecified(){this.sendLogMessageToProcessors({id:Nr.MaxBufferSizeNotSpecified,message:void 0,context:this.logContext})}logMaxBufferSizeLessThanOrEqualToZero(){this.sendLogMessageToProcessors({id:Nr.MaxBufferSizeLessThanOrEqualToZero,message:void 0,context:this.logContext})}logManualProfilerValidationFailed(){this.sendLogMessageToProcessors({id:Nr.ManualProfilerValidationFailed,message:void 0,context:this.logContext})}logProfilingIntervalValidationFailed(){this.sendLogMessageToProcessors({id:Nr.ProfilingIntervalValidationFailed,message:void 0,context:this.logContext})}logProfilingIntervalNullOrUndefined(){this.sendLogMessageToProcessors({id:Nr.ProfilingIntervalNullOrUndefined,message:void 0,context:this.logContext})}logProfilingIntervalLessThanOrEqualToZero(){this.sendLogMessageToProcessors({id:Nr.ProfilingIntervalLessThanOrEqualToZero,message:void 0,context:this.logContext})}logProfilingIntervalLessThanSamplingInterval(){this.sendLogMessageToProcessors({id:Nr.ProfilingIntervalLessThanSamplingInterval,message:void 0,context:this.logContext})}logTimedProfilerValidationFailed(){this.sendLogMessageToProcessors({id:Nr.TimedProfilerValidationFailed,message:void 0,context:this.logContext})}logIdleIntervalValidationFailed(){this.sendLogMessageToProcessors({id:Nr.IdleIntervalValidationFailed,message:void 0,context:this.logContext})}logIdleIntervalIsNullOrUndefined(){this.sendLogMessageToProcessors({id:Nr.IdleIntervalIsNullOrUndefined,message:void 0,context:this.logContext})}logIdleIntervalIsLessThanOrEqualToZero(){this.sendLogMessageToProcessors({id:Nr.IdleIntervalIsLessThanOrEqualToZero,message:void 0,context:this.logContext})}logPostProfilerStartCallbackSpecified(){this.sendLogMessageToProcessors({id:Nr.PostProfilerStartCallbackSpecified,message:void 0,context:this.logContext})}logPreProfilerStartCheckFailed(){this.sendLogMessageToProcessors({id:Nr.PreProfilerStartCheckFailed,message:void 0,context:this.logContext})}logMaxBufferSizeNotFixed(){this.sendLogMessageToProcessors({id:Nr.MaxBufferSizeNotFixed,message:void 0,context:this.logContext})}logBailingOutOnNullProfiler(){this.sendLogMessageToProcessors({id:Nr.BailingOutOnNullProfiler,message:void 0,context:this.logContext})}logProfilerAlreadyStarted(){this.sendLogMessageToProcessors({id:Nr.ProfilerAlreadyStarted,message:void 0,context:this.logContext})}logProfilerStartSucceeded(){this.sendLogMessageToProcessors({id:Nr.ProfilerStartSucceeded,message:void 0,context:this.logContext})}logInvokingPostProfilerStartCallback(){this.sendLogMessageToProcessors({id:Nr.InvokingPostProfilerStartCallback,message:void 0,context:this.logContext})}logPostProfilerStopCallbackSpecified(){this.sendLogMessageToProcessors({id:Nr.PostProfilerStopCallbackSpecified,message:void 0,context:this.logContext})}logProfilerInstanceIsUndefined(){this.sendLogMessageToProcessors({id:Nr.ProfilerInstanceIsUndefined,message:void 0,context:this.logContext})}logProfilerStopPromiseResolved(){this.sendLogMessageToProcessors({id:Nr.ProfilerStopPromiseResolved,message:void 0,context:this.logContext})}logProfilerStopPromiseRejected(e){this.sendLogMessageToProcessors({id:Nr.ProfilerStopPromiseRejected,message:e,context:this.logContext})}logPostProfilerStopCallbackInvoked(){this.sendLogMessageToProcessors({id:Nr.PostProfilerStopCallbackInvoked,message:void 0,context:this.logContext})}logNotProcessingCapturedTraceDueToUserBeingIdle(){this.sendLogMessageToProcessors({id:Nr.NotProcessingCapturedTraceDueToUserBeingIdle,message:void 0,context:this.logContext})}logPostTimedStartProfilerStartCallbackInvoked(){this.sendLogMessageToProcessors({id:Nr.PostTimedStartProfilerStartCallbackInvoked,message:void 0,context:this.logContext})}logProfilingIntervalIsUndefined(){this.sendLogMessageToProcessors({id:Nr.ProfilingIntervalIsUndefined,message:void 0,context:this.logContext})}logTimerJobToStopProfilerSet(){this.sendLogMessageToProcessors({id:Nr.TimerJobToStopProfilerSet,message:void 0,context:this.logContext})}logTimedProfilerStopCallbackInvoked(){this.sendLogMessageToProcessors({id:Nr.TimedProfilerStopCallbackInvoked,message:void 0,context:this.logContext})}logTimedProfilerIsBeingStoppedManually(){this.sendLogMessageToProcessors({id:Nr.TimedProfilerIsBeingStoppedManually,message:void 0,context:this.logContext})}logProfilerStartPromiseCreated(){this.sendLogMessageToProcessors({id:Nr.ProfilerStartPromiseCreated,message:void 0,context:this.logContext})}logProfilerStopGoingToBeInvoked(){this.sendLogMessageToProcessors({id:Nr.ProfilerStopGoingToBeInvoked,message:void 0,context:this.logContext})}logSamplingIntervalUsedForStartingProfiler(){this.sendLogMessageToProcessors({id:Nr.SamplingIntervalUsedForStartingProfiler,message:void 0,context:this.logContext})}logMaxBufferSize(e){this.sendLogMessageToProcessors({id:Nr.MaxBufferSize,message:e,context:this.logContext})}logNoProfilerInstanceBuilt(){this.sendLogMessageToProcessors({id:Nr.NoProfilerInstanceBuilt,message:void 0,context:this.logContext})}logProfilerInitOptionsValidationFailed(){this.sendLogMessageToProcessors({id:Nr.ProfilerInitOptionsValidationFailed,message:void 0,context:this.logContext})}logUnableToFixUpProfilerInitOptions(){this.sendLogMessageToProcessors({id:Nr.UnableToFixUpProfilerInitOptions,message:void 0,context:this.logContext})}logProfilingIsNotEnabled(){this.sendLogMessageToProcessors({id:Nr.ProfilingIsNotEnabled,message:void 0,context:this.logContext})}logProfilingIsNotSupportedEnvironment(){this.sendLogMessageToProcessors({id:Nr.ProfilingIsNotSupportedEnvironment,message:void 0,context:this.logContext})}logFeatureCheckerIsNullOrUndefined(){this.sendLogMessageToProcessors({id:Nr.FeatureCheckerIsNullOrUndefined,message:void 0,context:this.logContext})}logNullSupportedEnvironmentCheckerInvoked(){this.sendLogMessageToProcessors({id:Nr.NullSupportedEnvironmentCheckerInvoked,message:void 0,context:this.logContext})}logNullJSCPUProfilerInitOptionsValidatorInvoked(){this.sendLogMessageToProcessors({id:Nr.NullJSCPUProfilerInitOptionsValidatorInvoked,message:void 0,context:this.logContext})}logNullJSCPUProfilerFactoryInvoked(){this.sendLogMessageToProcessors({id:Nr.NullJSCPUProfilerFactoryInvoked,message:void 0,context:this.logContext})}logNullOrUndefinedIdleInterval(){this.sendLogMessageToProcessors({id:Nr.NullOrUndefinedIdleInterval,message:void 0,context:this.logContext})}logCreateProfilerDidNotSubscribeProfilerObserver(){this.sendLogMessageToProcessors({id:Nr.CreateProfilerDidNotSubscribeProfilerObserver,message:void 0,context:this.logContext})}logNullOrUndefinedCustomPropertiesRetriever(){this.sendLogMessageToProcessors({id:Nr.NullOrUndefinedCustomPropertiesRetriever,message:void 0,context:this.logContext})}logNullOrUndefinedCustomProperties(){this.sendLogMessageToProcessors({id:Nr.NullOrUndefinedCustomProperties,message:void 0,context:this.logContext})}logCustomPropertyKeyIsNull(){this.sendLogMessageToProcessors({id:Nr.CustomPropertyKeyIsNull,message:void 0,context:this.logContext})}logCustomPropertyValueIsNull(){this.sendLogMessageToProcessors({id:Nr.CustomPropertyValueIsNull,message:void 0,context:this.logContext})}logRetrieveCallTreesCalledBeforeTransform(){this.sendLogMessageToProcessors({id:Nr.RetrieveCallTreesCalledBeforeTransform,message:void 0,context:this.logContext})}logRetrieveBuiltCallTreesBeforeBuildCallTrees(){this.sendLogMessageToProcessors({id:Nr.RetrieveBuiltCallTreesBeforeBuildCallTrees,message:void 0,context:this.logContext})}logRetrieveStacksCalledBeforeBuildStacks(){this.sendLogMessageToProcessors({id:Nr.RetrieveStacksCalledBeforeBuildStacks,message:void 0,context:this.logContext})}logExecutionStacksNeverBuilt(){this.sendLogMessageToProcessors({id:Nr.ExecutionStacksNeverBuilt,message:void 0,context:this.logContext})}logPeekOnNullExecutionStackInvoked(){this.sendLogMessageToProcessors({id:Nr.PeekOnNullExecutionStackInvoked,message:void 0,context:this.logContext})}logPopOnNullExecutionStackInvoked(){this.sendLogMessageToProcessors({id:Nr.PopOnNullExecutionStackInvoked,message:void 0,context:this.logContext})}logEmptyStacks(){this.sendLogMessageToProcessors({id:Nr.EmptyStacks,message:void 0,context:this.logContext})}logEmptyFrames(){this.sendLogMessageToProcessors({id:Nr.EmptyFrames,message:void 0,context:this.logContext})}logForciblyExitingLoopWhileBuildingStack(){this.sendLogMessageToProcessors({id:Nr.ForciblyExitingLoopWhileBuildingStack,message:void 0,context:this.logContext})}logRetrieveStackCalledBeforeBuildStack(){this.sendLogMessageToProcessors({id:Nr.RetrieveStackCalledBeforeBuildStack,message:void 0,context:this.logContext})}logExecutionStackNeverBuilt(){this.sendLogMessageToProcessors({id:Nr.ExecutionStackNeverBuilt,message:void 0,context:this.logContext})}logConvertStacksToCallTreesNeverCalled(){this.sendLogMessageToProcessors({id:Nr.ConvertStacksToCallTreesNeverCalled,message:void 0,context:this.logContext})}logConvertStackToCallTreeNeverCalled(){this.sendLogMessageToProcessors({id:Nr.ConvertStackToCallTreeNeverCalled,message:void 0,context:this.logContext})}logNullFrameNodeCreated(){this.sendLogMessageToProcessors({id:Nr.NullFrameNodeCreated,message:void 0,context:this.logContext})}logInvalidSampleIndex(){this.sendLogMessageToProcessors({id:Nr.InvalidSampleIndex,message:void 0,context:this.logContext})}logInvalidFrameNodeStartTime(){this.sendLogMessageToProcessors({id:Nr.InvalidFrameNodeStartTime,message:void 0,context:this.logContext})}logInvalidFrameNodeExecutionTime(){this.sendLogMessageToProcessors({id:Nr.InvalidFrameNodeExecutionTime,message:void 0,context:this.logContext})}logInvalidNewFrameNodeExecutionTime(){this.sendLogMessageToProcessors({id:Nr.InvalidNewFrameNodeExecutionTime,message:void 0,context:this.logContext})}logNegativeSubTreeExecutionTime(){this.sendLogMessageToProcessors({id:Nr.NegativeSubTreeExecutionTime,message:void 0,context:this.logContext})}logFixerForProfilerType(e){this.sendLogMessageToProcessors({id:Nr.FixerForProfilerType,message:e,context:this.logContext})}logMissingProfilerInitOptionsFixerImplementation(){this.sendLogMessageToProcessors({id:Nr.MissingProfilerInitOptionsFixerImplementation,message:void 0,context:this.logContext})}logLoopBackFixerFixProfilerInitOptionsInvoked(){this.sendLogMessageToProcessors({id:Nr.LoopBackFixerFixProfilerInitOptionsInvoked,message:void 0,context:this.logContext})}logLoopBackFixerRetrieveFixedProfilerInitOptionsInvoked(){this.sendLogMessageToProcessors({id:Nr.LoopBackFixerRetrieveFixedProfilerInitOptionsInvoked,message:void 0,context:this.logContext})}logMissingDeObfuscationEndpoint(){this.sendLogMessageToProcessors({id:Nr.MissingDeObfuscationEndpoint,message:void 0,context:this.logContext})}logNotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling(){this.sendLogMessageToProcessors({id:Nr.NotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling,message:void 0,context:this.logContext})}logNullCallTreeDepthFirstIteratorInvoked(){this.sendLogMessageToProcessors({id:Nr.NullCallTreeDepthFirstIteratorInvoked,message:void 0,context:this.logContext})}logEmptySamplesArrayPassedToFilter(){this.sendLogMessageToProcessors({id:Nr.EmptySamplesArrayPassedToFilter,message:void 0,context:this.logContext})}logNullCallTreeLeftMostNodesIteratorInvoked(){this.sendLogMessageToProcessors({id:Nr.NullCallTreeLeftMostNodesIteratorInvoked,message:void 0,context:this.logContext})}logNullCallTreeRightMostNodesIteratorInvoked(){this.sendLogMessageToProcessors({id:Nr.NullCallTreeRightMostNodesIteratorInvoked,message:void 0,context:this.logContext})}logMissingIsProfilingEnabledOnFeatureChecker(){this.sendLogMessageToProcessors({id:Nr.MissingIsProfilingEnabledOnFeatureChecker,message:void 0,context:this.logContext})}logFeatureCheckerIsProfilingEnabledNotAFunction(){this.sendLogMessageToProcessors({id:Nr.FeatureCheckerIsProfilingEnabledNotAFunction,message:void 0,context:this.logContext})}logNullCallTreeGetTotalExecutionTimeInvoked(){this.sendLogMessageToProcessors({id:Nr.NullCallTreeGetTotalExecutionTimeInvoked,message:void 0,context:this.logContext})}logNullCallTreeGetCustomPropertiesInvoked(){this.sendLogMessageToProcessors({id:Nr.NullCallTreeGetCustomPropertiesInvoked,message:void 0,context:this.logContext})}logNoCallTreesToSend(){this.sendLogMessageToProcessors({id:Nr.NoCallTreesToSend,message:void 0,context:this.logContext})}logSerializedCallTrees(e){this.sendLogMessageToProcessors({id:Nr.SerializedCallTrees,message:e,context:this.logContext})}logNullCallTreeIteratorImplGetNextInvoked(){this.sendLogMessageToProcessors({id:Nr.NullCallTreeIteratorImplGetNextInvoked,message:void 0,context:this.logContext})}logNullCallTreeIteratorImplHasMoreInvoked(){this.sendLogMessageToProcessors({id:Nr.NullCallTreeIteratorImplHasMoreInvoked,message:void 0,context:this.logContext})}logMissingProfilerNameForProfilerType(e){this.sendLogMessageToProcessors({id:Nr.MissingProfilerNameForProfilerType,message:e,context:this.logContext})}logExpectedOnlyOneNodePerLevelInCallTree(){this.sendLogMessageToProcessors({id:Nr.ExpectedOnlyOneNodePerLevelInCallTree,message:void 0,context:this.logContext})}logMissingWebWorkerSourceURL(){this.sendLogMessageToProcessors({id:Nr.MissingWebWorkerSourceURL,message:void 0,context:this.logContext})}logMaxNumberOfProfilersAlreadyCreated(){this.sendLogMessageToProcessors({id:Nr.MaxNumberOfProfilersAlreadyCreated,message:void 0,context:this.logContext})}logWebWorkerAPINotAvailable(){this.sendLogMessageToProcessors({id:Nr.WebWorkerAPINotAvailable,message:void 0,context:this.logContext})}logSamplingIntervalAboveMaxSamplingInterval(){this.sendLogMessageToProcessors({id:Nr.SamplingIntervalAboveMaxSamplingInterval,message:void 0,context:this.logContext})}logUnableToBootWebWorker(){this.sendLogMessageToProcessors({id:Nr.UnableToBootWebWorker,message:void 0,context:this.logContext})}logWorkerInstanceNotFound(){this.sendLogMessageToProcessors({id:Nr.WorkerInstanceNotFound,message:void 0,context:this.logContext})}logIdNotFoundInMessageToWorker(){this.sendLogMessageToProcessors({id:Nr.IdNotFoundInMessageToWorker,message:void 0,context:this.logContext})}logDataNotFoundInMessageToWorker(){this.sendLogMessageToProcessors({id:Nr.DataNotFoundInMessageToWorker,message:void 0,context:this.logContext})}logIdNotFoundInMessageFromWorker(){this.sendLogMessageToProcessors({id:Nr.IdNotFoundInMessageFromWorker,message:void 0,context:this.logContext})}logDataNotFoundInMessageFromWorker(){this.sendLogMessageToProcessors({id:Nr.DataNotFoundInMessageFromWorker,message:void 0,context:this.logContext})}logIdNotFoundInWorkerLogMessage(){this.sendLogMessageToProcessors({id:Nr.IdNotFoundInWorkerLogMessage,message:void 0,context:this.logContext})}logMessageNotFoundInWorkerLogMessage(){this.sendLogMessageToProcessors({id:Nr.MessageNotFoundInWorkerLogMessage,message:void 0,context:this.logContext})}logUnknownMessageFromWorker(e){this.sendLogMessageToProcessors({id:Nr.UnknownMessageFromWorker,message:void 0,context:this.logContext})}logUnknownLogMessageFromWorker(e){this.sendLogMessageToProcessors({id:Nr.UnknownLogMessageFromWorker,message:void 0,context:this.logContext})}logOperation(e,r,t,s,o,i,n,a){const l={operationName:e,parentOperationName:r,didOperationSucceed:t,measuredRunTime:s,didOperationFailUnexpectedly:o,logs:i,propertyBag:n,exception:a};this.sendLogMessageToProcessors({id:Nr.Operation,message:l,context:this.logContext})}logFallbackResultReturned(){this.sendLogMessageToProcessors({id:Nr.FallbackResultReturned,message:void 0,context:this.logContext})}logUnknownMessageToWorker(e){this.sendLogMessageToProcessors({id:Nr.FallbackResultReturned,message:e,context:this.logContext})}logErrorFromWorker(e){this.sendLogMessageToProcessors({id:Nr.ErrorFromWorker,message:e,context:this.logContext})}logExceptionEncounteredInWorker(e){this.sendLogMessageToProcessors({id:Nr.ExceptionEncounteredInWorker,message:e,context:this.logContext})}logMissingDeObfuscationInfoInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:Nr.MissingDeObfuscationInfoInTraceProcessingInfo,message:void 0,context:this.logContext})}logMissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:Nr.MissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo,message:void 0,context:this.logContext})}logMissingShouldRecordExpandedTimeStampsInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:Nr.MissingShouldRecordExpandedTimeStampsInTraceProcessingInfo,message:void 0,context:this.logContext})}logMissingCallTreeFilteringThresholdInMsInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:Nr.MissingCallTreeFilteringThresholdInMs,message:void 0,context:this.logContext})}logInvalidMessageReceivedByWorker(){this.sendLogMessageToProcessors({id:Nr.InvalidMessageReceivedByWorker,message:void 0,context:this.logContext})}logInvalidProcessTraceMessageReceivedByWorker(){this.sendLogMessageToProcessors({id:Nr.InvalidProcessTraceMessageReceivedByWorker,message:void 0,context:this.logContext})}logMissingTraceInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:Nr.InvalidProcessTraceMessageReceivedByWorker,message:void 0,context:this.logContext})}logSerializedCallTreesMissingInProcessorResult(){this.sendLogMessageToProcessors({id:Nr.SerializedCallTreesMissingInProcessorResult,message:void 0,context:this.logContext})}logLogsMissingInProcessorResult(){this.sendLogMessageToProcessors({id:Nr.LogsMissingInProcessorResult,message:void 0,context:this.logContext})}logUndefinedWebWorkerCompletionCallback(){this.sendLogMessageToProcessors({id:Nr.UndefinedWebWorkerCompletionCallback,message:void 0,context:this.logContext})}logLogsMissingInErrorsFromWebWorker(){this.sendLogMessageToProcessors({id:Nr.LogsMissingInErrorsFromWebWorker,message:void 0,context:this.logContext})}logUndefinedErrorCallback(){this.sendLogMessageToProcessors({id:Nr.UndefinedErrorCallback,message:void 0,context:this.logContext})}logUndefinedTraceProcessingInfoToReturnBack(){this.sendLogMessageToProcessors({id:Nr.UndefinedTraceProcessingInfoToReturnBack,message:void 0,context:this.logContext})}logWebWorkerErrorFallingBackToMainEventLoop(){this.sendLogMessageToProcessors({id:Nr.WebWorkerErrorFallingBackToMainEventLoop,message:void 0,context:this.logContext})}logWebWorkerAlreadyStarted(){this.sendLogMessageToProcessors({id:Nr.WebWorkerAlreadyStarted,message:void 0,context:this.logContext})}logWebWorkerTerminated(){this.sendLogMessageToProcessors({id:Nr.WebWorkerTerminated,message:void 0,context:this.logContext})}logCustomPropertiesMissingInTrace(){this.sendLogMessageToProcessors({id:Nr.CustomPropertiesMissingInTrace,message:void 0,context:this.logContext})}logProfilerTraceMissingInTrace(){this.sendLogMessageToProcessors({id:Nr.ProfilerTraceMissingInTrace,message:void 0,context:this.logContext})}logProfilerTraceStartTimestampMissingInTrace(){this.sendLogMessageToProcessors({id:Nr.ProfilerTraceStartTimestampMissingInTrace,message:void 0,context:this.logContext})}logProfilerPropertiesMissingInTrace(){this.sendLogMessageToProcessors({id:Nr.ProfilerPropertiesMissingInTrace,message:void 0,context:this.logContext})}logElapsedProfilingTimeMissingInTrace(){this.sendLogMessageToProcessors({id:Nr.ElapsedProfilingTimeMissingInTrace,message:void 0,context:this.logContext})}logInvalidProfilerTraceToProcess(){this.sendLogMessageToProcessors({id:Nr.InvalidProfilerTraceToProcess,message:void 0,context:this.logContext})}logWebWorkerError(e){this.sendLogMessageToProcessors({id:Nr.WebWorkerError,message:e,context:this.logContext})}logWebWorkerErrorCallbackNotRegistered(){this.sendLogMessageToProcessors({id:Nr.WebWorkerErrorCallbackNotRegistered,message:void 0,context:this.logContext})}logWebWorkerTraceProcessingInfoMissingToReturnOnError(){this.sendLogMessageToProcessors({id:Nr.WebWorkerTraceProcessingInfoMissingToReturnOnError,message:void 0,context:this.logContext})}logProfilerTrace(e,r){this.sendLogMessageToProcessors({id:Nr.ProfilerTrace,message:e,context:this.logContext,logOptions:{profilerTraceLoggingChunkSize:r}})}logMissingCallToFilterCallTrees(){this.sendLogMessageToProcessors({id:Nr.MissingCallToFilterCallTrees,message:void 0,context:this.logContext})}logMissingCallToFilterFrames(){this.sendLogMessageToProcessors({id:Nr.MissingCallToFilterFrames,message:void 0,context:this.logContext})}logNullCallTreeFramesFiltererFilterFramesInvoked(){this.sendLogMessageToProcessors({id:Nr.NullCallTreeFramesFiltererFilterFramesInvoked,message:void 0,context:this.logContext})}logNullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked(){this.sendLogMessageToProcessors({id:Nr.NullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked,message:void 0,context:this.logContext})}logNullCallTreeGetFramesFiltererInvoked(){this.sendLogMessageToProcessors({id:Nr.NullCallTreeGetFramesFiltererInvoked,message:void 0,context:this.logContext})}logFilterFrameWithNoParent(){this.sendLogMessageToProcessors({id:Nr.FilterFrameWithNoParent,message:void 0,context:this.logContext})}subscribe(e){this.logMessageProcessors.push(e)}unsubscribe(e){this.logMessageProcessors=this.logMessageProcessors.filter((r=>r!==e))}sendLogMessageToProcessors(e){this.logMessageProcessors.forEach((r=>{r.processLogMessage(e)}))}logOperationLogMessageFiltererInitOptions(e,r,t){this.sendLogMessageToProcessors({id:Nr.OperationLogMessageFiltererInitOptions,message:{shouldAlwaysLogOperationsData:e,listOfOperationNamesToAlwaysLog:r,operationMeasuredRunTimeFilteringThresholdInMs:t},context:this.logContext})}logNullOrUndefinedProfilerEvent(){this.sendLogMessageToProcessors({id:Nr.NullOrUndefinedProfilerEvent,message:void 0,context:this.logContext})}logUnknownProfilerEventId(e){this.sendLogMessageToProcessors({id:Nr.UnknownProfilerEventId,message:e,context:this.logContext})}logNullOrUndefinedProfilerTrace(){this.sendLogMessageToProcessors({id:Nr.NullOrUndefinedProfilerTrace,message:void 0,context:this.logContext})}logOperationLogMessageFilteringCriteriaMissingInTrace(){this.sendLogMessageToProcessors({id:Nr.OperationLogMessageFilteringCriteriaMissingInTrace,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerObserverPassedInForSubscribe(){this.sendLogMessageToProcessors({id:Nr.NullOrUndefinedProfilerObserverPassedInForSubscribe,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerEventIds(){this.sendLogMessageToProcessors({id:Nr.NullOrUndefinedProfilerEventIds,message:void 0,context:this.logContext})}logUnexpectedUndefinedProfilerEventIds(){this.sendLogMessageToProcessors({id:Nr.UnexpectedUndefinedProfilerEventIds,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerObserverPassedInForUnsubscribe(){this.sendLogMessageToProcessors({id:Nr.NullOrUndefinedProfilerObserverPassedInForUnsubscribe,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerEventToUnsubscribe(){this.sendLogMessageToProcessors({id:Nr.NullOrUndefinedProfilerEventToUnsubscribe,message:void 0,context:this.logContext})}logProfilerObserverWasNeverSubscribed(){this.sendLogMessageToProcessors({id:Nr.ProfilerObserverWasNeverSubscribed,message:void 0,context:this.logContext})}logUnexpectedNullOrUndefinedSubscribedProfilerEventIds(){this.sendLogMessageToProcessors({id:Nr.UnexpectedNullOrUndefinedSubscribedProfilerEventIds,message:void 0,context:this.logContext})}logProfilerObserverNeverSubscribedForProfilerEventId(e){this.sendLogMessageToProcessors({id:Nr.ProfilerObserverNeverSubscribedForProfilerEventId,message:e,context:this.logContext})}logCallTreeCustomPropertiesRetrieversMissingInTrace(){this.sendLogMessageToProcessors({id:Nr.CallTreeCustomPropertiesRetrieversMissingInTrace,message:void 0,context:this.logContext})}logNullOrUndefinedItemToSubscribe(e){this.sendLogMessageToProcessors({id:Nr.NullOrUndefinedItemToSubscribe,message:e,context:this.logContext})}logNullOrUndefinedItemForUnsubscribe(e){this.sendLogMessageToProcessors({id:Nr.NullOrUndefinedItemForUnsubscribe,message:e,context:this.logContext})}logItemWasNeverSubscribed(e){this.sendLogMessageToProcessors({id:Nr.ItemWasNeverSubscribed,message:e,context:this.logContext})}logNumberOfCallTreesFiltererByCustomFilterers(e,r){this.sendLogMessageToProcessors({id:Nr.NumberOfCallTreesFiltererByCustomFilterers,message:{filteredCount:e,totalCount:r},context:this.logContext})}logProcessTraceParamsIsNullOrUndefined(){this.sendLogMessageToProcessors({id:Nr.ProcessTraceParamsIsNullOrUndefined,message:void 0,context:this.logContext})}logCurrentTraceBeingProcessedNullOrUndefined(){this.sendLogMessageToProcessors({id:Nr.ProcessTraceParamsIsNullOrUndefined,message:void 0,context:this.logContext})}logTraceIdMissingInTrace(){this.sendLogMessageToProcessors({id:Nr.TraceIdMissingInTrace,message:void 0,context:this.logContext})}logUndefinedStoredProfilerTraceProcessingWorker(){this.sendLogMessageToProcessors({id:Nr.UndefinedStoredProfilerTraceProcessingWorker,message:void 0,context:this.logContext})}logNullCallTreeGetReconstructableTreeIteratorInvoked(){this.sendLogMessageToProcessors({id:Nr.NullCallTreeGetReconstructableTreeIteratorInvoked,message:void 0,context:this.logContext})}logGetCustomPropertiesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:Nr.GetCustomPropertiesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetResourcesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:Nr.GetResourcesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetFramesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:Nr.GetFramesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetStacksCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:Nr.GetStacksCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetSamplesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:Nr.GetSamplesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:Nr.GetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetProfilerPropertiesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:Nr.GetProfilerPropertiesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:Nr.GetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logRemoveQueryParamsFromResourceURLsNeverCalled(){this.sendLogMessageToProcessors({id:Nr.RemoveQueryParamsFromResourceURLsNeverCalled,message:void 0,context:this.logContext})}logSerializeCallTreeWasNeverCalled(){this.sendLogMessageToProcessors({id:Nr.SerializeCallTreeNeverCalled,message:void 0,context:this.logContext})}logConvertToJSONStringWasNeverCalled(){this.sendLogMessageToProcessors({id:Nr.ConvertToJSONStringWasNeverCalled,message:void 0,context:this.logContext})}logUnableToRetrieveCompressedBlob(e){this.sendLogMessageToProcessors({id:Nr.ConvertToJSONStringWasNeverCalled,message:e,context:this.logContext})}logUnableToRetrieveArrayBufferFromCompressedBlob(e){this.sendLogMessageToProcessors({id:Nr.ConvertToJSONStringWasNeverCalled,message:e,context:this.logContext})}logCompressionStreamAPIIsNotAvailable(){this.sendLogMessageToProcessors({id:Nr.CompressionStreamAPIIsNotAvailable,message:void 0,context:this.logContext})}logWebWorkerSource(e){this.sendLogMessageToProcessors({id:Nr.WebWorkerSource,message:e,context:this.logContext})}logWebWorkerCreationSucceeded(){this.sendLogMessageToProcessors({id:Nr.WebWorkerCreationSucceeded,message:void 0,context:this.logContext})}logWebWorkerCreationFailed(){this.sendLogMessageToProcessors({id:Nr.WebWorkerCreationFailed,message:void 0,context:this.logContext})}logWorkerNotRunning(){this.sendLogMessageToProcessors({id:Nr.WorkerNotRunning,message:void 0,context:this.logContext})}logFailedToCompressMultipleCallTreesDeobfuscationRequest(){this.sendLogMessageToProcessors({id:Nr.FailedToCompressMultipleCallTreesDeobfuscationRequest,message:void 0,context:this.logContext})}logUnknownStoredWebWorkerRequestId(e){this.sendLogMessageToProcessors({id:Nr.UnknownStoredWebWorkerRequestId,message:e,context:this.logContext})}logUnknownWebWorkerRequestId(e){this.sendLogMessageToProcessors({id:Nr.UnknownWebWorkerRequestId,message:e,context:this.logContext})}logMessageFromWorkerIsNullorUndefined(){this.sendLogMessageToProcessors({id:Nr.MessageFromWorkerIsNullorUndefined,message:void 0,context:this.logContext})}logFailedToCompressIndividualCallTreeDeobfuscationRequest(){this.sendLogMessageToProcessors({id:Nr.FailedToCompressIndividualCallTreeDeobfuscationRequest,message:void 0,context:this.logContext})}logMessageFromWorkerNotObject(){this.sendLogMessageToProcessors({id:Nr.MessageFromWorkerNotObject,message:void 0,context:this.logContext})}logNullStringCompressorInvoked(){this.sendLogMessageToProcessors({id:Nr.NullStringCompressorInvoked,message:void 0,context:this.logContext})}logUnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError(e){this.sendLogMessageToProcessors({id:Nr.UnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError,message:e,context:this.logContext})}logWebWorkerInitializationError(e){this.sendLogMessageToProcessors({id:Nr.WebWorkerInitializationError,message:e,context:this.logContext})}logUnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError(e){this.sendLogMessageToProcessors({id:Nr.UnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError,message:e,context:this.logContext})}logStartWorkerInvokedOnNullWorker(){this.sendLogMessageToProcessors({id:Nr.StartWorkerInvokedOnNullWorker,message:void 0,context:this.logContext})}logProcessRequestInvokedOnNullWorker(){this.sendLogMessageToProcessors({id:Nr.ProcessRequestInvokedOnNullWorker,message:void 0,context:this.logContext})}logProcessRequestForProcessTraceFailed(){this.sendLogMessageToProcessors({id:Nr.ProcessRequestForProcessTraceFailed,message:void 0,context:this.logContext})}logGetWorkerIdInvokedOnNullWorker(){this.sendLogMessageToProcessors({id:Nr.GetWorkerIdInvokedOnNullWorker,message:void 0,context:this.logContext})}logUnknownWebWorkerErrorId(e){this.sendLogMessageToProcessors({id:Nr.UnknownWebWorkerErrorId,message:e,context:this.logContext})}logInvalidTraceReceivedByWorker(){this.sendLogMessageToProcessors({id:Nr.InvalidTraceReceivedByWorker,message:void 0,context:this.logContext})}logUnknownMessageIdReceivedByWorker(){this.sendLogMessageToProcessors({id:Nr.UnknownMessageIdReceivedByWorker,message:void 0,context:this.logContext})}logWorkerIDBeingSetToBusyNotPresentInIdleWorkers(e){this.sendLogMessageToProcessors({id:Nr.WorkerIDBeingSetToBusyNotPresentInIdleWorkers,message:e,context:this.logContext})}logWorkerIDBeingSetToIdleNotPresentInBusyWorkers(e){this.sendLogMessageToProcessors({id:Nr.WorkerIDBeingSetToIdleNotPresentInBusyWorkers,message:e,context:this.logContext})}logUnknownWorkerIDBeingTerminated(e){this.sendLogMessageToProcessors({id:Nr.UnknownWorkerIDBeingTerminated,message:e,context:this.logContext})}logProcessRequestForCompressSerializedProfileFailed(){this.sendLogMessageToProcessors({id:Nr.ProcessRequestForCompressSerializedProfileFailed,message:void 0,context:this.logContext})}logUndefinedCompressionInfoToReturnBack(){this.sendLogMessageToProcessors({id:Nr.UndefinedCompressionInfoToReturnBack,message:void 0,context:this.logContext})}logOutputStringMissingInMessageFromWorker(){this.sendLogMessageToProcessors({id:Nr.OutputStringMissingInMessageFromWorker,message:void 0,context:this.logContext})}logLogsMissingInMessageFromWorker(){this.sendLogMessageToProcessors({id:Nr.LogsMissingInMessageFromWorker,message:void 0,context:this.logContext})}logMessageToWorkerIsNullorUndefined(){this.sendLogMessageToProcessors({id:Nr.MessageToWorkerIsNullorUndefined,message:void 0,context:this.logContext})}logMessageToWorkerNotObject(){this.sendLogMessageToProcessors({id:Nr.MessageToWorkerNotObject,message:void 0,context:this.logContext})}logSerializedProfileMissingInCompressSerializedProfileMessage(){this.sendLogMessageToProcessors({id:Nr.SerializedProfileMissingInCompressSerializedProfileMessage,message:void 0,context:this.logContext})}logMissingShouldRecordFrameCountsInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:Nr.MissingShouldRecordFrameCountsInTraceProcessingInfo,message:void 0,context:this.logContext})}logMissingFrameTotalExecutionTimeFilteringThresholdInMsInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:Nr.MissingFrameTotalExecutionTimeFilteringThresholdInMsInTraceProcessingInfo,message:void 0,context:this.logContext})}logShouldMakeSerializedCallTreesFullyReconstructibleMissingInTrace(){this.sendLogMessageToProcessors({id:Nr.ShouldMakeSerializedCallTreesFullyReconstructibleMissingInTrace,message:void 0,context:this.logContext})}logShouldCompressSerializedCallTreesMissingInTrace(){this.sendLogMessageToProcessors({id:Nr.ShouldCompressSerializedCallTreesMissingInTrace,message:void 0,context:this.logContext})}logWorkerReceivedMessageIsNullOrUndefined(){this.sendLogMessageToProcessors({id:Nr.WorkerReceivedMessageIsNullOrUndefined,message:void 0,context:this.logContext})}logWorkerReceivedMessageIsNotAnObject(){this.sendLogMessageToProcessors({id:Nr.WorkerReceivedMessageIsNotAnObject,message:void 0,context:this.logContext})}logTraceIsNull(){this.sendLogMessageToProcessors({id:Nr.TraceIsNull,message:void 0,context:this.logContext})}logTraceIsNotObject(){this.sendLogMessageToProcessors({id:Nr.TraceIsNotObject,message:void 0,context:this.logContext})}logInvalidCompressSerializedProfileMessageReceivedByWorker(){this.sendLogMessageToProcessors({id:Nr.InvalidCompressSerializedProfileMessageReceivedByWorker,message:void 0,context:this.logContext})}logSkippingLoggingSerializedCallTrees(){this.sendLogMessageToProcessors({id:Nr.SkippingLoggingSerializedCallTrees,message:void 0,context:this.logContext})}logNoSerializedCallTreesToLog(){this.sendLogMessageToProcessors({id:Nr.NoSerializedCallTreesToLog,message:void 0,context:this.logContext})}logInvalidConditionalProfileProcessingRequest(){this.sendLogMessageToProcessors({id:Nr.InvalidConditionalProfileProcessingRequest,message:void 0,context:this.logContext})}logTraceRequestingEventDrivenCallTreeFiltererNotSet(){this.sendLogMessageToProcessors({id:Nr.TraceRequestingEventDrivenCallTreeFiltererNotSet,message:void 0,context:this.logContext})}logFilterCallTreeByTraceRequestingEventsCalledWithoutValidEvents(){this.sendLogMessageToProcessors({id:Nr.FilterCallTreeByTraceRequestingEventsCalledWithoutValidEvents,message:void 0,context:this.logContext})}logNullTrustedTypesPolicyFactoryCreateScriptURLInvoked(){this.sendLogMessageToProcessors({id:Nr.NullTrustedTypesPolicyFactoryCreateScriptURLInvoked,message:void 0,context:this.logContext})}logTrustedTypesPolicyFactoryCreateScriptURLReturnedNull(){this.sendLogMessageToProcessors({id:Nr.TrustedTypesPolicyFactoryCreateScriptURLReturnedNull,message:void 0,context:this.logContext})}constructor(e){this.logContext=e,this.logMessageProcessors=[]}}!function(e){e[e.MainEventLoop=0]="MainEventLoop",e[e.Worker=1]="Worker"}(xr||(xr={}));class Bt{getFiltererName(){return"OperationLogMessageFilterer"}shouldFilterLogMessage(e){if(e.id!==Nr.Operation)return!1;if(this.shouldAlwaysLogOperationsData)return!1;const r=e.message;return!(r.didOperationFailUnexpectedly||-1!==this.listOfOperationNamesToAlwaysLog.indexOf(r.operationName)||r.measuredRunTime>this.operationMeasuredRunTimeFilteringThresholdInMs)}constructor(e,r,t,s){this.shouldAlwaysLogOperationsData=e,this.listOfOperationNamesToAlwaysLog=r,this.operationMeasuredRunTimeFilteringThresholdInMs=t,this.logger=s,this.logger.logOperationLogMessageFiltererInitOptions(e,r,t)}}function At(e,r=30){const t=[];for(let s=0;s<e.length;s+=r)t.push(e.slice(s,s+r));return t}class zt{getTransporterName(){return"ULSLogMessageTransporter"}transportLogMessage(e){if(!this.shouldTransportLogs)return;let r="";switch(e.context){case xr.MainEventLoop:r="ProfilingSessionLogger-MainEventLoop";break;case xr.Worker:r="ProfilingSessionLogger-Worker"}switch(e.id){case Nr.MissingProfilerImplementation:d.sendTraceTag(543477840,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Factory doesn't know how to create profiler of type ${e.message}`);break;case Nr.FailingValidationsInProfilerFactory:d.sendTraceTag(543477841,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Validations failed while creating the profiler`);break;case Nr.WindowMissingInJSEnvironment:d.sendTraceTag(543477842,u.msoulscat_Wac_Telemetry,g.Warning,`${r}: Unable to find window in the JS environment`);break;case Nr.WindowPropertyNameChecked:d.sendTraceTag(543477843,u.msoulscat_Wac_Telemetry,g.Info,`${r}: ${e.message}`);break;case Nr.UserAgentToParseChromiumMajorVersionNumber:d.sendTraceTag(543477844,u.msoulscat_Wac_Telemetry,g.Info,`${r}: ${e.message}`);break;case Nr.ChromeNotPresentInUserAgent:d.sendTraceTag(543477845,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Chrome was not found in the user agent`);break;case Nr.UnableToIsolateChromeInformationFromUserAgent:d.sendTraceTag(543477846,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unable to isolate chrome information from the user agent`);break;case Nr.UnableToExtractChromeVersionInformation:d.sendTraceTag(543477847,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unable to extract chrome version information from the user agent`);break;case Nr.UnableToParseChromeMajorVersionString:d.sendTraceTag(543477848,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unable to parse the chromium major version number`);break;case Nr.ParsedChromiumMajorVersionNumber:d.sendTraceTag(543477849,u.msoulscat_Wac_Telemetry,g.Info,`${r}: ${e.message.toString()}`);break;case Nr.UserAgentToCheckForChromiumBrowser:d.sendTraceTag(543477850,u.msoulscat_Wac_Telemetry,g.Info,`${r}: ${e.message}`);break;case Nr.EmptyUserAgentString:d.sendTraceTag(543477851,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Empty user agent string`);break;case Nr.BrowserUserAgentNotChromiumBased:d.sendTraceTag(543477852,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Browser not chromium based`);break;case Nr.UserAgentSpoofedToBeChromium:d.sendTraceTag(543477853,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Browser user agent spoofed to be chromium based`);break;case Nr.BrowserNotChromiumBasedBrowser:d.sendTraceTag(543477854,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Browser user agent spoofed to be chromium based`);break;case Nr.UnsupportedChromiumMajorVersionNumber:d.sendTraceTag(543477855,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Unsupported chromium major version number`);break;case Nr.ProfilerInitOptionsNullOrUndefined:d.sendTraceTag(543477856,u.msoulscat_Wac_Telemetry,g.Info,"ProfilerInitOptions cannot be null or undefined");break;case Nr.SamplingIntervalIsLessThanOrEqualToZero:d.sendTraceTag(543477857,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Sampling interval must be greater than zero`);break;case Nr.SamplingIntervalLessThanMinimumSupportedSamplingInterval:d.sendTraceTag(543477858,u.msoulscat_Wac_Telemetry,g.Warning,`${r}: Sampling interval ${e.message.samplingInterval} is less than minimum supported sampling interval ${e.message.minimumSupportedSamplingInterval}. API might perform scaling`);break;case Nr.UnsupportedBrowser:d.sendTraceTag(543477859,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Profiling is not supported in this browser`);break;case Nr.UnsupportedOperatingSystem:d.sendTraceTag(543477888,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Profiling is not supported in this operating system`);break;case Nr.JSSelfProfilingAPIUnavailable:d.sendTraceTag(543477889,u.msoulscat_Wac_Telemetry,g.Info,`${r}: JSSelfProfiling is not available`);break;case Nr.RetrievedUserAgent:d.sendTraceTag(543477890,u.msoulscat_Wac_Telemetry,g.Info,`${r}: ${e.message}`);break;case Nr.NullJSCPUProfilerStartCalled:d.sendTraceTag(543477891,u.msoulscat_Wac_Telemetry,g.Info,`${r}: NullJSCPUProfiler start called`);break;case Nr.NullJSCPUProfilerStopCalled:d.sendTraceTag(543477892,u.msoulscat_Wac_Telemetry,g.Info,`${r}: NullJSCPUProfiler stop called`);break;case Nr.NullOrUndefinedProfilerInitOptions:d.sendTraceTag(543477893,u.msoulscat_Wac_Telemetry,g.Info,`${r}: ProfilerInitOptions is null or undefined`);break;case Nr.MaxBufferSizeFixedToDefaultSize:d.sendTraceTag(543477894,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Max buffer size was fixed to the default max size`);break;case Nr.MaxBufferSizeWasNotFixedBeforeRetrieval:d.sendTraceTag(543477895,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Retrieve was called before fix max buffer size was called. The returned options can be undefined`);break;case Nr.ProfilerNotPresentInJSEnvironment:d.sendTraceTag(543477896,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Profiler is not present in the JS environment indicating JSSelfProfiling API is not available`);break;case Nr.SamplingIntervalValidationCheckFailed:d.sendTraceTag(543477897,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Sampling interval validation check failed`);break;case Nr.MaxBufferValidationFailed:d.sendTraceTag(543477898,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Max buffer size validation failed`);break;case Nr.MaxBufferSizeNotSpecified:d.sendTraceTag(543477899,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Max buffer size is not specified`);break;case Nr.MaxBufferSizeLessThanOrEqualToZero:d.sendTraceTag(543477900,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Max buffer size is less than or equal to zero`);break;case Nr.ManualProfilerValidationFailed:d.sendTraceTag(543477901,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Timed profiler initialization options failed to pass manual profiler initialization options`);break;case Nr.ProfilingIntervalValidationFailed:d.sendTraceTag(543477902,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Profiling interval validation failed`);break;case Nr.ProfilingIntervalNullOrUndefined:d.sendTraceTag(543477903,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Profiling interval is null or undefined`);break;case Nr.ProfilingIntervalLessThanOrEqualToZero:d.sendTraceTag(543477904,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Profiling interval is less than or equal to zero`);break;case Nr.ProfilingIntervalLessThanSamplingInterval:d.sendTraceTag(543477905,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Profiling interval is less than sampling interval`);break;case Nr.TimedProfilerValidationFailed:d.sendTraceTag(543477906,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Continuous profiler init options failed to pass timed profiler initialization options`);break;case Nr.IdleIntervalValidationFailed:d.sendTraceTag(543477907,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Idle interval validation failed for continuous profiler`);break;case Nr.IdleIntervalIsNullOrUndefined:d.sendTraceTag(543477908,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Idle interval is a required argument for continuous profiler`);break;case Nr.IdleIntervalIsLessThanOrEqualToZero:d.sendTraceTag(543477909,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Idle interval must be greater than zero`);break;case Nr.PostProfilerStartCallbackSpecified:d.sendTraceTag(543477910,u.msoulscat_Wac_Telemetry,g.Info,`${r}: A post profiler start callback is specified`);break;case Nr.PreProfilerStartCheckFailed:d.sendTraceTag(543477911,u.msoulscat_Wac_Telemetry,g.Info,`${r}: One or more pre-profiler start checks failed`);break;case Nr.MaxBufferSizeNotFixed:d.sendTraceTag(543477912,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Max buffer size must be fixed before we get to this point. Is the profiler being created outside the factory?`);break;case Nr.BailingOutOnNullProfiler:d.sendTraceTag(539109121,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Null profiler was created due to some error, bailing out from profiling loop`);break;case Nr.NotProcessingCapturedTraceDueToUserBeingIdle:d.sendTraceTag(537706779,u.msoulscat_Wac_Telemetry,g.Info,`${r}: No browser events were detected between profiler start and profiler end. data will not be proccessed since user was idle`);break;case Nr.ProfilerAlreadyStarted:d.sendTraceTag(543477913,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Attempting to start the profiler even though the profiler is already started. Stop the profiler first and attempt a restart`);break;case Nr.ProfilerStartSucceeded:d.sendTraceTag(543477914,u.msoulscat_Wac_Telemetry,g.Info,`${r}: start the profiler successfully`);break;case Nr.InvokingPostProfilerStartCallback:d.sendTraceTag(543477915,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Invoking the post profiler start callback`);break;case Nr.PostProfilerStopCallbackSpecified:d.sendTraceTag(543477916,u.msoulscat_Wac_Telemetry,g.Info,`${r}: A callback for post profiler stop is specified`);break;case Nr.ProfilerInstanceIsUndefined:d.sendTraceTag(543477917,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Profiler instance is undefined. Is the profiler is being stopped without ever starting?`);break;case Nr.ProfilerStopPromiseResolved:d.sendTraceTag(543477918,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Profiler stop promise has been resolved successfully`);break;case Nr.ProfilerStopPromiseRejected:d.sendTraceTag(543477919,u.msoulscat_Wac_Telemetry,g.Error,`${r}: ${JSON.stringify({promiseRejectionReason:e.message})}`);break;case Nr.PostProfilerStopCallbackInvoked:d.sendTraceTag(543477920,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Post profiler stop callback is being invoked`);break;case Nr.PostTimedStartProfilerStartCallbackInvoked:d.sendTraceTag(543477921,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Post timed profiler start callback invoked`);break;case Nr.ProfilingIntervalIsUndefined:d.sendTraceTag(543477922,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Profiling interval is expected to be defined for timed profiler`);break;case Nr.TimerJobToStopProfilerSet:d.sendTraceTag(543477923,u.msoulscat_Wac_Telemetry,g.Info,`${r}: A timer job to stop the profiler is created`);break;case Nr.TimedProfilerStopCallbackInvoked:d.sendTraceTag(543477952,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Timed profiler is being stopped automatically`);break;case Nr.TimedProfilerIsBeingStoppedManually:d.sendTraceTag(543477953,u.msoulscat_Wac_Telemetry,g.Warning,`${r}: Timed profiler is being stopped manually`);break;case Nr.ProfilerStartPromiseCreated:d.sendTraceTag(543477954,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Profiler start promise has been created`);break;case Nr.ProfilerStopGoingToBeInvoked:d.sendTraceTag(543477955,u.msoulscat_Wac_Telemetry,g.Info,`${r}: A call to stop profiler is going to be invoked`);break;case Nr.SamplingIntervalUsedForStartingProfiler:d.sendTraceTag(543477956,u.msoulscat_Wac_Telemetry,g.Info,`${r}: ${e.message.toString()}`);break;case Nr.MaxBufferSize:d.sendTraceTag(543477957,u.msoulscat_Wac_Telemetry,g.Info,`${r}: ${e.message.toString()}`);break;case Nr.NoProfilerInstanceBuilt:d.sendTraceTag(543477958,u.msoulscat_Wac_Telemetry,g.Error,`${r}: No instance of a profiler was built. Missing implementation?`);break;case Nr.ProfilerInitOptionsValidationFailed:d.sendTraceTag(543477959,u.msoulscat_Wac_Telemetry,g.Info,`${r}: ProfilerInitOptions validation failed`);break;case Nr.UnableToFixUpProfilerInitOptions:d.sendTraceTag(543477960,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unable to fixup profilerInitOptions`);break;case Nr.ProfilingIsNotEnabled:d.sendTraceTag(543477961,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Profiling feature is not enabled`);break;case Nr.ProfilingIsNotSupportedEnvironment:d.sendTraceTag(543477962,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Profiling is not supported in the environment`);break;case Nr.FeatureCheckerIsNullOrUndefined:d.sendTraceTag(543477963,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Feature checker is null or undefined`);break;case Nr.NullSupportedEnvironmentCheckerInvoked:d.sendTraceTag(543477964,u.msoulscat_Wac_Telemetry,g.Error,`${r}: NullSupportedEnvironmentChecker was invoked`);break;case Nr.NullJSCPUProfilerInitOptionsValidatorInvoked:d.sendTraceTag(543477965,u.msoulscat_Wac_Telemetry,g.Error,`${r}: NullJSCPUProfilerInitOptionsValidator was invoked`);break;case Nr.NullJSCPUProfilerFactoryInvoked:d.sendTraceTag(543477966,u.msoulscat_Wac_Telemetry,g.Error,`${r}: NullJSCPUProfilerFactory createProfiler was invoked`);break;case Nr.NullOrUndefinedIdleInterval:d.sendTraceTag(543477967,u.msoulscat_Wac_Telemetry,g.Error,`${r}: idleIntervalInMs is null or undefined. So killing the timer job`);break;case Nr.CreateProfilerDidNotSubscribeProfilerObserver:d.sendTraceTag(543477969,u.msoulscat_Wac_Telemetry,g.Error,`${r}: A profiler observer was never subscribed to the created profiler`);break;case Nr.NullOrUndefinedCustomPropertiesRetriever:d.sendTraceTag(543477972,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Custom Properties retriever is null or undefined`);break;case Nr.NullOrUndefinedCustomProperties:d.sendTraceTag(543477973,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Custom Properties is null or undefined`);break;case Nr.CustomPropertyKeyIsNull:d.sendTraceTag(543477974,u.msoulscat_Wac_Telemetry,g.Error,`${r}: A custom property key is null`);break;case Nr.CustomPropertyValueIsNull:d.sendTraceTag(543477975,u.msoulscat_Wac_Telemetry,g.Error,`${r}: A custom property value is null`);break;case Nr.RetrieveCallTreesCalledBeforeTransform:d.sendTraceTag(543477976,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Transform should be called before retrieveCallTrees`);break;case Nr.RetrieveBuiltCallTreesBeforeBuildCallTrees:d.sendTraceTag(543477977,u.msoulscat_Wac_Telemetry,g.Error,`${r}: BuildCallTrees should be called before retrieveBuiltCallTrees`);break;case Nr.RetrieveStacksCalledBeforeBuildStacks:d.sendTraceTag(543477978,u.msoulscat_Wac_Telemetry,g.Error,`${r}: BuildStacks should be called before retrieveStacks`);break;case Nr.ExecutionStacksNeverBuilt:d.sendTraceTag(543477979,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Execution stacks were not built. Instead an empty array of stacks will be returned`);break;case Nr.PeekOnNullExecutionStackInvoked:d.sendTraceTag(543477980,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Peek was invoked on Null ExecutionStack`);break;case Nr.PopOnNullExecutionStackInvoked:d.sendTraceTag(543477981,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Pop was invoked on Null ExecutionStack`);break;case Nr.EmptyStacks:d.sendTraceTag(543477982,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Stacks array is empty. No further processing can be performed.`);break;case Nr.EmptyFrames:d.sendTraceTag(543477983,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Frames array is empty. No further processing can be performed.`);break;case Nr.ForciblyExitingLoopWhileBuildingStack:d.sendTraceTag(543477984,u.msoulscat_Wac_Telemetry,g.Error,`${r}: While loop is being forcibly exited because of a runaway while loop `);break;case Nr.RetrieveStackCalledBeforeBuildStack:d.sendTraceTag(543477985,u.msoulscat_Wac_Telemetry,g.Error,`${r}: BuildStack should be called before RetrieveStack`);break;case Nr.ExecutionStackNeverBuilt:d.sendTraceTag(543477986,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Built execution stack is undefined. So null execution stack will be returned`);break;case Nr.ConvertStacksToCallTreesNeverCalled:d.sendTraceTag(543477987,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Convert stacks to call trees was not called before retrieve call trees. Empty call trees will be returned`);break;case Nr.ConvertStackToCallTreeNeverCalled:d.sendTraceTag(543478016,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Convert stack to call tree was not called before retrieve call tree. Null call tree will be returned`);break;case Nr.NullFrameNodeCreated:d.sendTraceTag(543478017,u.msoulscat_Wac_Telemetry,g.Info,`${r}: NullFrameNode created`);break;case Nr.InvalidSampleIndex:d.sendTraceTag(543478018,u.msoulscat_Wac_Telemetry,g.Error,`${r}: sampleIndex needs to be greater than zero for proper indexing`);break;case Nr.InvalidFrameNodeStartTime:d.sendTraceTag(543478019,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Invalid frame node starting time`);break;case Nr.InvalidFrameNodeExecutionTime:d.sendTraceTag(543478020,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Invalid frame node execution time`);break;case Nr.InvalidNewFrameNodeExecutionTime:d.sendTraceTag(543478021,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Invalid new frame node execution time`);break;case Nr.NegativeSubTreeExecutionTime:d.sendTraceTag(543478022,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Negative sub tree execution time`);break;case Nr.FixerForProfilerType:d.sendTraceTag(543478023,u.msoulscat_Wac_Telemetry,g.Info,`${r}: ${e.message.toString()}`);break;case Nr.MissingProfilerInitOptionsFixerImplementation:d.sendTraceTag(543478024,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Missing profiler init options fixer for unknown profiler type`);break;case Nr.LoopBackFixerFixProfilerInitOptionsInvoked:d.sendTraceTag(543478025,u.msoulscat_Wac_Telemetry,g.Error,`${r}: LoopBackFixer fixProfilerInitOptions was invoked`);break;case Nr.LoopBackFixerRetrieveFixedProfilerInitOptionsInvoked:d.sendTraceTag(543478026,u.msoulscat_Wac_Telemetry,g.Error,`${r}: LoopBackFixer retrieveFixedProfilerInitOptions was invoked`);break;case Nr.MissingDeObfuscationEndpoint:d.sendTraceTag(543478027,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Null or undefined deObfuscation endpoint was provided`);break;case Nr.NotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling:d.sendTraceTag(543478028,u.msoulscat_Wac_Telemetry,g.Info,`${r}: The profile was captured in a hidden document. So, we are not processing it`);break;case Nr.NullCallTreeDepthFirstIteratorInvoked:d.sendTraceTag(543478029,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Null getDepthFirstIterator was invoked`);break;case Nr.EmptySamplesArrayPassedToFilter:d.sendTraceTag(543478030,u.msoulscat_Wac_Telemetry,g.Error,`${r}: In order to properly filter out samples we need at least one sample`);break;case Nr.NullCallTreeLeftMostNodesIteratorInvoked:d.sendTraceTag(543478031,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Null iterator was returned back to iterate over left most nodes`);break;case Nr.NullCallTreeRightMostNodesIteratorInvoked:d.sendTraceTag(543478032,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Null iterator was returned back to iterate over right most nodes`);break;case Nr.MissingIsProfilingEnabledOnFeatureChecker:d.sendTraceTag(543478033,u.msoulscat_Wac_Telemetry,g.Error,`${r}: isProfilingEnabled is missing in FeatureChecker`);break;case Nr.FeatureCheckerIsProfilingEnabledNotAFunction:d.sendTraceTag(543478034,u.msoulscat_Wac_Telemetry,g.Error,`${r}: isProfilingEnabled on FeatureChecker is not a function`);break;case Nr.NullCallTreeGetTotalExecutionTimeInvoked:d.sendTraceTag(543478035,u.msoulscat_Wac_Telemetry,g.Error,`${r}: NullCallTree getTotalExecutionTimeInMs was invoked`);break;case Nr.NullCallTreeGetCustomPropertiesInvoked:d.sendTraceTag(543478036,u.msoulscat_Wac_Telemetry,g.Error,`${r}: NullCallTree getCustomProperties was invoked`);break;case Nr.SerializedCallTrees:d.sendTraceTag(543478037,u.msoulscat_Wac_Telemetry,g.Info,`${e.message}`);break;case Nr.NullCallTreeIteratorImplGetNextInvoked:d.sendTraceTag(543478038,u.msoulscat_Wac_Telemetry,g.Error,`${r}: NullCallTreeIterator getNext was invoked`);break;case Nr.NullCallTreeIteratorImplHasMoreInvoked:d.sendTraceTag(543478039,u.msoulscat_Wac_Telemetry,g.Error,`${r}: NullCallTreeIterator hasMore was invoked`);break;case Nr.MissingProfilerNameForProfilerType:d.sendTraceTag(543478040,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Missing profiler name for profiler type ${e.message}`);break;case Nr.ExpectedOnlyOneNodePerLevelInCallTree:d.sendTraceTag(543478041,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Expected to see only one node per level in the call tree`);break;case Nr.MissingWebWorkerSourceURL:d.sendTraceTag(543478042,u.msoulscat_Wac_Telemetry,g.Error,`${r}: In order to use the web worker to process the profile, a source URL needs to be passed into the worker. But the URL was not provided`);break;case Nr.MaxNumberOfProfilersAlreadyCreated:d.sendTraceTag(543478043,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Max number of profilers have already been created. Cannot create anymore`);break;case Nr.SamplingIntervalAboveMaxSamplingInterval:d.sendTraceTag(543478044,u.msoulscat_Wac_Telemetry,g.Error,`${r}: The sampling interval is above the maximum allowed sampling interval`);break;case Nr.WebWorkerAPINotAvailable:d.sendTraceTag(543478045,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Web Worker API is not available. We will fallback to processing traces on the main event loop`);break;case Nr.UnableToBootWebWorker:d.sendTraceTag(543478046,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Attempted to start the web worker. But it failed for some reason`);break;case Nr.WorkerInstanceNotFound:d.sendTraceTag(543478047,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Web worker instance was not found. Cannot perform any action`);break;case Nr.IdNotFoundInMessageToWorker:d.sendTraceTag(543478048,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Id was not found in the message sent to the worker`);break;case Nr.DataNotFoundInMessageToWorker:d.sendTraceTag(543478049,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Data was not found in the message sent to the worker`);break;case Nr.IdNotFoundInMessageFromWorker:d.sendTraceTag(543478050,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Id was not found in the message sent from the worker`);break;case Nr.DataNotFoundInMessageFromWorker:d.sendTraceTag(543478051,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Data was not found in the message sent from the worker`);break;case Nr.UnknownMessageFromWorker:d.sendTraceTag(543478080,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unknown message with message id - ${e.message} sent from the worker`);break;case Nr.ErrorFromWorker:d.sendTraceTag(540844827,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Error - ${e.message} sent from the worker`);break;case Nr.IdNotFoundInWorkerLogMessage:d.sendTraceTag(543478081,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Id is not present in the log message from the worker`);break;case Nr.MessageNotFoundInWorkerLogMessage:d.sendTraceTag(543478082,u.msoulscat_Wac_Telemetry,g.Error,`${r}: message is not present in the log message from the worker`);break;case Nr.UnknownLogMessageFromWorker:d.sendTraceTag(543478083,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unknown log message id - ${e.message} sent as part of the worker log message`);break;case Nr.Operation:d.sendTraceTag(543478084,u.msoulscat_Wac_Telemetry,e.message.didOperationFailUnexpectedly?g.Error:g.Info,`${r}: ${JSON.stringify({operationName:e.message.operationName,parentOperationName:e.message.parentOperationName,didOperationSucceed:e.message.didOperationSucceed,measuredRunTime:e.message.measuredRunTime,logs:e.message.logs,properties:e.message.propertyBag?Array.from(e.message.propertyBag):e.message.propertyBag,exception:e.message.exception})}`);break;case Nr.FallbackResultReturned:d.sendTraceTag(543478085,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Exception encountered. So, fallback result is being returned back`);break;case Nr.UnknownMessageToWorker:d.sendTraceTag(543478086,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unknown worker messageId ${e.message} encountered`);break;case Nr.ExceptionEncounteredInWorker:d.sendTraceTag(543478087,u.msoulscat_Wac_Telemetry,g.Error,`${r}: ${JSON.stringify(e.message)}`);break;case Nr.MissingDeObfuscationInfoInTraceProcessingInfo:d.sendTraceTag(543478088,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Missing deObfuscationInfo in trace processing information`);break;case Nr.MissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo:d.sendTraceTag(543478089,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Missing shouldKeepSamplesOutsideOfProfilingInterval in trace processing information`);break;case Nr.MissingShouldRecordExpandedTimeStampsInTraceProcessingInfo:d.sendTraceTag(543478090,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Missing shouldRecordExpandedTimeStamps in trace processing information`);break;case Nr.MissingCallTreeFilteringThresholdInMsInTraceProcessingInfo:d.sendTraceTag(543478091,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Missing callTreeFilteringThresholdInMs in trace processing information`);break;case Nr.InvalidMessageReceivedByWorker:d.sendTraceTag(543478092,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Invalid message received by the worker. Returning without any processing`);break;case Nr.InvalidProcessTraceMessageReceivedByWorker:d.sendTraceTag(543478093,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Invalid process trace message received by the worker. Returning without any processing`);break;case Nr.MissingTraceInTraceProcessingInfo:d.sendTraceTag(543478094,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Missing trace in trace processing information`);break;case Nr.SerializedCallTreesMissingInProcessorResult:d.sendTraceTag(543478095,u.msoulscat_Wac_Telemetry,g.Error,`${r}: serializedCallTrees is missing in the processor result`);break;case Nr.LogsMissingInProcessorResult:d.sendTraceTag(543478096,u.msoulscat_Wac_Telemetry,g.Error,`${r}: logs is missing in the processor result`);break;case Nr.UndefinedWebWorkerCompletionCallback:d.sendTraceTag(543478097,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Undefined completion callback for the processor result. The results will be ignored`);break;case Nr.LogsMissingInErrorsFromWebWorker:d.sendTraceTag(543478098,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Worker raised an error. But no logs can be found in the message that the worker sent over. This should not happen`);break;case Nr.UndefinedErrorCallback:d.sendTraceTag(543478099,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Worker raised an error. But the main thread has not provided a callback function to notify on error. So, ignoring the error`);break;case Nr.UndefinedTraceProcessingInfoToReturnBack:d.sendTraceTag(543478100,u.msoulscat_Wac_Telemetry,g.Error,`${r}: The worker ran into an error. But no trace processing info was found to return back to the caller`);break;case Nr.WebWorkerAlreadyStarted:d.sendTraceTag(543478101,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Attempting to start a web worker that has already been started`);break;case Nr.WebWorkerTerminated:d.sendTraceTag(540844828,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Web worker got terminated`);break;case Nr.WebWorkerErrorFallingBackToMainEventLoop:d.sendTraceTag(543478102,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Error encountered in the web worker. So falling back to processing the trace in the main event loop`);break;case Nr.CustomPropertiesMissingInTrace:d.sendTraceTag(543478103,u.msoulscat_Wac_Telemetry,g.Error,`${r}: CustomProperties was not found in the trace`);break;case Nr.ProfilerTraceMissingInTrace:d.sendTraceTag(543478104,u.msoulscat_Wac_Telemetry,g.Error,`${r}: ProfilerTrace was not found in the trace`);break;case Nr.ProfilerTraceStartTimestampMissingInTrace:d.sendTraceTag(543478105,u.msoulscat_Wac_Telemetry,g.Error,`${r}: ProfilerTraceStartTimestamp was not found in the trace`);break;case Nr.ProfilerPropertiesMissingInTrace:d.sendTraceTag(543478106,u.msoulscat_Wac_Telemetry,g.Error,`${r}: ProfilerProperties was not found in the trace`);break;case Nr.ElapsedProfilingTimeMissingInTrace:d.sendTraceTag(543478107,u.msoulscat_Wac_Telemetry,g.Error,`${r}: ElapsedProfilingTime was not found in the trace`);break;case Nr.InvalidProfilerTraceToProcess:d.sendTraceTag(543478108,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Invalid profiler trace to process. Returning back without processing`);break;case Nr.WebWorkerError:d.sendTraceTag(543478109,u.msoulscat_Wac_Telemetry,g.Error,`${r}: ${e.message}`);break;case Nr.WebWorkerErrorCallbackNotRegistered:d.sendTraceTag(543478110,u.msoulscat_Wac_Telemetry,g.Error,`${r}: No error callback has been registered for the web worker. So ignoring the error message`);break;case Nr.WebWorkerTraceProcessingInfoMissingToReturnOnError:d.sendTraceTag(543478111,u.msoulscat_Wac_Telemetry,g.Error,`${r}: In order to reprocess the trace in the main event loop, trace processing info is required. But did not find any`);break;case Nr.ProfilerTrace:const t=e.logOptions?.profilerTraceLoggingChunkSize||30;let s=0;for(const o of At(e.message.getResources(),t))d.sendTraceTag(543478112,u.msoulscat_Wac_Telemetry,g.Info,`${r}: [chunk ${s}] ${JSON.stringify({profilerTraceStartTimestamp:e.message.getProfilerTraceStartTimestamp(),resources:o})}`),s++;s=0;for(const o of At(e.message.getFrames(),t))d.sendTraceTag(539784207,u.msoulscat_Wac_Telemetry,g.Info,`${r}: [chunk ${s}] ${JSON.stringify({profilerTraceStartTimestamp:e.message.getProfilerTraceStartTimestamp(),frames:o})}`),s++;s=0;for(const o of At(e.message.getStacks(),t))d.sendTraceTag(539784208,u.msoulscat_Wac_Telemetry,g.Info,`${r}: [chunk ${s}] ${JSON.stringify({profilerTraceStartTimestamp:e.message.getProfilerTraceStartTimestamp(),stacks:o})}`),s++;s=0;for(const o of At(e.message.getSamplesTrimmed(),t))d.sendTraceTag(539784209,u.msoulscat_Wac_Telemetry,g.Info,`${r}: [chunk ${s}] ${JSON.stringify({profilerTraceStartTimestamp:e.message.getProfilerTraceStartTimestamp(),samples:o})}`),s++;break;case Nr.MissingCallToFilterCallTrees:d.sendTraceTag(543478113,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Missing a call to filterCallTrees. Returning an empty array back`);break;case Nr.MissingCallToFilterFrames:d.sendTraceTag(543478114,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Missing a call to filterFrames. Returning NullCallTree back`);break;case Nr.NullCallTreeFramesFiltererFilterFramesInvoked:d.sendTraceTag(543478115,u.msoulscat_Wac_Telemetry,g.Error,`${r}: filterFrames invoked on NullCallTreeFilterFrames`);break;case Nr.NullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked:d.sendTraceTag(543478144,u.msoulscat_Wac_Telemetry,g.Error,`${r}: retrieveFilteredCallTree invoked on NullCallTreeFilterFrames`);break;case Nr.NullCallTreeGetFramesFiltererInvoked:d.sendTraceTag(543478145,u.msoulscat_Wac_Telemetry,g.Error,`${r}: getFramesFilterer invoked on NullCallTree`);break;case Nr.FilterFrameWithNoParent:d.sendTraceTag(543478146,u.msoulscat_Wac_Telemetry,g.Error,`${r}: CallTreeFramesFiltererImpl tries to filter node with no parent`);break;case Nr.OperationLogMessageFiltererInitOptions:d.sendTraceTag(542389340,u.msoulscat_Wac_Telemetry,g.Info,`${r}: ${JSON.stringify(e.message)}`);break;case Nr.NoCallTreesToSend:d.sendTraceTag(542229786,u.msoulscat_Wac_Telemetry,g.Info,`${r}: No call trees to send to server`);break;case Nr.NullOrUndefinedProfilerEvent:d.sendTraceTag(540624656,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Null or undefined profiler event sent to the profiler observer`);break;case Nr.UnknownProfilerEventId:d.sendTraceTag(540624657,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unknown profiler event ID ${e.message} sent to the profiler observer. Are you missing a case statement?`);break;case Nr.NullOrUndefinedProfilerTrace:d.sendTraceTag(540624658,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Null or undefined profiler trace sent to the observer. This message will be ignored`);break;case Nr.OperationLogMessageFilteringCriteriaMissingInTrace:d.sendTraceTag(540612253,u.msoulscat_Wac_Telemetry,g.Error,`${r}: OperationLogMessageFilteringCriteria is missing in trace`);break;case Nr.NullOrUndefinedProfilerObserverPassedInForSubscribe:d.sendTraceTag(540545986,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Null or undefined profiler observer passed in for subscribe`);break;case Nr.NullOrUndefinedProfilerEventIds:d.sendTraceTag(540545987,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Null or undefined profiler event ids`);break;case Nr.UnexpectedUndefinedProfilerEventIds:d.sendTraceTag(540545988,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unexpected undefined profiler event ids`);break;case Nr.NullOrUndefinedProfilerObserverPassedInForUnsubscribe:d.sendTraceTag(540393807,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Null or undefined profiler observer passed in for unsubscribe`);break;case Nr.NullOrUndefinedProfilerEventToUnsubscribe:d.sendTraceTag(540393808,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Null or undefined profiler event id passed for unsubscribe`);break;case Nr.ProfilerObserverWasNeverSubscribed:d.sendTraceTag(540393809,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Profiler observer does not have any subscriptions`);break;case Nr.UnexpectedNullOrUndefinedSubscribedProfilerEventIds:d.sendTraceTag(540393810,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Expected to receive a set of subscribed profiler event IDs. But unexpectedly received null/undefined`);break;case Nr.ProfilerObserverNeverSubscribedForProfilerEventId:d.sendTraceTag(540393811,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Profiler observer never subscribed for the event ${e.message} that it is requesting to unsubscribe from`);break;case Nr.NullOrUndefinedItemToSubscribe:d.sendTraceTag(509374879,u.msoulscat_Wac_Telemetry,g.Error,`${r}: null or undefined item tried to subscribe to an instance of profiler. type: ${e.message}`);break;case Nr.NullOrUndefinedItemForUnsubscribe:d.sendTraceTag(509374878,u.msoulscat_Wac_Telemetry,g.Error,`${r}: null or undefined item tried to unsubscribe from an instance of profiler. type: ${e.message}`);break;case Nr.ItemWasNeverSubscribed:d.sendTraceTag(509374877,u.msoulscat_Wac_Telemetry,g.Error,`${r}: trying to unsubscribe while item was never subscribed. type: ${e.message}`);break;case Nr.NumberOfCallTreesFiltererByCustomFilterers:d.sendTraceTag(509374876,u.msoulscat_Wac_Telemetry,g.Info,`${r}: applied custom filterer and removed: ${e.message.filteredCount} call trees out of ${e.message.totalCount}.`);break;case Nr.CallTreeCustomPropertiesRetrieversMissingInTrace:d.sendTraceTag(539797325,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Call Tree Custom Properties Retrievers missing in trace. Trace is invalid and web worker will return without processing`);break;case Nr.ProcessTraceParamsIsNullOrUndefined:d.sendTraceTag(539767647,u.msoulscat_Wac_Telemetry,g.Info,`${r}: ProcessTraceParams is null or undefined`);break;case Nr.CurrentTraceBeingProcessedNullOrUndefined:d.sendTraceTag(539767648,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Current trace being processed is null or undefined`);break;case Nr.TraceIdMissingInTrace:d.sendTraceTag(539767629,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Trace ID is missing in trace`);break;case Nr.GetCustomPropertiesCalledOnNullJSCPUProfilerTrace:d.sendTraceTag(527247246,u.msoulscat_Wac_Telemetry,g.Error,`${r}: GetCustomProperties called on NullJSCPUProfilerTrace`);break;case Nr.GetFramesCalledOnNullJSCPUProfilerTrace:d.sendTraceTag(527247247,u.msoulscat_Wac_Telemetry,g.Error,`${r}: GetFrames called on NullJSCPUProfilerTrace`);break;case Nr.GetStacksCalledOnNullJSCPUProfilerTrace:d.sendTraceTag(527247248,u.msoulscat_Wac_Telemetry,g.Error,`${r}: GetStacks called on NullJSCPUProfilerTrace`);break;case Nr.GetSamplesCalledOnNullJSCPUProfilerTrace:d.sendTraceTag(527247249,u.msoulscat_Wac_Telemetry,g.Error,`${r}: GetSamples called on NullJSCPUProfilerTrace`);break;case Nr.GetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace:d.sendTraceTag(527247250,u.msoulscat_Wac_Telemetry,g.Error,`${r}: GetProfilerTraceStartTimestamp called on NullJSCPUProfilerTrace`);break;case Nr.GetProfilerPropertiesCalledOnNullJSCPUProfilerTrace:d.sendTraceTag(527247251,u.msoulscat_Wac_Telemetry,g.Error,`${r}: GetProfilerProperties called on NullJSCPUProfilerTrace`);break;case Nr.GetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace:d.sendTraceTag(527247252,u.msoulscat_Wac_Telemetry,g.Error,`${r}: GetElapsedProfilingTimeInMs called on NullJSCPUProfilerTrace`);break;case Nr.RemoveQueryParamsFromResourceURLsNeverCalled:d.sendTraceTag(527247253,u.msoulscat_Wac_Telemetry,g.Error,`${r}: removeQueryParamsFromResourceURLs was never called`);break;case Nr.SerializeCallTreeNeverCalled:d.sendTraceTag(506590178,u.msoulscat_Wac_Telemetry,g.Error,`${r}: serializeCallTree should be called before attempting to retrieve the call tree. Returning undefined`);break;case Nr.ConvertToJSONStringWasNeverCalled:d.sendTraceTag(506587295,u.msoulscat_Wac_Telemetry,g.Error,`${r}: convertToJSONString was never called. Returning a bad output`);break;case Nr.UnableToRetrieveCompressedBlob:d.sendTraceTag(506217675,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unable to retrieve compressed blob`);break;case Nr.UnableToRetrieveArrayBufferFromCompressedBlob:d.sendTraceTag(506217674,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unable to retrieve array buffer from compressed blob`);break;case Nr.CompressionStreamAPIIsNotAvailable:d.sendTraceTag(506217673,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Compression Stream API is not available. So, cannot compress the data`);break;case Nr.WebWorkerSource:d.sendTraceTag(506214145,u.msoulscat_Wac_Telemetry,g.Info,`${r}: ${e.message}`);break;case Nr.WebWorkerCreationSucceeded:d.sendTraceTag(506214144,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Web worker creation succeeded`);break;case Nr.WebWorkerCreationFailed:d.sendTraceTag(506214115,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Web worker creation failed`);break;case Nr.WorkerNotRunning:d.sendTraceTag(506214114,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Web worker is not running`);break;case Nr.FailedToCompressMultipleCallTreesDeobfuscationRequest:d.sendTraceTag(506209152,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Failed to compress multiple call trees deobfuscation request`);break;case Nr.FailedToCompressIndividualCallTreeDeobfuscationRequest:d.sendTraceTag(506209123,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Failed to compress individual call tree deobfuscation request`);break;case Nr.NullStringCompressorInvoked:d.sendTraceTag(506206368,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Null string compressor should not be invoked`);break;case Nr.UnknownStoredWebWorkerRequestId:d.sendTraceTag(506081793,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unknown stored web worker request id ${e.message}`);break;case Nr.UnknownWebWorkerRequestId:d.sendTraceTag(506081792,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unknown web worker request id ${e.message}`);break;case Nr.MessageFromWorkerIsNullorUndefined:d.sendTraceTag(506081763,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Message from worker is null or undefined`);break;case Nr.MessageFromWorkerNotObject:d.sendTraceTag(506081762,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Message from worker is not an object`);break;case Nr.UnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError:d.sendTraceTag(506081761,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unknown web worker request id when handling known web worker error ${e.message}`);break;case Nr.WebWorkerInitializationError:d.sendTraceTag(506081760,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Web worker initialization error ${e.message}`);break;case Nr.UnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError:d.sendTraceTag(506081759,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unknown web worker request id when handling unknown web worker error ${e.message}`);break;case Nr.StartWorkerInvokedOnNullWorker:d.sendTraceTag(506081758,u.msoulscat_Wac_Telemetry,g.Error,`${r}: StartWorker invoked on null worker`);break;case Nr.ProcessRequestInvokedOnNullWorker:d.sendTraceTag(506081757,u.msoulscat_Wac_Telemetry,g.Error,`${r}: processRequest invoked on null worker`);break;case Nr.GetWorkerIdInvokedOnNullWorker:d.sendTraceTag(506081756,u.msoulscat_Wac_Telemetry,g.Error,`${r}: getWorkerId invoked on null worker`);break;case Nr.UnknownWebWorkerErrorId:d.sendTraceTag(506081755,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unknown web worker error id ${e.message}`);break;case Nr.InvalidTraceReceivedByWorker:d.sendTraceTag(506081754,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Invalid trace received by the worker`);break;case Nr.UnknownMessageIdReceivedByWorker:d.sendTraceTag(506081753,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unknown message id received by the worker`);break;case Nr.WorkerIDBeingSetToBusyNotPresentInIdleWorkers:d.sendTraceTag(506078679,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Worker ID being set to busy is not present in idle workers ${e.message}`);break;case Nr.WorkerIDBeingSetToIdleNotPresentInBusyWorkers:d.sendTraceTag(506078678,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Worker ID being set to idle is not present in busy workers ${e.message}`);break;case Nr.UnknownWorkerIDBeingTerminated:d.sendTraceTag(506078677,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unknown worker ID being terminated ${e.message}`);break;case Nr.ProcessRequestForCompressSerializedProfileFailed:d.sendTraceTag(506061912,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Compression of serialized profile using web worker failed`);break;case Nr.UndefinedCompressionInfoToReturnBack:d.sendTraceTag(506057750,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Compression info is undefined. Returning without processing`);break;case Nr.OutputStringMissingInMessageFromWorker:d.sendTraceTag(506057749,u.msoulscat_Wac_Telemetry,g.Error,`${r}: outputString is missing in the message from the worker`);break;case Nr.LogsMissingInMessageFromWorker:d.sendTraceTag(506057748,u.msoulscat_Wac_Telemetry,g.Error,`${r}: logs is missing in the message from the worker`);break;case Nr.MessageToWorkerIsNullorUndefined:d.sendTraceTag(506054541,u.msoulscat_Wac_Telemetry,g.Error,`${r}: message to the worker is null or undefined`);break;case Nr.MessageToWorkerNotObject:d.sendTraceTag(506054540,u.msoulscat_Wac_Telemetry,g.Error,`${r}: message to the worker is not an object`);break;case Nr.SerializedProfileMissingInCompressSerializedProfileMessage:d.sendTraceTag(506054539,u.msoulscat_Wac_Telemetry,g.Error,`${r}: serializedProfile is missing in the compressSerializedProfile message`);break;case Nr.MissingShouldRecordFrameCountsInTraceProcessingInfo:d.sendTraceTag(506054538,u.msoulscat_Wac_Telemetry,g.Error,`${r}: missing shouldRecordFrameCounts in the trace processing info`);break;case Nr.MissingFrameTotalExecutionTimeFilteringThresholdInMsInTraceProcessingInfo:d.sendTraceTag(506054537,u.msoulscat_Wac_Telemetry,g.Error,`${r}: missing frameTotalExecutionTimeFilteringThresholdInMs in the trace processing info`);break;case Nr.ShouldMakeSerializedCallTreesFullyReconstructibleMissingInTrace:d.sendTraceTag(506054536,u.msoulscat_Wac_Telemetry,g.Error,`${r}: missing shouldMakeSerializedCallTreesFullyReconstructible in the trace processing info`);break;case Nr.ShouldCompressSerializedCallTreesMissingInTrace:d.sendTraceTag(506054535,u.msoulscat_Wac_Telemetry,g.Error,`${r}: missing shouldCompressSerializedCallTrees in the trace processing`);break;case Nr.WorkerReceivedMessageIsNullOrUndefined:d.sendTraceTag(506054534,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Worker received message is null or undefined`);break;case Nr.WorkerReceivedMessageIsNotAnObject:d.sendTraceTag(506054533,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Worker received message is not an object`);break;case Nr.TraceIsNull:d.sendTraceTag(506054532,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Trace is null`);break;case Nr.TraceIsNotObject:d.sendTraceTag(506054531,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Trace is not an object`);break;case Nr.InvalidCompressSerializedProfileMessageReceivedByWorker:d.sendTraceTag(506053314,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Invalid compress serialized profile message received by the worker`);break;case Nr.SkippingLoggingSerializedCallTrees:d.sendTraceTag(506050432,u.msoulscat_Wac_Telemetry,g.Info,`${r}: Skipping logging serialized call trees because the flag is not set`);break;case Nr.NoSerializedCallTreesToLog:d.sendTraceTag(506050403,u.msoulscat_Wac_Telemetry,g.Info,`${r}: No serialized call trees to log`);break;case Nr.InvalidConditionalProfileProcessingRequest:d.sendTraceTag(506029471,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Invalid conditional profile processing request`);break;case Nr.TraceRequestingEventDrivenCallTreeFiltererNotSet:d.sendTraceTag(506015952,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Trace requesting event driven call tree filterer is not set`);break;case Nr.FilterCallTreeByTraceRequestingEventsCalledWithoutValidEvents:d.sendTraceTag(506015951,u.msoulscat_Wac_Telemetry,g.Error,`${r}: FilterCallTreeByTraceRequestingEvents called without valid events`);break;case Nr.NullTrustedTypesPolicyFactoryCreateScriptURLInvoked:d.sendTraceTag(505693575,u.msoulscat_Wac_Telemetry,g.Error,`${r}: NullTrustedTypesPolicyFactory's createScriptURL invoked`);break;case Nr.TrustedTypesPolicyFactoryCreateScriptURLReturnedNull:d.sendTraceTag(505693574,u.msoulscat_Wac_Telemetry,g.Error,`${r}: TrustedTypesPolicyFactory's createScriptURL returned null`);break;default:d.sendTraceTag(543478147,u.msoulscat_Wac_Telemetry,g.Error,`${r}: Unknown LogId. Please add a case for ${e.id}`)}}constructor(e){this.shouldTransportLogs=e}}class $t{processLogMessage(e){this.shouldFilterLogMessage(e)||this.logMessageTransporters.forEach((r=>{r.transportLogMessage(e)}))}subscribeFilterer(e){this.logMessageFilterers.push(e)}subscribeTransporter(e){this.logMessageTransporters.push(e)}shouldFilterLogMessage(e){for(const r of this.logMessageFilterers)if(r.shouldFilterLogMessage(e))return!0;return!1}constructor(){this.logMessageFilterers=[],this.logMessageTransporters=[]}}class qt extends $t{processLogMessage(e){this.storedLogMessages.queue(e),this.storedLogMessages.length()>10&&this.logMessageTransporters.length>0&&!this.idleTimeJobScheduled&&(this.idleTimeJobScheduled=!0,this.transportLogsInIdleTime())}getNextLogMessageToTransport(){let e=this.storedLogMessages.peek();for(;void 0!==e&&this.shouldFilterLogMessage(e);)this.storedLogMessages.dequeue(),e=this.storedLogMessages.peek();return void 0!==e&&this.storedLogMessages.dequeue(),e}transportLogsInIdleTime(){const e=S.generateOperationResult({didOperationSucceed:!1,result:void 0});this.idleTimeJobScheduler.scheduleJobForIdleTime((()=>{C.startNew("TransportLogMessagesInIdleTime",(e=>{let r=this.getNextLogMessageToTransport(),t=0;for(;void 0!==r&&t<50;)this.logMessageTransporters.forEach((e=>{void 0!==r&&e.transportLogMessage(r)})),t+=1,r=this.getNextLogMessageToTransport(),e.addProperty("NumberOfLogMessagesTransported",t);return this.idleTimeJobScheduled=!1,S.generateOperationResult({didOperationSucceed:!0,result:void 0})}),e,this.logger)}))}getAllStoredLogMessages(){return this.storedLogMessages}constructor(e,r){super(),this.idleTimeJobScheduler=e,this.logger=r,this.storedLogMessages=G.createQueue(),this.idleTimeJobScheduled=!1}}class Dt{retrievePackageV2(e){const r=S.generateOperationResult({didOperationSucceed:!1,result:new Ut(this.logger)});return C.startNew("RetrieveCPUProfilingPackageV2",(r=>{if(null==e)return S.generateOperationResult({didOperationSucceed:!1,result:new Ut(this.logger)});if(null==e.ulsInstance)return S.generateOperationResult({didOperationSucceed:!1,result:new Ut(this.logger)});if(c(e.ulsInstance),r.addProperty("appName",e.appName),r.addProperty("buildVersion",e.buildVersion),null==e.deObfuscationEndpoint)return this.logger.logMissingDeObfuscationEndpoint(),S.generateOperationResult({didOperationSucceed:!1,result:new Ut(this.logger)});if(r.addProperty("deobfuscationEndpoint",e.deObfuscationEndpoint),null==e.useMainEventLoopForProfilerTraceProcessing&&(e.useMainEventLoopForProfilerTraceProcessing=xe),r.addProperty("UseMainEventLoopForProfilerTraceProcessing",e.useMainEventLoopForProfilerTraceProcessing),r.addProperty("profilerTraceProcessingWebWorkerSourceURL",e.profilerTraceProcessingWebWorkerSourceURL),!e.useMainEventLoopForProfilerTraceProcessing&&null==e.profilerTraceProcessingWebWorkerSourceURL)return this.logger.logMissingWebWorkerSourceURL(),S.generateOperationResult({didOperationSucceed:!1,result:new Ut(this.logger)});null==e.callTreeFilteringThresholdInMs&&(e.callTreeFilteringThresholdInMs=50),r.addProperty("CallTreeFilteringThresholdInMs",e.callTreeFilteringThresholdInMs),null==e.shouldProfilingStartInAHiddenDocument&&(e.shouldProfilingStartInAHiddenDocument=We),r.addProperty("ShouldProfilingStartInAHiddenDocument",e.shouldProfilingStartInAHiddenDocument),null==e.shouldProcessProfileCapturedInAHiddenDocument&&(e.shouldProcessProfileCapturedInAHiddenDocument=Me),r.addProperty("ShouldProcessProfileCapturedInAHiddenDocument",e.shouldProcessProfileCapturedInAHiddenDocument),null==e.shouldKeepSamplesOutsideOfProfilingInterval&&(e.shouldKeepSamplesOutsideOfProfilingInterval=Re),r.addProperty("ShouldKeepSamplesOutsideOfProfilingInterval",e.shouldKeepSamplesOutsideOfProfilingInterval),null==e.shouldRecordExpandedTimeStamps&&(e.shouldRecordExpandedTimeStamps=Ne),r.addProperty("ShouldRecordExpandedTimeStamps",e.shouldRecordExpandedTimeStamps),null==e.shouldCompressSerializedCallTrees&&(e.shouldCompressSerializedCallTrees=!1),r.addProperty("shouldCompressSerializedCallTrees",e.shouldCompressSerializedCallTrees),null==e.shouldSendAllCallTreesFromProfileInASingleRequest&&(e.shouldSendAllCallTreesFromProfileInASingleRequest=Fe),r.addProperty("ShouldSendAllCallTreesFromProfileInASingleRequest",e.shouldSendAllCallTreesFromProfileInASingleRequest),null==e.shouldUseSendBeaconForSendingCallTrees&&(e.shouldUseSendBeaconForSendingCallTrees=!0),null==e.frameTotalExecutionTimeFilteringThresholdInMs&&(e.frameTotalExecutionTimeFilteringThresholdInMs=0),r.addProperty("FrameTotalExecutionTimeFilteringThresholdInMs",e.frameTotalExecutionTimeFilteringThresholdInMs),null==e.shouldAlwaysLogOperationsData&&(e.shouldAlwaysLogOperationsData=Ee),r.addProperty("ShouldAlwaysLogOperationsData",e.shouldAlwaysLogOperationsData),null==e.durationThresholdInMsToLogOperationData&&(e.durationThresholdInMsToLogOperationData=50),r.addProperty("DurationThresholdInMsToLogOperationData",e.durationThresholdInMsToLogOperationData),null==e.shouldUseInMemoryLogger&&(e.shouldUseInMemoryLogger=!1),r.addProperty("ShouldUseInMemoryLogger",e.shouldUseInMemoryLogger),null==e.canUseMultipleWebWorkers&&(e.canUseMultipleWebWorkers=!1),r.addProperty("canUseMultipleWebWorkers",e.canUseMultipleWebWorkers),null==e.shouldTransportLogs&&(e.shouldTransportLogs=!0),r.addProperty("shouldTransportLogs",e.shouldTransportLogs),this.logMessageTransporter=new zt(e.shouldTransportLogs),e.shouldUseInMemoryLogger||(this.logger.unsubscribe(this.logMessageProcessor),this.logMessageProcessor=new $t,this.logMessageProcessor.subscribeTransporter(this.logMessageTransporter),this.logger.subscribe(this.logMessageProcessor)),null==e.shouldSendProfilesForDeobfuscationImmediately&&(e.shouldSendProfilesForDeobfuscationImmediately=Ue),r.addProperty("ShouldSendProfilesForDeobfuscationImmediately",e.shouldSendProfilesForDeobfuscationImmediately),null==e.shouldProcessProfileCapturedWhileUserIsIdle&&(e.shouldProcessProfileCapturedWhileUserIsIdle=Le),r.addProperty("ShouldProcessProfileCapturedWhileUserIsIdle",e.shouldProcessProfileCapturedWhileUserIsIdle),null==e.shouldKeepQueryParamsInResourceURLs&&(e.shouldKeepQueryParamsInResourceURLs=Be),r.addProperty("ShouldKeepQueryParamsInResourceURLs",e.shouldKeepQueryParamsInResourceURLs),null==e.shouldMakeSerializedCallTreesFullyReconstructible&&(e.shouldMakeSerializedCallTreesFullyReconstructible=Ae),r.addProperty("ShouldMakeSerializedCallTreesFullyReconstructible",e.shouldMakeSerializedCallTreesFullyReconstructible),null==e.serializeCallTreeWithPropertyBagAsPriority&&(e.serializeCallTreeWithPropertyBagAsPriority=ze),r.addProperty("SerializeCallTreeWithPropertyBagAsPriority",e.serializeCallTreeWithPropertyBagAsPriority),null==e.shouldRecordFrameCounts&&(e.shouldRecordFrameCounts=!1),r.addProperty("shouldRecordFrameCounts",e.shouldRecordFrameCounts),null==e.shouldLogRawProfilerTrace&&(e.shouldLogRawProfilerTrace=!1),r.addProperty("shouldLogRawProfilerTrace",e.shouldLogRawProfilerTrace),null==e.profilerTraceLoggingChunkSize&&(e.profilerTraceLoggingChunkSize=30),r.addProperty("profilerTraceLoggingChunkSize",e.profilerTraceLoggingChunkSize),null==e.shouldLogSerializedCallTrees&&(e.shouldLogSerializedCallTrees=$e),r.addProperty("shouldLogSerializedCallTrees",e.shouldLogSerializedCallTrees),null==e.shouldSendSerializedCallTreesToServer&&(e.shouldSendSerializedCallTreesToServer=qe),r.addProperty("shouldSendSerializedCallTreesToServer",e.shouldSendSerializedCallTreesToServer),null==e.shouldSkipSupportedOSCheck&&(e.shouldSkipSupportedOSCheck=!1),r.addProperty("ShouldSkipSupportedOSCheck",e.shouldSkipSupportedOSCheck),null==e.maxNumberOfWebWorkersToUse&&(e.maxNumberOfWebWorkersToUse=4),r.addProperty("MaxNumberOfWebWorkersToUse",e.maxNumberOfWebWorkersToUse),null==e.shouldAllowForConditionalProfileProcessingAndSending&&(e.shouldAllowForConditionalProfileProcessingAndSending=!1),r.addProperty("ShouldAllowForConditionalProfileProcessingAndSending",e.shouldAllowForConditionalProfileProcessingAndSending),null==e.isEventBasedPropertyBagAdditionEnabled&&(e.isEventBasedPropertyBagAdditionEnabled=!1),r.addProperty("isEventBasedPropertyBagAdditionEnabled",e.isEventBasedPropertyBagAdditionEnabled),null==e.storedProfilesRetentionPeriodInMs&&(e.storedProfilesRetentionPeriodInMs=3e4),r.addProperty("StoredProfilesRetentionPeriodInMs",e.storedProfilesRetentionPeriodInMs);const t=new Bt(e.shouldAlwaysLogOperationsData,Pe,e.durationThresholdInMsToLogOperationData,this.logger);return this.logMessageProcessor.subscribeFilterer(t),S.generateOperationResult({didOperationSucceed:!0,result:new wt(e.featureChecker,e,this.logMessageProcessor,this.logger)})}),r,this.logger).getResult()}retrievePackage(e,r){const t=S.generateOperationResult({didOperationSucceed:!1,result:new Ut(this.logger)});return C.startNew("RetrieveCPUProfilingPackage",(t=>{if(null==r)return S.generateOperationResult({didOperationSucceed:!1,result:new Ut(this.logger)});if(null==r.ulsInstance)return S.generateOperationResult({didOperationSucceed:!1,result:new Ut(this.logger)});if(c(r.ulsInstance),null==r.deObfuscationEndpoint)return this.logger.logMissingDeObfuscationEndpoint(),S.generateOperationResult({didOperationSucceed:!1,result:new Ut(this.logger)});if(null==r.useMainEventLoopForProfilerTraceProcessing&&(r.useMainEventLoopForProfilerTraceProcessing=xe),t.addProperty("UseMainEventLoopForProfilerTraceProcessing",r.useMainEventLoopForProfilerTraceProcessing),!r.useMainEventLoopForProfilerTraceProcessing&&null==r.profilerTraceProcessingWebWorkerSourceURL)return this.logger.logMissingWebWorkerSourceURL(),S.generateOperationResult({didOperationSucceed:!1,result:new Ut(this.logger)});null==r.callTreeFilteringThresholdInMs&&(r.callTreeFilteringThresholdInMs=50),null==r.shouldProfilingStartInAHiddenDocument&&(r.shouldProfilingStartInAHiddenDocument=We),null==r.shouldProcessProfileCapturedInAHiddenDocument&&(r.shouldProcessProfileCapturedInAHiddenDocument=Me),null==r.shouldKeepSamplesOutsideOfProfilingInterval&&(r.shouldKeepSamplesOutsideOfProfilingInterval=Re),null==r.shouldRecordExpandedTimeStamps&&(r.shouldRecordExpandedTimeStamps=Ne),null==r.shouldSendAllCallTreesFromProfileInASingleRequest&&(r.shouldSendAllCallTreesFromProfileInASingleRequest=Fe),null==r.frameTotalExecutionTimeFilteringThresholdInMs&&(r.frameTotalExecutionTimeFilteringThresholdInMs=0),null==r.shouldAlwaysLogOperationsData&&(r.shouldAlwaysLogOperationsData=Ee),null==r.durationThresholdInMsToLogOperationData&&(r.durationThresholdInMsToLogOperationData=50),null==r.shouldUseInMemoryLogger&&(r.shouldUseInMemoryLogger=!1),r.shouldUseInMemoryLogger||(this.logger.unsubscribe(this.logMessageProcessor),this.logMessageProcessor=new $t,this.logMessageProcessor.subscribeTransporter(this.logMessageTransporter),this.logger.subscribe(this.logMessageProcessor)),null==r.shouldSendProfilesForDeobfuscationImmediately&&(r.shouldSendProfilesForDeobfuscationImmediately=Ue),null==r.shouldProcessProfileCapturedWhileUserIsIdle&&(r.shouldProcessProfileCapturedWhileUserIsIdle=Le),null==r.shouldKeepQueryParamsInResourceURLs&&(r.shouldKeepQueryParamsInResourceURLs=Be),null==r.shouldMakeSerializedCallTreesFullyReconstructible&&(r.shouldMakeSerializedCallTreesFullyReconstructible=Ae),null==r.serializeCallTreeWithPropertyBagAsPriority&&(r.serializeCallTreeWithPropertyBagAsPriority=ze),null==r.shouldSendSerializedCallTreesToServer&&(r.shouldSendSerializedCallTreesToServer=qe),null==r.shouldLogSerializedCallTrees&&(r.shouldLogSerializedCallTrees=$e);const s=new Bt(r.shouldAlwaysLogOperationsData,Pe,r.durationThresholdInMsToLogOperationData,this.logger);return this.logMessageProcessor.subscribeFilterer(s),t.addProperty("DeObfuscationEndpoint",r.deObfuscationEndpoint),t.addProperty("CallTreeFilteringThresholdInMs",r.callTreeFilteringThresholdInMs),t.addProperty("ShouldProfilingStartInAHiddenDocument",r.shouldProfilingStartInAHiddenDocument),t.addProperty("ShouldProcessProfileCapturedInAHiddenDocument",r.shouldProcessProfileCapturedInAHiddenDocument),t.addProperty("ShouldKeepSamplesOutsideOfProfilingInterval",r.shouldKeepSamplesOutsideOfProfilingInterval),t.addProperty("ShouldRecordExpandedTimeStamps",r.shouldRecordExpandedTimeStamps),t.addProperty("WebWorkerSourceURL",r.profilerTraceProcessingWebWorkerSourceURL),t.addProperty("ShouldSendAllCallTreesFromProfileInASingleRequest",r.shouldSendAllCallTreesFromProfileInASingleRequest),t.addProperty("FrameTotalExecutionTimeFilteringThresholdInMs",r.frameTotalExecutionTimeFilteringThresholdInMs),t.addProperty("ShouldAlwaysLogOperationsData",r.shouldAlwaysLogOperationsData),t.addProperty("DurationThresholdToLogOperationData",r.durationThresholdInMsToLogOperationData),t.addProperty("ShouldUseInMemoryLogger",r.shouldUseInMemoryLogger),t.addProperty("ShouldKeepQueryParamsInResourceURLs",r.shouldKeepQueryParamsInResourceURLs),t.addProperty("ShouldMakeSerializedCallTreesFullyReconstructible",r.shouldMakeSerializedCallTreesFullyReconstructible),S.generateOperationResult({didOperationSucceed:!0,result:new wt(e,r,this.logMessageProcessor,this.logger)})}),t,this.logger).getResult()}constructor(){this.logger=new Lt(xr.MainEventLoop);const e=F.getIdleTimeJobScheduler();this.logMessageProcessor=new qt(e,this.logger),this.logMessageTransporter=new zt(!0),this.logMessageProcessor.subscribeTransporter(this.logMessageTransporter),this.logger.subscribe(this.logMessageProcessor)}}function Jt(){return new Dt}officeOnlineCpuProfiling=s}();
//# sourceMappingURL=https://artifacts.dev.azure.com/office/_apis/symbol/symsrv/officeOnlineCpuProfiling.min.js.map/8ca60f2166b4017e9df28ca6d18761f2/officeOnlineCpuProfiling.min.js.map